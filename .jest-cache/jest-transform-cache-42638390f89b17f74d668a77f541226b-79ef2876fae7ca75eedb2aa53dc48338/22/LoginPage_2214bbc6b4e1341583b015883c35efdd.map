{"file":"D:\\Documents\\aiprojets\\votepublic\\src\\pages\\LoginPage.tsx","mappings":"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","names":[],"sources":["D:\\Documents\\aiprojets\\votepublic\\src\\pages\\LoginPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport toast from 'react-hot-toast';\r\nimport { Mail, Lock, Eye, EyeOff, ArrowLeft } from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ROUTES, ERROR_MESSAGES, SUCCESS_MESSAGES } from '../utils/constants';\r\n\r\n// Schéma de validation pour la connexion\r\nconst loginSchema = z.object({\r\n  email: z.string().email('Adresse email invalide'),\r\n  password: z.string().min(1, 'Le mot de passe est requis'),\r\n});\r\n\r\nexport const LoginPage: React.FC = () => {\r\n  const { login, loginWithGoogle, loading } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isGoogleLoading, setIsGoogleLoading] = useState(false);\r\n\r\n  const from = location.state?.from?.pathname || ROUTES.HOME;\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors, isSubmitting },\r\n  } = useForm({\r\n    resolver: zodResolver(loginSchema),\r\n  });\r\n\r\n  // Connexion avec email/mot de passe\r\n  const onSubmit = async (data: any) => {\r\n    try {\r\n      await login(data);\r\n      toast.success(SUCCESS_MESSAGES.LOGIN_SUCCESS);\r\n      navigate(from, { replace: true });\r\n    } catch (error: any) {\r\n      toast.error(error.message || ERROR_MESSAGES.AUTH_ERROR);\r\n    }\r\n  };\r\n\r\n  // Connexion avec Google\r\n  const handleGoogleLogin = async () => {\r\n    setIsGoogleLoading(true);\r\n    try {\r\n      await loginWithGoogle();\r\n      toast.success(SUCCESS_MESSAGES.LOGIN_SUCCESS);\r\n      navigate(from, { replace: true });\r\n    } catch (error: any) {\r\n      toast.error(error.message || ERROR_MESSAGES.AUTH_ERROR);\r\n    } finally {\r\n      setIsGoogleLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Chargement...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        {/* Header */}\r\n        <div className=\"text-center\">\r\n          <Link\r\n            to={ROUTES.HOME}\r\n            className=\"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4\"\r\n          >\r\n            <ArrowLeft className=\"w-4 h-4 mr-1\" />\r\n            Retour à l'accueil\r\n          </Link>\r\n          \r\n          <h2 className=\"text-3xl font-bold text-gray-900\">Connexion</h2>\r\n          <p className=\"mt-2 text-sm text-gray-600\">\r\n            Connectez-vous pour accéder à votre compte\r\n          </p>\r\n        </div>\r\n\r\n        {/* Formulaire */}\r\n        <div className=\"card\">\r\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n            {/* Email */}\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"form-label\">\r\n                <Mail className=\"w-4 h-4 inline mr-2\" />\r\n                Adresse email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                {...register('email')}\r\n                className=\"input-field\"\r\n                placeholder=\"votre@email.com\"\r\n                autoComplete=\"email\"\r\n              />\r\n              {errors.email && (\r\n                <p className=\"form-error\">{errors.email.message?.toString()}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Mot de passe */}\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"form-label\">\r\n                <Lock className=\"w-4 h-4 inline mr-2\" />\r\n                Mot de passe\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  id=\"password\"\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  {...register('password')}\r\n                  className=\"input-field pr-10\"\r\n                  placeholder=\"Votre mot de passe\"\r\n                  autoComplete=\"current-password\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  {showPassword ? (\r\n                    <EyeOff className=\"w-5 h-5\" />\r\n                  ) : (\r\n                    <Eye className=\"w-5 h-5\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n              {errors.password && (\r\n                <p className=\"form-error\">{errors.password.message?.toString()}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Bouton de connexion */}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              className=\"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {isSubmitting ? (\r\n                <div className=\"flex items-center justify-center\">\r\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                  Connexion en cours...\r\n                </div>\r\n              ) : (\r\n                'Se connecter'\r\n              )}\r\n            </button>\r\n          </form>\r\n\r\n          {/* Séparateur */}\r\n          <div className=\"mt-6\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 flex items-center\">\r\n                <div className=\"w-full border-t border-gray-300\" />\r\n              </div>\r\n              <div className=\"relative flex justify-center text-sm\">\r\n                <span className=\"px-2 bg-white text-gray-500\">Ou continuer avec</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Connexion Google */}\r\n          <button\r\n            onClick={handleGoogleLogin}\r\n            disabled={isGoogleLoading}\r\n            className=\"mt-6 w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {isGoogleLoading ? (\r\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2\"></div>\r\n            ) : (\r\n              <svg className=\"w-5 h-5 mr-2\" viewBox=\"0 0 24 24\">\r\n                <path\r\n                  fill=\"#4285F4\"\r\n                  d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\r\n                />\r\n                <path\r\n                  fill=\"#34A853\"\r\n                  d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\r\n                />\r\n                <path\r\n                  fill=\"#FBBC05\"\r\n                  d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\r\n                />\r\n                <path\r\n                  fill=\"#EA4335\"\r\n                  d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\r\n                />\r\n              </svg>\r\n            )}\r\n            Continuer avec Google\r\n          </button>\r\n\r\n          {/* Liens utiles */}\r\n          <div className=\"mt-6 text-center space-y-2\">\r\n            <Link\r\n              to={ROUTES.REGISTER}\r\n              className=\"text-sm text-primary-600 hover:text-primary-500\"\r\n            >\r\n              Pas encore de compte ? S'inscrire\r\n            </Link>\r\n            <div>\r\n              <button\r\n                onClick={() => {\r\n                  const email = (document.getElementById('email') as HTMLInputElement)?.value;\r\n                  if (email) {\r\n                    // Ici vous pourriez implémenter la réinitialisation du mot de passe\r\n                    toast.success('Un email de réinitialisation a été envoyé');\r\n                  } else {\r\n                    toast.error('Veuillez saisir votre email d\\'abord');\r\n                  }\r\n                }}\r\n                className=\"text-sm text-gray-600 hover:text-gray-500\"\r\n              >\r\n                Mot de passe oublié ?\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}; "],"version":3}