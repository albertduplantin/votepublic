744bee77f0f45c09ae0758707a550962
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.RegisterPage = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const react_router_dom_1 = require("react-router-dom");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const zod_2 = require("zod");
const react_hot_toast_1 = __importDefault(require("react-hot-toast"));
const lucide_react_1 = require("lucide-react");
const AuthContext_1 = require("../contexts/AuthContext");
const constants_1 = require("../utils/constants");
// Schéma de validation pour l'inscription
const registerSchema = zod_2.z.object({
    email: zod_2.z.string().email('Adresse email invalide'),
    password: zod_2.z.string().min(6, 'Le mot de passe doit contenir au moins 6 caractères'),
    confirmPassword: zod_2.z.string(),
}).refine((data) => data.password === data.confirmPassword, {
    message: "Les mots de passe ne correspondent pas",
    path: ["confirmPassword"],
});
const RegisterPage = () => {
    const { register: registerUser, loading } = (0, AuthContext_1.useAuth)();
    const navigate = (0, react_router_dom_1.useNavigate)();
    const [showPassword, setShowPassword] = (0, react_1.useState)(false);
    const [showConfirmPassword, setShowConfirmPassword] = (0, react_1.useState)(false);
    const { register, handleSubmit, formState: { errors, isSubmitting }, } = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(registerSchema),
    });
    const onSubmit = async (data) => {
        try {
            await registerUser({
                email: data.email,
                password: data.password,
                confirmPassword: data.confirmPassword,
            });
            react_hot_toast_1.default.success(constants_1.SUCCESS_MESSAGES.LOGIN_SUCCESS);
            navigate(constants_1.ROUTES.HOME);
        }
        catch (error) {
            react_hot_toast_1.default.error(error.message || constants_1.ERROR_MESSAGES.AUTH_ERROR);
        }
    };
    if (loading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "min-h-screen flex items-center justify-center bg-gray-50", children: (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto" }), (0, jsx_runtime_1.jsx)("p", { className: "mt-4 text-gray-600", children: "Chargement..." })] }) }));
    }
    return ((0, jsx_runtime_1.jsx)("div", { className: "min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8", children: (0, jsx_runtime_1.jsxs)("div", { className: "max-w-md w-full space-y-8", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsxs)(react_router_dom_1.Link, { to: constants_1.ROUTES.HOME, className: "inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: "w-4 h-4 mr-1" }), "Retour \u00E0 l'accueil"] }), (0, jsx_runtime_1.jsx)("h2", { className: "text-3xl font-bold text-gray-900", children: "Cr\u00E9er un compte" }), (0, jsx_runtime_1.jsx)("p", { className: "mt-2 text-sm text-gray-600", children: "Rejoignez le festival et participez aux votes" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "card", children: [(0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit(onSubmit), className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("label", { htmlFor: "email", className: "form-label", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Mail, { className: "w-4 h-4 inline mr-2" }), "Adresse email"] }), (0, jsx_runtime_1.jsx)("input", { id: "email", type: "email", ...register('email'), className: "input-field", placeholder: "votre@email.com", autoComplete: "email" }), errors.email && ((0, jsx_runtime_1.jsx)("p", { className: "form-error", children: errors.email.message?.toString() }))] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("label", { htmlFor: "password", className: "form-label", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Lock, { className: "w-4 h-4 inline mr-2" }), "Mot de passe"] }), (0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)("input", { id: "password", type: showPassword ? 'text' : 'password', ...register('password'), className: "input-field pr-10", placeholder: "Votre mot de passe", autoComplete: "new-password" }), (0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => setShowPassword(!showPassword), className: "absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600", children: showPassword ? ((0, jsx_runtime_1.jsx)(lucide_react_1.EyeOff, { className: "w-5 h-5" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: "w-5 h-5" })) })] }), errors.password && ((0, jsx_runtime_1.jsx)("p", { className: "form-error", children: errors.password.message?.toString() }))] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("label", { htmlFor: "confirmPassword", className: "form-label", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Lock, { className: "w-4 h-4 inline mr-2" }), "Confirmer le mot de passe"] }), (0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)("input", { id: "confirmPassword", type: showConfirmPassword ? 'text' : 'password', ...register('confirmPassword'), className: "input-field pr-10", placeholder: "Confirmez votre mot de passe", autoComplete: "new-password" }), (0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => setShowConfirmPassword(!showConfirmPassword), className: "absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600", children: showConfirmPassword ? ((0, jsx_runtime_1.jsx)(lucide_react_1.EyeOff, { className: "w-5 h-5" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: "w-5 h-5" })) })] }), errors.confirmPassword && ((0, jsx_runtime_1.jsx)("p", { className: "form-error", children: errors.confirmPassword.message?.toString() }))] }), (0, jsx_runtime_1.jsx)("button", { type: "submit", disabled: isSubmitting, className: "btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed", children: isSubmitting ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2" }), "Cr\u00E9ation en cours..."] })) : ('Créer mon compte') })] }), (0, jsx_runtime_1.jsx)("div", { className: "mt-6 text-center", children: (0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: constants_1.ROUTES.LOGIN, className: "text-sm text-primary-600 hover:text-primary-500", children: "D\u00E9j\u00E0 un compte ? Se connecter" }) })] })] }) }));
};
exports.RegisterPage = RegisterPage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXERvY3VtZW50c1xcYWlwcm9qZXRzXFx2b3RlcHVibGljXFxzcmNcXHBhZ2VzXFxSZWdpc3RlclBhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwrQ0FBd0M7QUFDeEMsdURBQXFEO0FBQ3JELHFEQUEwQztBQUMxQyxpREFBc0Q7QUFDdEQsNkJBQXdCO0FBQ3hCLHNFQUFvQztBQUNwQywrQ0FBa0U7QUFDbEUseURBQWtEO0FBQ2xELGtEQUE4RTtBQUU5RSwwQ0FBMEM7QUFDMUMsTUFBTSxjQUFjLEdBQUcsT0FBQyxDQUFDLE1BQU0sQ0FBQztJQUM5QixLQUFLLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQztJQUNqRCxRQUFRLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUscURBQXFELENBQUM7SUFDbEYsZUFBZSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUU7Q0FDNUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsS0FBSyxJQUFJLENBQUMsZUFBZSxFQUFFO0lBQzFELE9BQU8sRUFBRSx3Q0FBd0M7SUFDakQsSUFBSSxFQUFFLENBQUMsaUJBQWlCLENBQUM7Q0FDMUIsQ0FBQyxDQUFDO0FBRUksTUFBTSxZQUFZLEdBQWEsR0FBRyxFQUFFO0lBQ3pDLE1BQU0sRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLE9BQU8sRUFBRSxHQUFHLElBQUEscUJBQU8sR0FBRSxDQUFDO0lBQ3RELE1BQU0sUUFBUSxHQUFHLElBQUEsOEJBQVcsR0FBRSxDQUFDO0lBQy9CLE1BQU0sQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3hELE1BQU0sQ0FBQyxtQkFBbUIsRUFBRSxzQkFBc0IsQ0FBQyxHQUFHLElBQUEs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UyxFQUFDLFNBQVMsR0FBRyxDQUMvQixDQUFDLENBQUMsQ0FBQyxDQUNGLHVCQUFDLGtCQUFHLElBQUMsU0FBUyxFQUFDLFNBQVMsR0FBRyxDQUM1QixHQUNNLElBQ0wsRUFDTCxNQUFNLENBQUMsZUFBZSxJQUFJLENBQ3pCLDhCQUFHLFNBQVMsRUFBQyxZQUFZLFlBQUUsTUFBTSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLEdBQUssQ0FDM0UsSUFDRyxFQUdOLG1DQUNFLElBQUksRUFBQyxRQUFRLEVBQ2IsUUFBUSxFQUFFLFlBQVksRUFDdEIsU0FBUyxFQUFDLG9FQUFvRSxZQUU3RSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQ2QsaUNBQUssU0FBUyxFQUFDLGtDQUFrQyxhQUMvQyxnQ0FBSyxTQUFTLEVBQUMsZ0VBQWdFLEdBQU8saUNBRWxGLENBQ1AsQ0FBQyxDQUFDLENBQUMsQ0FDRixrQkFBa0IsQ0FDbkIsR0FDTSxJQUNKLEVBR1AsZ0NBQUssU0FBUyxFQUFDLGtCQUFrQixZQUMvQix1QkFBQyx1QkFBSSxJQUNILEVBQUUsRUFBRSxrQkFBTSxDQUFDLEtBQUssRUFDaEIsU0FBUyxFQUFDLGlEQUFpRCx3REFHdEQsR0FDSCxJQUNGLElBQ0YsR0FDRixDQUNQLENBQUM7QUFDSixDQUFDLENBQUM7QUE5S1csUUFBQSxZQUFZLGdCQThLdkIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXERvY3VtZW50c1xcYWlwcm9qZXRzXFx2b3RlcHVibGljXFxzcmNcXHBhZ2VzXFxSZWdpc3RlclBhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTGluaywgdXNlTmF2aWdhdGUgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgdXNlRm9ybSB9IGZyb20gJ3JlYWN0LWhvb2stZm9ybSc7XHJcbmltcG9ydCB7IHpvZFJlc29sdmVyIH0gZnJvbSAnQGhvb2tmb3JtL3Jlc29sdmVycy96b2QnO1xyXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcclxuaW1wb3J0IHRvYXN0IGZyb20gJ3JlYWN0LWhvdC10b2FzdCc7XHJcbmltcG9ydCB7IE1haWwsIExvY2ssIEV5ZSwgRXllT2ZmLCBBcnJvd0xlZnQgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnLi4vY29udGV4dHMvQXV0aENvbnRleHQnO1xyXG5pbXBvcnQgeyBST1VURVMsIEVSUk9SX01FU1NBR0VTLCBTVUNDRVNTX01FU1NBR0VTIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcclxuXHJcbi8vIFNjaMOpbWEgZGUgdmFsaWRhdGlvbiBwb3VyIGwnaW5zY3JpcHRpb25cclxuY29uc3QgcmVnaXN0ZXJTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoJ0FkcmVzc2UgZW1haWwgaW52YWxpZGUnKSxcclxuICBwYXNzd29yZDogei5zdHJpbmcoKS5taW4oNiwgJ0xlIG1vdCBkZSBwYXNzZSBkb2l0IGNvbnRlbmlyIGF1IG1vaW5zIDYgY2FyYWN0w6hyZXMnKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHouc3RyaW5nKCksXHJcbn0pLnJlZmluZSgoZGF0YSkgPT4gZGF0YS5wYXNzd29yZCA9PT0gZGF0YS5jb25maXJtUGFzc3dvcmQsIHtcclxuICBtZXNzYWdlOiBcIkxlcyBtb3RzIGRlIHBhc3NlIG5lIGNvcnJlc3BvbmRlbnQgcGFzXCIsXHJcbiAgcGF0aDogW1wiY29uZmlybVBhc3N3b3JkXCJdLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBSZWdpc3RlclBhZ2U6IFJlYWN0LkZDID0gKCkgPT4ge1xyXG4gIGNvbnN0IHsgcmVnaXN0ZXI6IHJlZ2lzdGVyVXNlciwgbG9hZGluZyB9ID0gdXNlQXV0aCgpO1xyXG4gIGNvbnN0IG5hdmlnYXRlID0gdXNlTmF2aWdhdGUoKTtcclxuICBjb25zdCBbc2hvd1Bhc3N3b3JkLCBzZXRTaG93UGFzc3dvcmRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtzaG93Q29uZmlybVBhc3N3b3JkLCBzZXRTaG93Q29uZmlybVBhc3N3b3JkXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgY29uc3Qge1xyXG4gICAgcmVnaXN0ZXIsXHJcbiAgICBoYW5kbGVTdWJtaXQsXHJcbiAgICBmb3JtU3RhdGU6IHsgZXJyb3JzLCBpc1N1Ym1pdHRpbmcgfSxcclxuICB9ID0gdXNlRm9ybSh7XHJcbiAgICByZXNvbHZlcjogem9kUmVzb2x2ZXIocmVnaXN0ZXJTY2hlbWEpLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBvblN1Ym1pdCA9IGFzeW5jIChkYXRhOiBhbnkpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHJlZ2lzdGVyVXNlcih7XHJcbiAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQ6IGRhdGEucGFzc3dvcmQsXHJcbiAgICAgICAgY29uZmlybVBhc3N3b3JkOiBkYXRhLmNvbmZpcm1QYXNzd29yZCxcclxuICAgICAgfSk7XHJcbiAgICAgIHRvYXN0LnN1Y2Nlc3MoU1VDQ0VTU19NRVNTQUdFUy5MT0dJTl9TVUNDRVNTKTtcclxuICAgICAgbmF2aWdhdGUoUk9VVEVTLkhPTUUpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICB0b2FzdC5lcnJvcihlcnJvci5tZXNzYWdlIHx8IEVSUk9SX01FU1NBR0VTLkFVVEhfRVJST1IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGlmIChsb2FkaW5nKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTUwXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItYi0yIGJvcmRlci1wcmltYXJ5LTYwMCBteC1hdXRvXCI+PC9kaXY+XHJcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC00IHRleHQtZ3JheS02MDBcIj5DaGFyZ2VtZW50Li4uPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS01MCBweS0xMiBweC00IHNtOnB4LTYgbGc6cHgtOFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC13LW1kIHctZnVsbCBzcGFjZS15LThcIj5cclxuICAgICAgICB7LyogSGVhZGVyICovfVxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgIHRvPXtST1VURVMuSE9NRX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHRleHQtc20gdGV4dC1ncmF5LTYwMCBob3Zlcjp0ZXh0LWdyYXktOTAwIG1iLTRcIlxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8QXJyb3dMZWZ0IGNsYXNzTmFtZT1cInctNCBoLTQgbXItMVwiIC8+XHJcbiAgICAgICAgICAgIFJldG91ciDDoCBsJ2FjY3VlaWxcclxuICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwXCI+Q3LDqWVyIHVuIGNvbXB0ZTwvaDI+XHJcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0yIHRleHQtc20gdGV4dC1ncmF5LTYwMFwiPlxyXG4gICAgICAgICAgICBSZWpvaWduZXogbGUgZmVzdGl2YWwgZXQgcGFydGljaXBleiBhdXggdm90ZXNcclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgey8qIEZvcm11bGFpcmUgKi99XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkXCI+XHJcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0KG9uU3VibWl0KX0gY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XHJcbiAgICAgICAgICAgIHsvKiBFbWFpbCAqL31cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImVtYWlsXCIgY2xhc3NOYW1lPVwiZm9ybS1sYWJlbFwiPlxyXG4gICAgICAgICAgICAgICAgPE1haWwgY2xhc3NOYW1lPVwidy00IGgtNCBpbmxpbmUgbXItMlwiIC8+XHJcbiAgICAgICAgICAgICAgICBBZHJlc3NlIGVtYWlsXHJcbiAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgIGlkPVwiZW1haWxcIlxyXG4gICAgICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcclxuICAgICAgICAgICAgICAgIHsuLi5yZWdpc3RlcignZW1haWwnKX1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlucHV0LWZpZWxkXCJcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwidm90cmVAZW1haWwuY29tXCJcclxuICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cImVtYWlsXCJcclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIHtlcnJvcnMuZW1haWwgJiYgKFxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9ybS1lcnJvclwiPntlcnJvcnMuZW1haWwubWVzc2FnZT8udG9TdHJpbmcoKX08L3A+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogTW90IGRlIHBhc3NlICovfVxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwicGFzc3dvcmRcIiBjbGFzc05hbWU9XCJmb3JtLWxhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICA8TG9jayBjbGFzc05hbWU9XCJ3LTQgaC00IGlubGluZSBtci0yXCIgLz5cclxuICAgICAgICAgICAgICAgIE1vdCBkZSBwYXNzZVxyXG4gICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgIGlkPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICB0eXBlPXtzaG93UGFzc3dvcmQgPyAndGV4dCcgOiAncGFzc3dvcmQnfVxyXG4gICAgICAgICAgICAgICAgICB7Li4ucmVnaXN0ZXIoJ3Bhc3N3b3JkJyl9XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlucHV0LWZpZWxkIHByLTEwXCJcclxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJWb3RyZSBtb3QgZGUgcGFzc2VcIlxyXG4gICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9XCJuZXctcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dQYXNzd29yZCghc2hvd1Bhc3N3b3JkKX1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQteS0wIHJpZ2h0LTAgcHItMyBmbGV4IGl0ZW1zLWNlbnRlciB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDBcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICB7c2hvd1Bhc3N3b3JkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxFeWVPZmYgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEV5ZSBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIHtlcnJvcnMucGFzc3dvcmQgJiYgKFxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9ybS1lcnJvclwiPntlcnJvcnMucGFzc3dvcmQubWVzc2FnZT8udG9TdHJpbmcoKX08L3A+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogQ29uZmlybWF0aW9uIGR1IG1vdCBkZSBwYXNzZSAqL31cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImNvbmZpcm1QYXNzd29yZFwiIGNsYXNzTmFtZT1cImZvcm0tbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgIDxMb2NrIGNsYXNzTmFtZT1cInctNCBoLTQgaW5saW5lIG1yLTJcIiAvPlxyXG4gICAgICAgICAgICAgICAgQ29uZmlybWVyIGxlIG1vdCBkZSBwYXNzZVxyXG4gICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgIGlkPVwiY29uZmlybVBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgdHlwZT17c2hvd0NvbmZpcm1QYXNzd29yZCA/ICd0ZXh0JyA6ICdwYXNzd29yZCd9XHJcbiAgICAgICAgICAgICAgICAgIHsuLi5yZWdpc3RlcignY29uZmlybVBhc3N3b3JkJyl9XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlucHV0LWZpZWxkIHByLTEwXCJcclxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDb25maXJtZXogdm90cmUgbW90IGRlIHBhc3NlXCJcclxuICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwibmV3LXBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93Q29uZmlybVBhc3N3b3JkKCFzaG93Q29uZmlybVBhc3N3b3JkKX1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQteS0wIHJpZ2h0LTAgcHItMyBmbGV4IGl0ZW1zLWNlbnRlciB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDBcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICB7c2hvd0NvbmZpcm1QYXNzd29yZCA/IChcclxuICAgICAgICAgICAgICAgICAgICA8RXllT2ZmIGNsYXNzTmFtZT1cInctNSBoLTVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIDxFeWUgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICB7ZXJyb3JzLmNvbmZpcm1QYXNzd29yZCAmJiAoXHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb3JtLWVycm9yXCI+e2Vycm9ycy5jb25maXJtUGFzc3dvcmQubWVzc2FnZT8udG9TdHJpbmcoKX08L3A+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogQm91dG9uIGQnaW5zY3JpcHRpb24gKi99XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcclxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNTdWJtaXR0aW5nfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0bi1wcmltYXJ5IHctZnVsbCBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICB7aXNTdWJtaXR0aW5nID8gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC00IHctNCBib3JkZXItYi0yIGJvcmRlci13aGl0ZSBtci0yXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIENyw6lhdGlvbiBlbiBjb3Vycy4uLlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICdDcsOpZXIgbW9uIGNvbXB0ZSdcclxuICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZm9ybT5cclxuXHJcbiAgICAgICAgICB7LyogTGllbiB2ZXJzIGxhIGNvbm5leGlvbiAqL31cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNiB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICA8TGlua1xyXG4gICAgICAgICAgICAgIHRvPXtST1VURVMuTE9HSU59XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXByaW1hcnktNjAwIGhvdmVyOnRleHQtcHJpbWFyeS01MDBcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgRMOpasOgIHVuIGNvbXB0ZSA/IFNlIGNvbm5lY3RlclxyXG4gICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59OyAiXSwidmVyc2lvbiI6M30=