"use strict";(self.webpackChunkprix_du_public=self.webpackChunkprix_du_public||[]).push([[422],{1146:(e,t,s)=>{s.d(t,{Vm:()=>l,xJ:()=>o});var r=s(4455),a=s(5472);s(8147),s(6925);const n="films",l=async()=>{try{const e=(0,a.P)((0,a.rJ)(r.db,n),(0,a.My)("titre","asc")),t=await(0,a.GG)(e),s=[];return t.forEach(e=>{const t=e.data();s.push({id:e.id,titre:t.titre,realisateur:t.realisateur,pays:t.pays,duree:t.duree,annee:t.annee,synopsis:t.synopsis,posterUrl:t.posterUrl,genre:t.genre,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate()})}),s}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des films:",e),e}},i=async e=>{try{const t=(0,a.H9)(r.db,n,e),s=await(0,a.x7)(t);if(s.exists()){const e=s.data();return{id:s.id,titre:e.titre,realisateur:e.realisateur,pays:e.pays,duree:e.duree,annee:e.annee,synopsis:e.synopsis,posterUrl:e.posterUrl,genre:e.genre,createdAt:e.createdAt.toDate(),updatedAt:e.updatedAt.toDate()}}return null}catch(t){throw console.error("Erreur lors de la r\xe9cup\xe9ration du film:",t),t}},o=async e=>{try{if(0===e.length)return[];const t=e.map(e=>i(e));return(await Promise.all(t)).filter(e=>null!==e)}catch(t){throw console.error("Erreur lors de la r\xe9cup\xe9ration des films par IDs:",t),t}}},1422:(e,t,s)=>{s.r(t),s.d(t,{ResultsPage:()=>p});var r=s(5043),a=s(8112),n=s(712),l=s(2938);const i=(0,s(3797).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var o=s(3395),c=s(6852),d=s(8775),m=s(7929),x=s(5168),u=s(1146),h=s(579);const p=()=>{var e,t;const[s,p]=(0,r.useState)([]),[y,g]=(0,r.useState)("all"),[f,v]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[w,b]=(0,r.useState)(!0),[k,A]=(0,r.useState)(null),[E,I]=(0,r.useState)("rating");(0,r.useEffect)(()=>{S()},[]);const S=async()=>{try{b(!0),A(null);const e=await(0,m.q5)();p(e);const t=[],s=new Map;for(const o of e)try{const e=await(0,x.MS)(o.id),r=e.films.map(e=>e.filmId),a=await(0,u.xJ)(r),n=new Map(a.map(e=>[e.id,e])),l=e.films.map(e=>{const t=n.get(e.filmId),r={titre:(null===t||void 0===t?void 0:t.titre)||`Film ${e.filmId.slice(0,8)}`,realisateur:(null===t||void 0===t?void 0:t.realisateur)||"R\xe9alisateur inconnu",posterUrl:(null===t||void 0===t?void 0:t.posterUrl)||"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=300&h=450&fit=crop"};s.has(e.filmId)||s.set(e.filmId,{votes:0,totalRating:0,count:0});const a=s.get(e.filmId);return a.votes+=e.totalVotes,a.totalRating+=e.moyenneNote*e.totalVotes,a.count+=1,{...e,...r,position:0}}).sort((e,t)=>t.moyenneNote-e.moyenneNote);l.forEach((e,t)=>{e.position=t+1}),t.push({seance:o,films:l,totalVotes:e.totalVotes,participationRate:Math.round(e.totalVotes/50*100)})}catch(k){console.error(`Erreur pour la s\xe9ance ${o.id}:`,k)}v(t);const r=Array.from(s.keys()),a=await(0,u.xJ)(r),n=new Map(a.map(e=>[e.id,e])),l=Array.from(s.entries()).map(e=>{let[t,s]=e;const r=n.get(t);return{filmId:t,titre:(null===r||void 0===r?void 0:r.titre)||`Film ${t.slice(0,8)}`,realisateur:(null===r||void 0===r?void 0:r.realisateur)||"R\xe9alisateur inconnu",posterUrl:(null===r||void 0===r?void 0:r.posterUrl)||"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=300&h=450&fit=crop",totalVotes:s.votes,moyenneNote:s.votes>0?Math.round(s.totalRating/s.votes*10)/10:0,distributionNotes:{1:0,2:0,3:0,4:0,5:0},position:0}}),i=M(l,E);i.forEach((e,t)=>{e.position=t+1}),N(i)}catch(k){console.error("Erreur lors du chargement des r\xe9sultats:",k),A("Erreur lors du chargement des r\xe9sultats")}finally{b(!1)}},M=(e,t)=>[...e].sort((e,s)=>{switch(t){case"votes":return s.totalVotes-e.totalVotes;case"rating":return s.moyenneNote-e.moyenneNote;case"name":return e.titre.localeCompare(s.titre);default:return 0}}),V=e=>new Intl.DateTimeFormat("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).format(e);if(w)return(0,h.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Chargement des r\xe9sultats..."})]})});if(k)return(0,h.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,h.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Erreur"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:k}),(0,h.jsx)("button",{onClick:S,className:"btn-festival bg-primary-600 hover:bg-primary-700",children:"R\xe9essayer"})]})});const D="all"===y?j:(null===(e=f.find(e=>e.seance.id===y))||void 0===e?void 0:e.films)||[],U="all"===y?null:f.find(e=>e.seance.id===y);return(0,h.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,h.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,h.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,h.jsx)("div",{className:"py-6",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:"\ud83d\udcca R\xe9sultats du Festival"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"D\xe9couvrez les films les plus appr\xe9ci\xe9s du festival"})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,h.jsx)(a.A,{className:"w-4 h-4"}),(0,h.jsxs)("span",{children:[s.length," s\xe9ances"]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,h.jsx)(n.A,{className:"w-4 h-4"}),(0,h.jsxs)("span",{children:[j.length," films"]})]})]})]})})})}),(0,h.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,h.jsxs)("div",{className:"mb-8",children:[(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"S\xe9ance :"}),(0,h.jsxs)("select",{value:y,onChange:e=>g(e.target.value),className:"input-field min-w-[200px]",children:[(0,h.jsx)("option",{value:"all",children:"Toutes les s\xe9ances"}),s.map(e=>(0,h.jsxs)("option",{value:e.id,children:[e.nom," - ",V(e.date)," ",e.heure]},e.id))]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Trier par :"}),(0,h.jsxs)("select",{value:E,onChange:e=>I(e.target.value),className:"input-field",children:[(0,h.jsx)("option",{value:"rating",children:"Note moyenne"}),(0,h.jsx)("option",{value:"votes",children:"Nombre de votes"}),(0,h.jsx)("option",{value:"name",children:"Nom du film"})]})]})]}),U&&(0,h.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,h.jsxs)("div",{className:"card text-center",children:[(0,h.jsx)(l.A,{className:"w-8 h-8 text-primary-600 mx-auto mb-2"}),(0,h.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:V(U.seance.date)}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:U.seance.heure})]}),(0,h.jsxs)("div",{className:"card text-center",children:[(0,h.jsx)(a.A,{className:"w-8 h-8 text-primary-600 mx-auto mb-2"}),(0,h.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:U.totalVotes}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Votes totaux"})]}),(0,h.jsxs)("div",{className:"card text-center",children:[(0,h.jsx)(i,{className:"w-8 h-8 text-primary-600 mx-auto mb-2"}),(0,h.jsxs)("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:[U.participationRate,"%"]}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Taux de participation"})]}),(0,h.jsxs)("div",{className:"card text-center",children:[(0,h.jsx)(o.A,{className:"w-8 h-8 text-primary-600 mx-auto mb-2"}),(0,h.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:(null===(t=U.films[0])||void 0===t?void 0:t.titre)||"N/A"}),(0,h.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Film gagnant"})]})]})]}),(0,h.jsx)("div",{className:"space-y-6",children:0===D.length?(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcca"}),(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Aucun r\xe9sultat disponible"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Les r\xe9sultats appara\xeetront ici une fois que les votes auront \xe9t\xe9 comptabilis\xe9s."})]}):D.map((e,t)=>{return(0,h.jsx)("div",{className:"card hover:shadow-lg transition-shadow",children:(0,h.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,h.jsx)("div",{className:"flex-shrink-0 w-16 text-center",children:(r=e.position,1===r?(0,h.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"\ud83e\udd47 1er"}):2===r?(0,h.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"\ud83e\udd48 2\xe8me"}):3===r?(0,h.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"\ud83e\udd49 3\xe8me"}):(0,h.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:["#",r]}))}),(0,h.jsx)("div",{className:"flex-shrink-0",children:(0,h.jsx)("img",{src:e.posterUrl,alt:e.titre,className:"w-20 h-28 object-cover rounded-lg shadow-md",onError:e=>{e.target.src="https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=300&h=450&fit=crop"}})}),(0,h.jsx)("div",{className:"flex-1 min-w-0",children:(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:e.titre}),(0,h.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["R\xe9alis\xe9 par ",e.realisateur]}),(0,h.jsxs)("div",{className:"flex items-center space-x-6 text-sm",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,h.jsx)(n.A,{className:"w-4 h-4 text-yellow-500"}),(0,h.jsx)("span",{className:"font-semibold "+(s=e.moyenneNote,s>=4.5?"text-green-600":s>=4?"text-blue-600":s>=3.5?"text-yellow-600":s>=3?"text-orange-600":"text-red-600"),children:e.moyenneNote.toFixed(1)}),(0,h.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"/5"})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,h.jsx)(a.A,{className:"w-4 h-4 text-blue-500"}),(0,h.jsx)("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.totalVotes}),(0,h.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"votes"})]})]})]}),(0,h.jsx)("div",{className:"flex-shrink-0 ml-4",children:(0,h.jsx)("div",{className:"flex items-end space-x-1 h-16",children:[1,2,3,4,5].map(t=>{const s=e.distributionNotes[t]||0,r=Math.max(...Object.values(e.distributionNotes)),a=r>0?s/r*100:0;return(0,h.jsxs)("div",{className:"flex flex-col items-center",children:[(0,h.jsx)("div",{className:"w-3 bg-primary-200 dark:bg-primary-700 rounded-t",style:{height:`${a}%`}}),(0,h.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t})]},t)})})})]})})]})},e.filmId);var s,r})}),"all"===y&&j.length>0&&(0,h.jsxs)("div",{className:"mt-12",children:[(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"\ud83d\udcc8 R\xe9sum\xe9 Global du Festival"}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,h.jsxs)("div",{className:"card text-center",children:[(0,h.jsx)(c.A,{className:"w-12 h-12 text-primary-600 mx-auto mb-4"}),(0,h.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:j.reduce((e,t)=>e+t.totalVotes,0)}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Votes totaux"})]}),(0,h.jsxs)("div",{className:"card text-center",children:[(0,h.jsx)(n.A,{className:"w-12 h-12 text-primary-600 mx-auto mb-4"}),(0,h.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:(j.reduce((e,t)=>e+t.moyenneNote,0)/j.length).toFixed(1)}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Note moyenne globale"})]}),(0,h.jsxs)("div",{className:"card text-center",children:[(0,h.jsx)(d.A,{className:"w-12 h-12 text-primary-600 mx-auto mb-4"}),(0,h.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:j.length}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Films \xe9valu\xe9s"})]})]})]})]})]})}},5168:(e,t,s)=>{s.d(t,{MS:()=>p,_M:()=>d,yc:()=>m,yq:()=>h});var r=s(5472),a=s(4455),n=s(4413),l=s(6925);let i=[],o=null,c=!1;const d=async e=>{try{var t;const s={id:(0,l.$C)(),filmId:e.filmId,seanceId:e.seanceId||"",note:e.note,commentaire:null===(t=e.commentaire)||void 0===t?void 0:t.trim(),ipAddress:await(0,l.SP)()||void 0,userAgent:(0,l.$t)(),sessionId:(0,l.f6)(),createdAt:new Date},i=(0,r.H9)((0,r.rJ)(a.db,n.I.VOTES));await(0,r.BN)(i,{...s,id:i.id})}catch(s){throw new Error("Erreur lors de l'ajout du vote")}},m=async(e,t,s,r)=>{try{var a;const n={id:(0,l.$C)(),filmId:e,seanceId:"",note:t.note,commentaire:null===(a=t.commentaire)||void 0===a?void 0:a.trim(),ipAddress:await(0,l.SP)()||void 0,userAgent:(0,l.$t)(),sessionId:r||(0,l.f6)(),createdAt:new Date};i.push(n),o||(o=window.setTimeout(()=>{x()},5e3));if(await u(e,null===s||void 0===s?void 0:s.uid,r))throw new Error("Vous avez d\xe9j\xe0 vot\xe9 pour ce film")}catch(n){throw new Error(n.message||"Erreur lors de l'ajout du vote")}},x=async()=>{if(c||0===i.length)return;c=!0;const e=[...i];i=[],o=null;try{const t=(0,r.wP)(a.db);e.forEach(e=>{const s=(0,r.H9)((0,r.rJ)(a.db,n.I.VOTES));t.set(s,{...e,id:s.id})}),await t.commit(),console.log(`${e.length} votes envoy\xe9s avec succ\xe8s`)}catch(t){console.error("Erreur lors de l'envoi du batch:",t),i.unshift(...e),setTimeout(()=>{c=!1,i.length>0&&x()},1e4)}finally{c=!1}},u=async(e,t,s)=>{try{let l;if(t)l=(0,r.P)((0,r.rJ)(a.db,n.I.VOTES),(0,r._M)("filmId","==",e),(0,r._M)("userId","==",t));else{if(!s)return!1;l=(0,r.P)((0,r.rJ)(a.db,n.I.VOTES),(0,r._M)("filmId","==",e),(0,r._M)("sessionId","==",s))}return!(await(0,r.GG)(l)).empty}catch(l){return console.error("Erreur lors de la v\xe9rification du vote:",l),!1}},h=()=>({pendingVotes:i.length,isProcessing:c,nextBatchIn:o?5e3:0}),p=async e=>{try{const t=(0,r.P)((0,r.rJ)(a.db,n.I.VOTES),(0,r._M)("seanceId","==",e),(0,r.My)("createdAt","desc")),s=await(0,r.GG)(t),l=[];s.forEach(e=>{var t;const s=e.data();l.push({...s,id:e.id,createdAt:(null===(t=s.createdAt)||void 0===t?void 0:t.toDate())||new Date})});const i={};l.forEach(e=>{i[e.filmId]||(i[e.filmId]=[]),i[e.filmId].push(e)});const o=Object.entries(i).map(e=>{let[t,s]=e;const r=s.map(e=>e.note),a={1:0,2:0,3:0,4:0,5:0};r.forEach(e=>{e>=1&&e<=5&&a[e]++});const n=r.length>0?Math.round(r.reduce((e,t)=>e+t,0)/r.length*10)/10:0;return{filmId:t,titre:"",totalVotes:s.length,moyenneNote:n,distributionNotes:a}});return{seanceId:e,totalVotes:l.length,films:o}}catch(t){throw new Error("Erreur lors de la r\xe9cup\xe9ration des r\xe9sultats de la s\xe9ance")}}},6852:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},6925:(e,t,s)=>{s.d(t,{$C:()=>r,$t:()=>n,Lg:()=>o,SP:()=>l,ZB:()=>i,cn:()=>c,f6:()=>a});s(4413);const r=()=>Date.now().toString(36)+Math.random().toString(36).substring(2),a=()=>`${Date.now()}-${Math.random().toString(36).substring(2)}`,n=()=>navigator.userAgent,l=async()=>{try{const e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch(e){return console.warn("Impossible de r\xe9cup\xe9rer l'IP:",e),null}},i=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(s){console.warn("Erreur lors du stockage local:",s)}},o=(e,t)=>{try{const s=localStorage.getItem(e);return s?JSON.parse(s):t}catch(s){return console.warn("Erreur lors de la r\xe9cup\xe9ration locale:",s),t}},c=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}},7929:(e,t,s)=>{s.d(t,{L6:()=>m,Si:()=>d,We:()=>u,Xb:()=>x,gc:()=>o,q5:()=>c});var r=s(4455),a=s(5472),n=s(6925);const l="seances",i="films",o=async e=>{try{if(5!==e.films.length)throw new Error("Une s\xe9ance doit contenir exactement 5 films");const t=e.films.map(e=>(0,a.x7)((0,a.H9)(r.db,i,e))),s=(await Promise.all(t)).map((t,s)=>({snapshot:t,filmId:e.films[s]})).filter(e=>{let{snapshot:t}=e;return!t.exists()});if(s.length>0)throw new Error(`Films non trouv\xe9s: ${s.map(e=>e.filmId).join(", ")}`);const o=(0,n.$C)(),c=h(o),d={nom:e.nom,description:e.description,date:e.date,heure:e.heure,films:e.films,qrCodeUrl:c,isActive:!0,createdAt:new Date,updatedAt:new Date};return{id:(await(0,a.gS)((0,a.rJ)(r.db,l),d)).id,...d}}catch(t){throw console.error("Erreur lors de la cr\xe9ation de la s\xe9ance:",t),t}},c=async()=>{try{const e=(0,a.P)((0,a.rJ)(r.db,l),(0,a.My)("date","desc")),t=await(0,a.GG)(e),s=[];return t.forEach(e=>{const t=e.data();s.push({id:e.id,nom:t.nom,description:t.description,date:t.date.toDate(),heure:t.heure,films:t.films,qrCodeUrl:t.qrCodeUrl,isActive:t.isActive,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate()})}),s}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des s\xe9ances:",e),e}},d=async e=>{try{const t=(0,a.H9)(r.db,l,e),s=await(0,a.x7)(t);if(s.exists()){const e=s.data();return{id:s.id,nom:e.nom,description:e.description,date:e.date.toDate(),heure:e.heure,films:e.films,qrCodeUrl:e.qrCodeUrl,isActive:e.isActive,createdAt:e.createdAt.toDate(),updatedAt:e.updatedAt.toDate()}}return null}catch(t){throw console.error("Erreur lors de la r\xe9cup\xe9ration de la s\xe9ance:",t),t}},m=async(e,t)=>{try{const s=(0,a.H9)(r.db,l,e),n={...t,updatedAt:new Date};if(t.films&&5!==t.films.length)throw new Error("Une s\xe9ance doit contenir exactement 5 films");await(0,a.mZ)(s,n)}catch(s){throw console.error("Erreur lors de la mise \xe0 jour de la s\xe9ance:",s),s}},x=async e=>{try{const t=(0,a.H9)(r.db,l,e);await(0,a.kd)(t)}catch(t){throw console.error("Erreur lors de la suppression de la s\xe9ance:",t),t}},u=async(e,t)=>{try{const s=(0,a.H9)(r.db,l,e);await(0,a.mZ)(s,{isActive:t,updatedAt:new Date})}catch(s){throw console.error("Erreur lors de la modification du statut de la s\xe9ance:",s),s}},h=e=>{const t=window.location.origin;return`https://api.qrserver.com/v1/create-qr-code/?${new URLSearchParams({size:"300x300",data:`${t}/seance/${e}`,format:"png"}).toString()}`}},8775:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}}]);
//# sourceMappingURL=422.91232bc5.chunk.js.map