{"version":3,"file":"static/js/209.3b351146.chunk.js","mappings":"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","sources":["services/filmService.ts","../node_modules/lucide-react/src/icons/search.ts","pages/FilmsPage.tsx"],"sourcesContent":["import {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  orderBy,\r\n  onSnapshot,\r\n} from 'firebase/firestore';\r\nimport { ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\r\nimport { db, storage } from './firebase';\r\nimport { Film, FilmFormData } from '../types';\r\nimport { COLLECTIONS } from '../utils/constants';\r\nimport { generateId, resizeImage } from '../utils/helpers';\r\n\r\n/**\r\n * Ajouter un nouveau film\r\n */\r\nexport const addFilm = async (data: FilmFormData): Promise<Film> => {\r\n  try {\r\n    let posterUrl = '';\r\n\r\n    // Upload et redimensionner l'affiche si fournie\r\n    if (data.poster) {\r\n      const resizedImage = await resizeImage(data.poster, 800, 600);\r\n      const posterRef = ref(storage, `posters/${generateId()}.jpg`);\r\n      await uploadBytes(posterRef, resizedImage);\r\n      posterUrl = await getDownloadURL(posterRef);\r\n    }\r\n\r\n    const filmData: Omit<Film, 'id'> = {\r\n      titre: data.titre.trim(),\r\n      realisateur: data.realisateur.trim(),\r\n      synopsis: data.synopsis.trim(),\r\n      posterUrl,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    const docRef = await addDoc(collection(db, COLLECTIONS.FILMS), filmData);\r\n\r\n    return {\r\n      id: docRef.id,\r\n      ...filmData,\r\n    };\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de l\\'ajout du film');\r\n  }\r\n};\r\n\r\n/**\r\n * Mettre à jour un film\r\n */\r\nexport const updateFilm = async (\r\n  id: string,\r\n  data: Partial<FilmFormData>\r\n): Promise<void> => {\r\n  try {\r\n    const filmRef = doc(db, COLLECTIONS.FILMS, id);\r\n    const filmDoc = await getDoc(filmRef);\r\n\r\n    if (!filmDoc.exists()) {\r\n      throw new Error('Film non trouvé');\r\n    }\r\n\r\n    const updateData: Partial<Film> = {\r\n      ...data,\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    // Gérer l'upload de la nouvelle affiche\r\n    if (data.poster) {\r\n      const resizedImage = await resizeImage(data.poster, 800, 600);\r\n      const posterRef = ref(storage, `posters/${generateId()}.jpg`);\r\n      await uploadBytes(posterRef, resizedImage);\r\n      updateData.posterUrl = await getDownloadURL(posterRef);\r\n\r\n      // Supprimer l'ancienne affiche\r\n      const currentFilm = filmDoc.data() as Film;\r\n      if (currentFilm.posterUrl) {\r\n        try {\r\n          const oldPosterRef = ref(storage, currentFilm.posterUrl);\r\n          await deleteObject(oldPosterRef);\r\n        } catch (error) {\r\n          console.warn('Impossible de supprimer l\\'ancienne affiche:', error);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Supprimer les champs non-Firestore\r\n    delete (updateData as any).poster;\r\n\r\n    await updateDoc(filmRef, updateData);\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la mise à jour du film');\r\n  }\r\n};\r\n\r\n/**\r\n * Supprimer un film\r\n */\r\nexport const deleteFilm = async (id: string): Promise<void> => {\r\n  try {\r\n    const filmRef = doc(db, COLLECTIONS.FILMS, id);\r\n    const filmDoc = await getDoc(filmRef);\r\n\r\n    if (!filmDoc.exists()) {\r\n      throw new Error('Film non trouvé');\r\n    }\r\n\r\n    // Supprimer l'affiche\r\n    const film = filmDoc.data() as Film;\r\n    if (film.posterUrl) {\r\n      try {\r\n        const posterRef = ref(storage, film.posterUrl);\r\n        await deleteObject(posterRef);\r\n      } catch (error) {\r\n        console.warn('Impossible de supprimer l\\'affiche:', error);\r\n      }\r\n    }\r\n\r\n    await deleteDoc(filmRef);\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la suppression du film');\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer un film par ID\r\n */\r\nexport const getFilm = async (id: string): Promise<Film> => {\r\n  try {\r\n    const filmDoc = await getDoc(doc(db, COLLECTIONS.FILMS, id));\r\n\r\n    if (!filmDoc.exists()) {\r\n      throw new Error('Film non trouvé');\r\n    }\r\n\r\n    const filmData = filmDoc.data();\r\n    return {\r\n      id: filmDoc.id,\r\n      ...filmData,\r\n      createdAt: filmData.createdAt?.toDate() || new Date(),\r\n      updatedAt: filmData.updatedAt?.toDate() || new Date(),\r\n    } as Film;\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la récupération du film');\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer tous les films\r\n */\r\nexport const getAllFilms = async (): Promise<Film[]> => {\r\n  try {\r\n    const filmsQuery = query(\r\n      collection(db, COLLECTIONS.FILMS),\r\n      orderBy('createdAt', 'desc')\r\n    );\r\n\r\n    const querySnapshot = await getDocs(filmsQuery);\r\n    const films: Film[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const filmData = doc.data();\r\n      films.push({\r\n        id: doc.id,\r\n        ...filmData,\r\n        createdAt: filmData.createdAt?.toDate() || new Date(),\r\n        updatedAt: filmData.updatedAt?.toDate() || new Date(),\r\n      } as Film);\r\n    });\r\n\r\n    return films;\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la récupération des films');\r\n  }\r\n};\r\n\r\n/**\r\n * Écouter les changements de la collection films\r\n */\r\nexport const onFilmsChange = (callback: (films: Film[]) => void) => {\r\n  const filmsQuery = query(\r\n    collection(db, COLLECTIONS.FILMS),\r\n    orderBy('createdAt', 'desc')\r\n  );\r\n\r\n  return onSnapshot(filmsQuery, (querySnapshot) => {\r\n    const films: Film[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const filmData = doc.data();\r\n      films.push({\r\n        id: doc.id,\r\n        ...filmData,\r\n        createdAt: filmData.createdAt?.toDate() || new Date(),\r\n        updatedAt: filmData.updatedAt?.toDate() || new Date(),\r\n      } as Film);\r\n    });\r\n\r\n    callback(films);\r\n  });\r\n};\r\n\r\n/**\r\n * Rechercher des films par titre ou réalisateur\r\n */\r\nexport const searchFilms = async (searchTerm: string): Promise<Film[]> => {\r\n  try {\r\n    const searchLower = searchTerm.toLowerCase();\r\n    const allFilms = await getAllFilms();\r\n\r\n    return allFilms.filter(\r\n      (film) =>\r\n        film.titre.toLowerCase().includes(searchLower) ||\r\n        film.realisateur.toLowerCase().includes(searchLower)\r\n    );\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la recherche de films');\r\n  }\r\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('Search', [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['path', { d: 'm21 21-4.3-4.3', key: '1qie3q' }],\n]);\n\nexport default Search;\n","import React, { useState, useEffect } from 'react';\r\nimport { Search, Star } from 'lucide-react';\r\nimport { Film } from '../types';\r\nimport { getAllFilms } from '../services/filmService';\r\nimport { ERROR_MESSAGES } from '../utils/constants';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport const FilmsPage: React.FC = () => {\r\n  const [films, setFilms] = useState<Film[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Charger les films\r\n  useEffect(() => {\r\n    const loadFilms = async () => {\r\n      try {\r\n        const filmsData = await getAllFilms();\r\n        setFilms(filmsData);\r\n      } catch (error) {\r\n        toast.error(ERROR_MESSAGES.NETWORK_ERROR);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadFilms();\r\n  }, []);\r\n\r\n  // Filtrer les films selon la recherche\r\n  const filteredFilms = films.filter(\r\n    (film) =>\r\n      film.titre.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      film.realisateur.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Chargement des films...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <header className=\"bg-white shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"py-6\">\r\n            <h1 className=\"text-3xl font-bold text-primary-600\">Films en compétition</h1>\r\n            <p className=\"text-secondary-600 mt-1\">\r\n              Découvrez tous les films du Festival du Film Court de Dinan\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Barre de recherche */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Rechercher un film ou un réalisateur...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {films.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"text-6xl mb-4\">🎬</div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Aucun film disponible</h2>\r\n            <p className=\"text-gray-600\">Les films seront ajoutés par l'administrateur.</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* Statistiques */}\r\n            <div className=\"mb-6\">\r\n              <p className=\"text-gray-600\">\r\n                {filteredFilms.length} film{filteredFilms.length > 1 ? 's' : ''} trouvé{filteredFilms.length > 1 ? 's' : ''}\r\n                {searchTerm && ` pour \"${searchTerm}\"`}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Grille des films */}\r\n            <div className=\"films-grid\">\r\n              {filteredFilms.map((film) => (\r\n                <div key={film.id} className=\"card hover:shadow-lg transition-shadow\">\r\n                  {film.posterUrl && (\r\n                    <img\r\n                      src={film.posterUrl}\r\n                      alt={film.titre}\r\n                      className=\"w-full h-64 object-cover rounded-lg mb-4\"\r\n                    />\r\n                  )}\r\n                  \r\n                  <div className=\"space-y-3\">\r\n                    <h3 className=\"text-xl font-semibold text-gray-900\">{film.titre}</h3>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      Réalisé par <span className=\"font-medium\">{film.realisateur}</span>\r\n                    </p>\r\n                    <p className=\"text-gray-700 text-sm leading-relaxed\">\r\n                      {film.synopsis}\r\n                    </p>\r\n                    \r\n                    <div className=\"flex items-center justify-between pt-2\">\r\n                      <div className=\"flex items-center text-sm text-gray-500\">\r\n                        <Star className=\"w-4 h-4 text-yellow-400 mr-1\" />\r\n                        <span>En compétition</span>\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-400\">\r\n                        Ajouté le {new Date(film.createdAt).toLocaleDateString('fr-FR')}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Message si aucun résultat de recherche */}\r\n            {searchTerm && filteredFilms.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <div className=\"text-4xl mb-4\">🔍</div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                  Aucun film trouvé\r\n                </h3>\r\n                <p className=\"text-gray-600\">\r\n                  Aucun film ne correspond à votre recherche \"{searchTerm}\"\r\n                </p>\r\n                <button\r\n                  onClick={() => setSearchTerm('')}\r\n                  className=\"mt-4 text-primary-600 hover:text-primary-500\"\r\n                >\r\n                  Voir tous les films\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}; "],"names":["getAllFilms","async","filmsQuery","query","collection","db","COLLECTIONS","FILMS","orderBy","querySnapshot","getDocs","films","forEach","doc","_filmData$createdAt2","_filmData$updatedAt2","filmData","data","push","id","createdAt","toDate","Date","updatedAt","error","Error","Search","createLucideIcon","cx","cy","r","key","d","FilmsPage","setFilms","useState","loading","setLoading","searchTerm","setSearchTerm","useEffect","filmsData","toast","ERROR_MESSAGES","NETWORK_ERROR","loadFilms","filteredFilms","filter","film","titre","toLowerCase","includes","realisateur","_jsx","className","children","_jsxs","type","placeholder","value","onChange","e","target","length","_Fragment","map","posterUrl","src","alt","synopsis","Star","toLocaleDateString","onClick"],"sourceRoot":""}