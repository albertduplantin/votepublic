/*! For license information please see 911.08d00495.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkprix_du_public=self.webpackChunkprix_du_public||[]).push([[911],{1146:(e,s,r)=>{r.d(s,{Vm:()=>n,iE:()=>d});var t=r(4455),a=r(5472),l=r(8147);r(6925);const i="films",n=async()=>{try{const e=(0,a.P)((0,a.rJ)(t.db,i),(0,a.My)("titre","asc")),s=await(0,a.GG)(e),r=[];return s.forEach(e=>{const s=e.data();r.push({id:e.id,titre:s.titre,realisateur:s.realisateur,pays:s.pays,duree:s.duree,annee:s.annee,synopsis:s.synopsis,posterUrl:s.posterUrl,genre:s.genre,createdAt:s.createdAt.toDate(),updatedAt:s.updatedAt.toDate()})}),r}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des films:",e),e}},c=async e=>{try{const s=(0,a.H9)(t.db,i,e),r=await(0,a.x7)(s);if(r.exists()){const e=r.data();return{id:r.id,titre:e.titre,realisateur:e.realisateur,pays:e.pays,duree:e.duree,annee:e.annee,synopsis:e.synopsis,posterUrl:e.posterUrl,genre:e.genre,createdAt:e.createdAt.toDate(),updatedAt:e.updatedAt.toDate()}}return null}catch(s){throw console.error("Erreur lors de la r\xe9cup\xe9ration du film:",s),s}},d=async e=>{try{const s=await c(e);null!==s&&void 0!==s&&s.posterUrl&&await o(s.posterUrl);const r=(0,a.H9)(t.db,i,e);await(0,a.kd)(r)}catch(s){throw console.error("Erreur lors de la suppression du film:",s),s}},o=async e=>{try{const{storage:s}=await Promise.resolve().then(r.bind(r,4455)),t=(0,l.KR)(s,e);await(0,l.XR)(t)}catch(s){console.error("Erreur lors de la suppression du poster:",s)}}},1360:(e,s,r)=>{r.d(s,{A:()=>t});const t=(0,r(1639).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4265:(e,s,r)=>{r.d(s,{A:()=>t});const t=(0,r(1639).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},4911:(e,s,r)=>{r.r(s),r.d(s,{AdminSeancesPage:()=>N});var t=r(5043),a=r(1360),l=r(8646),i=r(5087),n=r(5088),c=r(7170),d=r(4265),o=r(2681),m=r(9855),x=r(7929),u=r(1146),h=r(614),g=r(3768),p=r(579);const y=e=>{let{films:s,onClose:r,onSuccess:l}=e;const[i,n]=(0,t.useState)({nom:"",description:"",date:new Date,heure:"20:00",films:[]}),[d,o]=(0,t.useState)(!1),u=s.filter(e=>i.films.includes(e.id));return(0,p.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,p.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Cr\xe9er une nouvelle s\xe9ance"}),(0,p.jsx)("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,p.jsx)(h.A,{className:"w-5 h-5"})})]}),(0,p.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.films.length<1)g.Ay.error("Une s\xe9ance doit contenir au moins 1 film");else try{o(!0);const e=await(0,x.gc)(i);l(e)}catch(s){g.Ay.error(s.message||"Erreur lors de la cr\xe9ation de la s\xe9ance")}finally{o(!1)}},className:"p-6",children:[(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de la s\xe9ance *"}),(0,p.jsx)("input",{type:"text",required:!0,value:i.nom,onChange:e=>n(s=>({...s,nom:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Ex: S\xe9ance d'ouverture"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,p.jsx)("textarea",{value:i.description,onChange:e=>n(s=>({...s,description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Description optionnelle de la s\xe9ance"})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,p.jsx)("input",{type:"date",required:!0,value:i.date.toISOString().split("T")[0],onChange:e=>n(s=>({...s,date:new Date(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure *"}),(0,p.jsx)("input",{type:"time",required:!0,value:i.heure,onChange:e=>n(s=>({...s,heure:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Films s\xe9lectionn\xe9s (",i.films.length,"/5) - Minimum 1, Maximum 5"]}),0===u.length?(0,p.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,p.jsx)(c.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,p.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Aucun film s\xe9lectionn\xe9"})]}):(0,p.jsx)("div",{className:"space-y-2",children:u.map((e,s)=>(0,p.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-xs font-medium",children:s+1}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"font-medium text-gray-900",children:e.titre}),(0,p.jsx)("p",{className:"text-sm text-gray-500",children:e.realisateur})]})]}),(0,p.jsx)("button",{type:"button",onClick:()=>{return s=e.id,void n(e=>({...e,films:e.films.filter(e=>e!==s)}));var s},className:"p-1 text-gray-400 hover:text-error-600 hover:bg-error-50 rounded transition-colors",children:(0,p.jsx)(m.A,{className:"w-4 h-4"})})]},e.id))})]})]}),(0,p.jsxs)("div",{className:"mt-8",children:[(0,p.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Films disponibles (",s.length,")"]}),(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-64 overflow-y-auto",children:s.map(e=>{const s=i.films.includes(e.id);return(0,p.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors "+(s?"border-primary bg-primary-50":"border-gray-200 hover:border-primary hover:bg-gray-50"),onClick:()=>{return s=e.id,void n(e=>e.films.includes(s)?{...e,films:e.films.filter(e=>e!==s)}:e.films.length>=5?(g.Ay.error("Une s\xe9ance ne peut contenir que 5 films maximum"),e):{...e,films:[...e.films,s]});var s},children:(0,p.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,p.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full border-2 flex items-center justify-center "+(s?"border-primary bg-primary text-white":"border-gray-300"),children:s&&(0,p.jsx)(a.A,{className:"w-3 h-3"})}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("p",{className:"font-medium truncate "+(s?"text-primary":"text-gray-900"),children:e.titre}),(0,p.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.realisateur}),(0,p.jsxs)("p",{className:"text-xs text-gray-400",children:[e.duree,"min \u2022 ",e.annee]})]})]})},e.id)})})]}),(0,p.jsxs)("div",{className:"flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[(0,p.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Annuler"}),(0,p.jsx)("button",{type:"submit",disabled:d||i.films.length<1,className:"btn-festival disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Cr\xe9ation...":"Cr\xe9er la s\xe9ance"})]})]})]})})},f=e=>{let{seance:s,films:r,onClose:l,onSuccess:i}=e;const[n,d]=(0,t.useState)({nom:s.nom,description:s.description||"",date:s.date,heure:s.heure,films:[...s.films]}),[o,u]=(0,t.useState)(!1),y=r.filter(e=>n.films.includes(e.id));return(0,p.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,p.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Modifier la s\xe9ance"}),(0,p.jsx)("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,p.jsx)(h.A,{className:"w-5 h-5"})})]}),(0,p.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),console.log("Soumission du formulaire:",n),n.films.length<1)g.Ay.error("Une s\xe9ance doit contenir au moins 1 film");else try{u(!0),console.log("Appel de updateSeance avec:",s.id,n),await(0,x.L6)(s.id,n),console.log("S\xe9ance mise \xe0 jour avec succ\xe8s");const e={...s,...n};i(e),g.Ay.success("S\xe9ance mise \xe0 jour avec succ\xe8s")}catch(r){console.error("Erreur lors de la mise \xe0 jour:",r),g.Ay.error(r.message||"Erreur lors de la mise \xe0 jour de la s\xe9ance")}finally{u(!1)}},className:"p-6",children:[(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de la s\xe9ance *"}),(0,p.jsx)("input",{type:"text",required:!0,value:n.nom,onChange:e=>d(s=>({...s,nom:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Ex: S\xe9ance d'ouverture"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,p.jsx)("textarea",{value:n.description,onChange:e=>d(s=>({...s,description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Description optionnelle de la s\xe9ance"})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,p.jsx)("input",{type:"date",required:!0,value:n.date.toISOString().split("T")[0],onChange:e=>d(s=>({...s,date:new Date(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure *"}),(0,p.jsx)("input",{type:"time",required:!0,value:n.heure,onChange:e=>d(s=>({...s,heure:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Films s\xe9lectionn\xe9s (",n.films.length,"/5) - Minimum 1, Maximum 5"]}),0===y.length?(0,p.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,p.jsx)(c.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,p.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Aucun film s\xe9lectionn\xe9"})]}):(0,p.jsx)("div",{className:"space-y-2",children:y.map((e,s)=>(0,p.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-xs font-medium",children:s+1}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"font-medium text-gray-900",children:e.titre}),(0,p.jsx)("p",{className:"text-sm text-gray-500",children:e.realisateur})]})]}),(0,p.jsx)("button",{type:"button",onClick:()=>{return s=e.id,void d(e=>({...e,films:e.films.filter(e=>e!==s)}));var s},className:"p-1 text-gray-400 hover:text-error-600 hover:bg-error-50 rounded transition-colors",children:(0,p.jsx)(m.A,{className:"w-4 h-4"})})]},e.id))})]})]}),(0,p.jsxs)("div",{className:"mt-8",children:[(0,p.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Films disponibles (",r.length,")"]}),(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-64 overflow-y-auto",children:r.map(e=>{const s=n.films.includes(e.id);return(0,p.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors "+(s?"border-primary bg-primary-50":"border-gray-200 hover:border-primary hover:bg-gray-50"),onClick:()=>{return s=e.id,void d(e=>e.films.includes(s)?{...e,films:e.films.filter(e=>e!==s)}:e.films.length>=5?(g.Ay.error("Une s\xe9ance ne peut contenir que 5 films maximum"),e):{...e,films:[...e.films,s]});var s},children:(0,p.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,p.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full border-2 flex items-center justify-center "+(s?"border-primary bg-primary text-white":"border-gray-300"),children:s&&(0,p.jsx)(a.A,{className:"w-3 h-3"})}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("p",{className:"font-medium truncate "+(s?"text-primary":"text-gray-900"),children:e.titre}),(0,p.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.realisateur}),(0,p.jsxs)("p",{className:"text-xs text-gray-400",children:[e.duree,"min \u2022 ",e.annee]})]})]})},e.id)})})]}),(0,p.jsxs)("div",{className:"flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[(0,p.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Annuler"}),(0,p.jsx)("button",{type:"submit",disabled:o||n.films.length<1,className:"btn-festival disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Mise \xe0 jour...":"Mettre \xe0 jour"})]})]})]})})};const j=(0,r(1639).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var v=r(7104);const b=e=>{let{seance:s,films:r,onClose:t}=e;return(0,p.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,p.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"D\xe9tails de la s\xe9ance"}),(0,p.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,p.jsx)(h.A,{className:"w-5 h-5"})})]}),(0,p.jsxs)("div",{className:"p-6",children:[(0,p.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s.nom}),s.description&&(0,p.jsx)("p",{className:"text-gray-600",children:s.description})]}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)(l.A,{className:"w-5 h-5 text-gray-400"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Date"}),(0,p.jsx)("p",{className:"text-gray-600",children:s.date.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)(n.A,{className:"w-5 h-5 text-gray-400"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Heure"}),(0,p.jsx)("p",{className:"text-gray-600",children:s.heure})]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)(c.A,{className:"w-5 h-5 text-gray-400"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Nombre de films"}),(0,p.jsxs)("p",{className:"text-gray-600",children:[r.length," films"]})]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)(o.A,{className:"w-5 h-5 text-gray-400"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Statut"}),(0,p.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(s.isActive?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"),children:s.isActive?"Active":"Inactive"})]})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Films de la s\xe9ance"}),(0,p.jsx)("div",{className:"space-y-3",children:r.map((e,s)=>(0,p.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,p.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-xs font-medium",children:s+1}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("p",{className:"font-medium text-gray-900",children:e.titre}),(0,p.jsx)("p",{className:"text-sm text-gray-500",children:e.realisateur}),(0,p.jsxs)("p",{className:"text-xs text-gray-400",children:[e.pays," \u2022 ",e.duree,"min \u2022 ",e.annee]}),e.synopsis&&(0,p.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.synopsis})]})]},e.id))})]})]}),(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"QR Code de la s\xe9ance"}),(0,p.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,p.jsx)("img",{src:s.qrCodeUrl,alt:"QR Code de la s\xe9ance",className:"mx-auto w-48 h-48 object-contain"}),(0,p.jsx)("p",{className:"text-sm text-gray-600 mt-3",children:"Scannez ce QR code pour acc\xe9der au vote de cette s\xe9ance"})]})]}),(0,p.jsxs)("div",{className:"space-y-3",children:[(0,p.jsxs)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(s.qrCodeUrl)}catch(e){console.error("Erreur lors de la copie:",e)}},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,p.jsx)(j,{className:"w-4 h-4"}),(0,p.jsx)("span",{children:"Copier l'URL du QR code"})]}),(0,p.jsxs)("button",{onClick:()=>{const e=document.createElement("a");e.href=s.qrCodeUrl,e.download=`qr-code-${s.nom.replace(/\s+/g,"-").toLowerCase()}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,p.jsx)(v.A,{className:"w-4 h-4"}),(0,p.jsx)("span",{children:"T\xe9l\xe9charger le QR code"})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"URL de la s\xe9ance"}),(0,p.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,p.jsxs)("p",{className:"text-sm text-gray-600 break-all",children:[window.location.origin,"/seance/",s.id]})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Informations techniques"}),(0,p.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2 text-sm text-gray-600",children:[(0,p.jsxs)("div",{className:"flex justify-between",children:[(0,p.jsx)("span",{children:"ID de la s\xe9ance:"}),(0,p.jsx)("span",{className:"font-mono",children:s.id})]}),(0,p.jsxs)("div",{className:"flex justify-between",children:[(0,p.jsx)("span",{children:"Cr\xe9\xe9e le:"}),(0,p.jsx)("span",{children:s.createdAt.toLocaleDateString("fr-FR")})]}),(0,p.jsxs)("div",{className:"flex justify-between",children:[(0,p.jsx)("span",{children:"Modifi\xe9e le:"}),(0,p.jsx)("span",{children:s.updatedAt.toLocaleDateString("fr-FR")})]})]})]})]})]}),(0,p.jsx)("div",{className:"flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:(0,p.jsx)("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Fermer"})})]})]})})},N=()=>{const[e,s]=(0,t.useState)([]),[r,h]=(0,t.useState)([]),[j,v]=(0,t.useState)(!0),[N,w]=(0,t.useState)(""),[A,k]=(0,t.useState)(!1),[C,S]=(0,t.useState)(!1),[D,E]=(0,t.useState)(!1),[q,M]=(0,t.useState)(null);(0,t.useEffect)(()=>{U()},[]);const U=async()=>{try{v(!0);const[e,r]=await Promise.all([(0,x.q5)(),(0,u.Vm)()]);s(e),h(r)}catch(e){g.Ay.error("Erreur lors du chargement des donn\xe9es")}finally{v(!1)}},L=e.filter(e=>e.nom.toLowerCase().includes(N.toLowerCase())||e.description&&e.description.toLowerCase().includes(N.toLowerCase())),R=e=>r.filter(s=>e.films.includes(s.id));return j?(0,p.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,p.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement des s\xe9ances..."})]})}):(0,p.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,p.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,p.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,p.jsx)("div",{className:"py-6",children:(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des S\xe9ances"}),(0,p.jsx)("p",{className:"mt-1 text-gray-600",children:"Cr\xe9ez et g\xe9rez les s\xe9ances de films du festival"})]}),(0,p.jsxs)("button",{onClick:()=>k(!0),className:"btn-festival flex items-center space-x-2",children:[(0,p.jsx)(a.A,{className:"w-5 h-5"}),(0,p.jsx)("span",{children:"Nouvelle S\xe9ance"})]})]})})})}),(0,p.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,p.jsx)("div",{className:"mb-6",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("input",{type:"text",placeholder:"Rechercher une s\xe9ance...",value:N,onChange:e=>w(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"}),(0,p.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,p.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,p.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("div",{className:"p-2 bg-primary-100 rounded-lg",children:(0,p.jsx)(l.A,{className:"w-6 h-6 text-primary"})}),(0,p.jsxs)("div",{className:"ml-4",children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total S\xe9ances"}),(0,p.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),(0,p.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("div",{className:"p-2 bg-success-100 rounded-lg",children:(0,p.jsx)(i.A,{className:"w-6 h-6 text-success"})}),(0,p.jsxs)("div",{className:"ml-4",children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"S\xe9ances Actives"}),(0,p.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>e.isActive).length})]})]})}),(0,p.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("div",{className:"p-2 bg-warning-100 rounded-lg",children:(0,p.jsx)(n.A,{className:"w-6 h-6 text-warning"})}),(0,p.jsxs)("div",{className:"ml-4",children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"S\xe9ances Inactives"}),(0,p.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>!e.isActive).length})]})]})}),(0,p.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("div",{className:"p-2 bg-secondary-100 rounded-lg",children:(0,p.jsx)(c.A,{className:"w-6 h-6 text-secondary"})}),(0,p.jsxs)("div",{className:"ml-4",children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Films"}),(0,p.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]})]})})]}),(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,p.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,p.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["S\xe9ances (",L.length,")"]})}),0===L.length?(0,p.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,p.jsx)(c.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,p.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune s\xe9ance"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:N?"Aucune s\xe9ance ne correspond \xe0 votre recherche.":"Commencez par cr\xe9er une s\xe9ance."}),!N&&(0,p.jsx)("div",{className:"mt-6",children:(0,p.jsx)("button",{onClick:()=>k(!0),className:"btn-festival",children:"Cr\xe9er une s\xe9ance"})})]}):(0,p.jsx)("div",{className:"divide-y divide-gray-200",children:L.map(e=>{const r=R(e);return(0,p.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50",children:(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.nom}),(0,p.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.isActive?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"),children:e.isActive?"Active":"Inactive"})]}),e.description&&(0,p.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:e.description}),(0,p.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-sm text-gray-500",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,p.jsx)(l.A,{className:"w-4 h-4"}),(0,p.jsx)("span",{children:e.date.toLocaleDateString("fr-FR")})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,p.jsx)(n.A,{className:"w-4 h-4"}),(0,p.jsx)("span",{children:e.heure})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,p.jsx)(c.A,{className:"w-4 h-4"}),(0,p.jsxs)("span",{children:[r.length," films"]})]})]}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>(0,p.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800",children:e.titre},e.id))})})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,p.jsx)("button",{onClick:()=>(e=>{M(e),E(!0)})(e),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Voir les d\xe9tails",children:(0,p.jsx)(i.A,{className:"w-4 h-4"})}),(0,p.jsx)("button",{onClick:()=>(e=>{M(e),S(!0)})(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Modifier",children:(0,p.jsx)(d.A,{className:"w-4 h-4"})}),(0,p.jsx)("button",{onClick:()=>(async(e,r)=>{try{await(0,x.We)(e,!r),s(s=>s.map(s=>s.id===e?{...s,isActive:!r}:s)),g.Ay.success(`S\xe9ance ${r?"d\xe9sactiv\xe9e":"activ\xe9e"} avec succ\xe8s`)}catch(t){g.Ay.error("Erreur lors de la modification du statut")}})(e.id,e.isActive),className:"p-2 rounded-lg transition-colors "+(e.isActive?"text-warning-400 hover:text-warning-600 hover:bg-warning-50":"text-success-400 hover:text-success-600 hover:bg-success-50"),title:e.isActive?"D\xe9sactiver":"Activer",children:(0,p.jsx)(o.A,{className:"w-4 h-4"})}),(0,p.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette s\xe9ance ?"))try{await(0,x.Xb)(e),s(s=>s.filter(s=>s.id!==e)),g.Ay.success("S\xe9ance supprim\xe9e avec succ\xe8s")}catch(r){g.Ay.error("Erreur lors de la suppression")}})(e.id),className:"p-2 text-gray-400 hover:text-error-600 hover:bg-error-50 rounded-lg transition-colors",title:"Supprimer",children:(0,p.jsx)(m.A,{className:"w-4 h-4"})})]})]})},e.id)})})]})]}),A&&(0,p.jsx)(y,{films:r,onClose:()=>k(!1),onSuccess:e=>{s(s=>[e,...s]),k(!1),g.Ay.success("S\xe9ance cr\xe9\xe9e avec succ\xe8s")}}),C&&q&&(0,p.jsx)(f,{seance:q,films:r,onClose:()=>{S(!1),M(null)},onSuccess:e=>{s(s=>s.map(s=>s.id===e.id?e:s)),S(!1),M(null),g.Ay.success("S\xe9ance mise \xe0 jour avec succ\xe8s")}}),D&&q&&(0,p.jsx)(b,{seance:q,films:R(q),onClose:()=>{E(!1),M(null)}})]})}},5087:(e,s,r)=>{r.d(s,{A:()=>t});const t=(0,r(1639).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5088:(e,s,r)=>{r.d(s,{A:()=>t});const t=(0,r(1639).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6925:(e,s,r)=>{r.d(s,{$C:()=>t,$t:()=>l,Lg:()=>c,SP:()=>i,ZB:()=>n,cn:()=>d,f6:()=>a});r(4413);const t=()=>Date.now().toString(36)+Math.random().toString(36).substring(2),a=()=>`${Date.now()}-${Math.random().toString(36).substring(2)}`,l=()=>navigator.userAgent,i=async()=>{try{const e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch(e){return console.warn("Impossible de r\xe9cup\xe9rer l'IP:",e),null}},n=(e,s)=>{try{localStorage.setItem(e,JSON.stringify(s))}catch(r){console.warn("Erreur lors du stockage local:",r)}},c=(e,s)=>{try{const r=localStorage.getItem(e);return r?JSON.parse(r):s}catch(r){return console.warn("Erreur lors de la r\xe9cup\xe9ration locale:",r),s}},d=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return s.filter(Boolean).join(" ")}},7104:(e,s,r)=>{r.d(s,{A:()=>t});const t=(0,r(1639).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7929:(e,s,r)=>{r.d(s,{L6:()=>m,Si:()=>o,We:()=>u,Xb:()=>x,gc:()=>c,q5:()=>d});var t=r(4455),a=r(5472),l=r(6925);const i="seances",n="films",c=async e=>{try{if(e.films.length<1||e.films.length>5)throw new Error("Une s\xe9ance doit contenir entre 1 et 5 films");const s=e.films.map(e=>(0,a.x7)((0,a.H9)(t.db,n,e))),r=(await Promise.all(s)).map((s,r)=>({snapshot:s,filmId:e.films[r]})).filter(e=>{let{snapshot:s}=e;return!s.exists()});if(r.length>0)throw new Error(`Films non trouv\xe9s: ${r.map(e=>e.filmId).join(", ")}`);const c=(0,l.$C)(),d=h(c),o={nom:e.nom,date:e.date,heure:e.heure,films:e.films,qrCodeUrl:d,isActive:!0,createdAt:new Date,updatedAt:new Date,...e.description&&{description:e.description}};return{id:(await(0,a.gS)((0,a.rJ)(t.db,i),o)).id,...o}}catch(s){throw console.error("Erreur lors de la cr\xe9ation de la s\xe9ance:",s),s}},d=async()=>{try{const e=(0,a.P)((0,a.rJ)(t.db,i),(0,a.My)("date","desc")),s=await(0,a.GG)(e),r=[];return s.forEach(e=>{const s=e.data();r.push({id:e.id,nom:s.nom,description:s.description,date:s.date.toDate(),heure:s.heure,films:s.films,qrCodeUrl:s.qrCodeUrl,isActive:s.isActive,createdAt:s.createdAt.toDate(),updatedAt:s.updatedAt.toDate()})}),r}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des s\xe9ances:",e),e}},o=async e=>{try{const s=(0,a.H9)(t.db,i,e),r=await(0,a.x7)(s);if(r.exists()){const e=r.data();return{id:r.id,nom:e.nom,description:e.description,date:e.date.toDate(),heure:e.heure,films:e.films,qrCodeUrl:e.qrCodeUrl,isActive:e.isActive,createdAt:e.createdAt.toDate(),updatedAt:e.updatedAt.toDate()}}return null}catch(s){throw console.error("Erreur lors de la r\xe9cup\xe9ration de la s\xe9ance:",s),s}},m=async(e,s)=>{try{console.log("Mise \xe0 jour de la s\xe9ance:",e,s);const r=(0,a.H9)(t.db,i,e),l={updatedAt:new Date};if(void 0!==s.nom&&(l.nom=s.nom),void 0!==s.description&&(l.description=s.description),void 0!==s.heure&&(l.heure=s.heure),void 0!==s.films&&(l.films=s.films),void 0!==s.date&&(l.date=s.date),s.films&&(s.films.length<1||s.films.length>5))throw new Error("Une s\xe9ance doit contenir entre 1 et 5 films");console.log("Donn\xe9es de mise \xe0 jour:",l),await(0,a.mZ)(r,l),console.log("S\xe9ance mise \xe0 jour avec succ\xe8s")}catch(r){throw console.error("Erreur lors de la mise \xe0 jour de la s\xe9ance:",r),r}},x=async e=>{try{const s=(0,a.H9)(t.db,i,e);await(0,a.kd)(s)}catch(s){throw console.error("Erreur lors de la suppression de la s\xe9ance:",s),s}},u=async(e,s)=>{try{const r=(0,a.H9)(t.db,i,e);await(0,a.mZ)(r,{isActive:s,updatedAt:new Date})}catch(r){throw console.error("Erreur lors de la modification du statut de la s\xe9ance:",r),r}},h=e=>{const s=window.location.origin;return`https://api.qrserver.com/v1/create-qr-code/?${new URLSearchParams({size:"300x300",data:`${s}/seance/${e}`,format:"png"}).toString()}`}},9855:(e,s,r)=>{r.d(s,{A:()=>t});const t=(0,r(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=911.08d00495.chunk.js.map