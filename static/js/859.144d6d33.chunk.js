/*! For license information please see 859.144d6d33.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkprix_du_public=self.webpackChunkprix_du_public||[]).push([[859],{516:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},1167:(e,s,t)=>{t.d(s,{C:()=>c});t(5043);var a=t(4919),r=t(1639);const i=(0,r.A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),n=(0,r.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var l=t(579);const c=e=>{let{title:s,value:t,change:r,changeLabel:c,icon:o,color:d="primary",loading:m=!1}=e;const x=()=>{switch(d){case"primary":default:return"text-primary-600 bg-primary-50 border-primary-200";case"secondary":return"text-secondary-600 bg-secondary-50 border-secondary-200";case"success":return"text-green-600 bg-green-50 border-green-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"error":return"text-red-600 bg-red-50 border-red-200"}};return m?(0,l.jsxs)("div",{className:"stats-card animate-pulse",children:[(0,l.jsx)("div",{className:"skeleton h-8 w-24 mb-2"}),(0,l.jsx)("div",{className:"skeleton h-12 w-16 mb-2"}),(0,l.jsx)("div",{className:"skeleton h-4 w-20"})]}):(0,l.jsxs)("div",{className:`stats-card border-2 ${x()} transition-all duration-300 hover:shadow-xl hover:-translate-y-1`,children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:s}),o&&(0,l.jsx)("div",{className:`p-2 rounded-lg ${x().split(" ")[0]} bg-opacity-20`,children:o})]}),(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:t})}),void 0!==r&&(0,l.jsxs)("div",{className:"flex items-center space-x-1 text-sm "+(void 0===r?"":r>0?"text-green-600":r<0?"text-red-600":"text-gray-600"),children:[void 0===r?null:r>0?(0,l.jsx)(a.A,{className:"w-4 h-4 text-green-600"}):r<0?(0,l.jsx)(i,{className:"w-4 h-4 text-red-600"}):(0,l.jsx)(n,{className:"w-4 h-4 text-gray-600"}),(0,l.jsxs)("span",{className:"font-medium",children:[r>0?"+":"",r,"%"]}),c&&(0,l.jsx)("span",{className:"text-gray-500",children:c})]})]})}},1360:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2489:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},2859:(e,s,t)=>{t.r(s),t.d(s,{AdminPage:()=>D});var a=t(5043),r=t(5475),i=t(8646),n=t(7170),l=t(9742),c=t(7118),o=t(2681),d=t(3005),m=t(2489),x=t(7365),h=t(1360),u=t(516),g=t(7042),p=t(579);const v=e=>{let{stats:s,className:t=""}=e;return(0,p.jsxs)("div",{className:`space-y-6 ${t}`,children:[(0,p.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Votes par jour (7 derniers jours)"}),s.votesByDay&&s.votesByDay.length>0?(0,p.jsx)("div",{className:"space-y-3",children:s.votesByDay.map((e,t)=>(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.date}),(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,p.jsx)("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.max(e.count/Math.max(...s.votesByDay.map(e=>e.count))*100,5)}%`}})}),(0,p.jsx)("span",{className:"text-sm text-gray-600 w-8 text-right",children:e.count})]})]},t))}):(0,p.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Aucun vote enregistr\xe9"})]}),(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"R\xe9partition par genre"}),s.filmsByGenre&&Object.keys(s.filmsByGenre).length>0?(0,p.jsx)("div",{className:"space-y-3",children:Object.entries(s.filmsByGenre).map(e=>{let[t,a]=e;return(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("span",{className:"text-sm font-medium text-gray-700",children:t}),(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,p.jsx)("div",{className:"bg-secondary-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.max(a/Math.max(...Object.values(s.filmsByGenre))*100,5)}%`}})}),(0,p.jsx)("span",{className:"text-sm text-gray-600 w-8 text-right",children:a})]})]},t)})}):(0,p.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Aucun film enregistr\xe9"})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Taux de participation"}),(0,p.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[s.participationRate,"%"]})]}),(0,p.jsx)("div",{className:"p-3 bg-success-100 rounded-lg",children:(0,p.jsx)("svg",{className:"w-6 h-6 text-success-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("div",{className:"flex items-center text-sm text-gray-500",children:(0,p.jsxs)("span",{children:["Bas\xe9 sur ",s.totalSeances," s\xe9ances"]})})})]}),(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Utilisateurs uniques"}),(0,p.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.totalUsers})]}),(0,p.jsx)("div",{className:"p-3 bg-info-100 rounded-lg",children:(0,p.jsx)("svg",{className:"w-6 h-6 text-info-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("div",{className:"flex items-center text-sm text-gray-500",children:(0,p.jsx)("span",{children:"Ayant particip\xe9 au vote"})})})]}),(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"S\xe9ances totales"}),(0,p.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.totalSeances})]}),(0,p.jsx)("div",{className:"p-3 bg-warning-100 rounded-lg",children:(0,p.jsx)("svg",{className:"w-6 h-6 text-warning-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("div",{className:"flex items-center text-sm text-gray-500",children:(0,p.jsxs)("span",{children:[s.activeSeances," actives"]})})})]})]})]})};var y=t(1146),j=t(7929),f=t(5168);const b=async()=>{try{console.log("Chargement des statistiques du tableau de bord...");const[e,s,t]=await Promise.all([(0,f.tp)(),(0,y.Vm)(),(0,j.q5)()]);console.log(`Donn\xe9es charg\xe9es: ${e.length} votes, ${s.length} films, ${t.length} s\xe9ances`);const a=e.length,r=s.length,i=t.length,n=t.filter(e=>e.isActive).length,l=a>0?Math.round(e.reduce((e,s)=>e+s.note,0)/a*10)/10:0,c=new Map;let o;e.forEach(e=>{c.has(e.filmId)||c.set(e.filmId,{votes:0,totalRating:0});const s=c.get(e.filmId);s.votes+=1,s.totalRating+=e.note});let d=0;for(const[y,j]of c){const e=s.find(e=>e.id===y);if(e&&j.votes>0){const s=j.totalRating/j.votes;s>d&&(d=s,o={id:y,title:e.titre,rating:Math.round(10*s)/10,votes:j.votes})}}const m={};s.forEach(e=>{m[e.genre]=(m[e.genre]||0)+1});const x=e.sort((e,s)=>s.createdAt.getTime()-e.createdAt.getTime()).slice(0,10).map(e=>{const t=s.find(s=>s.id===e.filmId);return{id:e.id,action:`Vote ${e.note}/5`,film:(null===t||void 0===t?void 0:t.titre)||"Film inconnu",timestamp:e.createdAt}}),h=[],u=new Date;for(let y=6;y>=0;y--){const s=new Date(u);s.setDate(s.getDate()-y);const t=s.toISOString().split("T")[0],a=e.filter(e=>e.createdAt.toISOString().split("T")[0]===t);h.push({date:s.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric"}),count:a.length})}const g=i>0?Math.round(a/(50*i)*100):0,p=new Set(e.map(e=>e.userId).filter(Boolean)),v={totalVotes:a,totalFilms:r,totalSeances:i,totalUsers:p.size,averageRating:l,activeSeances:n,topFilm:o,recentActivity:x,votesByDay:h,filmsByGenre:m,participationRate:g};return console.log("Statistiques calcul\xe9es:",v),v}catch(e){throw console.error("Erreur lors du chargement des statistiques:",e),new Error("Impossible de charger les statistiques du tableau de bord")}};var N=t(3560);var w=t(5472),A=t(4455);const k=async()=>{try{console.log("G\xe9n\xe9ration des donn\xe9es de test..."),await(async()=>{const e=[{titre:"Le Petit Prince",realisateur:"Marie Dupont",pays:"France",duree:15,annee:2023,synopsis:"Une adaptation moderne du c\xe9l\xe8bre conte de Saint-Exup\xe9ry, explorant les th\xe8mes de l'amiti\xe9 et de l'innocence.",genre:"Animation"},{titre:"L'\xc9cho du Temps",realisateur:"Jean Martin",pays:"Belgique",duree:12,annee:2023,synopsis:"Un voyage po\xe9tique \xe0 travers les souvenirs d'une femme \xe2g\xe9e, m\xealant pass\xe9 et pr\xe9sent.",genre:"Drame"},{titre:"Rythmes Urbains",realisateur:"Sophie Laurent",pays:"Canada",duree:18,annee:2023,synopsis:"Un documentaire sur la vie nocturne de Montr\xe9al, capturant l'\xe9nergie et la diversit\xe9 de la ville.",genre:"Documentaire"},{titre:"La Derni\xe8re Danse",realisateur:"Pierre Dubois",pays:"Suisse",duree:20,annee:2023,synopsis:"L'histoire touchante d'un danseur retrait\xe9 qui retrouve sa passion gr\xe2ce \xe0 une jeune \xe9l\xe8ve.",genre:"Drame"},{titre:"M\xe9tamorphose",realisateur:"Ana Rodriguez",pays:"Espagne",duree:14,annee:2023,synopsis:"Une exploration visuelle de la transformation personnelle, utilisant des techniques d'animation innovantes.",genre:"Animation"},{titre:"Silence",realisateur:"Lucas Bernard",pays:"France",duree:16,annee:2023,synopsis:"Dans un monde bruyant, un homme d\xe9couvre la beaut\xe9 du silence et son pouvoir transformateur.",genre:"Exp\xe9rimental"},{titre:"Les Gardiens de la M\xe9moire",realisateur:"Emma Wilson",pays:"Royaume-Uni",duree:22,annee:2023,synopsis:"Un groupe d'archivistes lutte pour pr\xe9server l'histoire d'une biblioth\xe8que menac\xe9e de destruction.",genre:"Documentaire"},{titre:"Couleurs d'Automne",realisateur:"Marc Tremblay",pays:"Canada",duree:13,annee:2023,synopsis:"Un court m\xe9trage contemplatif sur les changements de saison et le cycle de la vie.",genre:"Po\xe9tique"}];try{for(const s of e)await(0,w.gS)((0,w.collection)(A.db,"films"),{...s,createdAt:new Date,updatedAt:new Date});console.log("Films de test g\xe9n\xe9r\xe9s avec succ\xe8s")}catch(s){throw console.error("Erreur lors de la g\xe9n\xe9ration des films de test:",s),s}})(),await(async()=>{const{getDocs:e,collection:s}=await Promise.resolve().then(t.bind(t,5472)),a=(await e(s(A.db,"films"))).docs.map(e=>e.id);if(0===a.length)throw new Error("Aucun film trouv\xe9. G\xe9n\xe9rez d'abord des films de test.");const r=[{nom:"S\xe9ance d'ouverture - Animation",description:"Une s\xe9lection de films d'animation innovants pour ouvrir le festival",date:new Date("2024-06-15"),heure:"20:00",films:a.slice(0,3),qrCodeUrl:"",isActive:!0},{nom:"S\xe9ance documentaire",description:"Des documentaires captivants sur des sujets vari\xe9s",date:new Date("2024-06-16"),heure:"14:30",films:a.slice(2,5),qrCodeUrl:"",isActive:!0},{nom:"S\xe9ance exp\xe9rimentale",description:"Des films exp\xe9rimentaux et po\xe9tiques",date:new Date("2024-06-17"),heure:"18:00",films:a.slice(5,8),qrCodeUrl:"",isActive:!0}];try{for(const e of r)await(0,w.gS)(s(A.db,"seances"),{...e,createdAt:new Date,updatedAt:new Date});console.log("S\xe9ances de test g\xe9n\xe9r\xe9es avec succ\xe8s")}catch(i){throw console.error("Erreur lors de la g\xe9n\xe9ration des s\xe9ances de test:",i),i}})(),console.log("Toutes les donn\xe9es de test ont \xe9t\xe9 g\xe9n\xe9r\xe9es avec succ\xe8s")}catch(e){throw console.error("Erreur lors de la g\xe9n\xe9ration des donn\xe9es de test:",e),e}},D=()=>{const{stats:e,loading:s,refreshing:t,refreshStats:y}=(()=>{const[e,s]=(0,a.useState)(null),[t,r]=(0,a.useState)(!0),[i,n]=(0,a.useState)(!1),{showSuccess:l,showError:c}=(0,N.E)(),o=(0,a.useCallback)(async()=>{try{r(!0);const e=await b();s(e),l("Statistiques charg\xe9es","Les donn\xe9es du tableau de bord ont \xe9t\xe9 mises \xe0 jour")}catch(e){console.error("Erreur lors du chargement des statistiques:",e),c("Erreur de chargement",e.message||"Impossible de charger les statistiques")}finally{r(!1)}},[l,c]),d=(0,a.useCallback)(async()=>{try{n(!0);const e=await b();s(e),l("Statistiques actualis\xe9es","Les donn\xe9es ont \xe9t\xe9 mises \xe0 jour")}catch(e){console.error("Erreur lors de l'actualisation:",e),c("Erreur d'actualisation",e.message||"Impossible d'actualiser les statistiques")}finally{n(!1)}},[l,c]);return(0,a.useEffect)(()=>{o()},[o]),(0,a.useEffect)(()=>{const e=setInterval(()=>{t||i||d()},3e5);return()=>clearInterval(e)},[t,i,d]),{stats:e,loading:t,refreshing:i,loadStats:o,refreshStats:d}})(),{showSuccess:j,showError:f}=(0,N.E)(),[w,A]=(0,a.useState)(!1),D=[{id:"seances",title:"Gestion des S\xe9ances",description:"Cr\xe9ez et g\xe9rez les s\xe9ances de films avec g\xe9n\xe9ration automatique de QR codes",icon:i.A,color:"primary",href:"/admin/seances"},{id:"films",title:"Gestion des Films",description:"Ajoutez, modifiez et supprimez les films du festival",icon:n.A,color:"secondary",href:"/admin/films"},{id:"votes",title:"R\xe9sultats des Votes",description:"Visualisez les r\xe9sultats en temps r\xe9el et exportez les donn\xe9es",icon:l.A,color:"success",href:"/admin/results"},{id:"users",title:"Gestion des Utilisateurs",description:"G\xe9rez les comptes utilisateurs et les permissions",icon:c.A,color:"info",href:"/admin/users"},{id:"qr-codes",title:"QR Codes",description:"G\xe9n\xe9rez et g\xe9rez les QR codes pour les s\xe9ances",icon:o.A,color:"warning",href:"/admin/qr-codes"},{id:"database",title:"Base de Donn\xe9es",description:"Sauvegardes et maintenance de la base de donn\xe9es",icon:d.A,color:"error",href:"/admin/database"},{id:"security",title:"S\xe9curit\xe9",description:"Param\xe8tres de s\xe9curit\xe9 et logs d'acc\xe8s",icon:m.A,color:"gray",href:"/admin/security"},{id:"settings",title:"Param\xe8tres",description:"Configuration g\xe9n\xe9rale de l'application",icon:x.A,color:"gray",href:"/admin/settings"}],S=e=>{const s={primary:"bg-primary-50 text-primary-600 border-primary-200",secondary:"bg-secondary-50 text-secondary-600 border-secondary-200",success:"bg-success-50 text-success-600 border-success-200",warning:"bg-warning-50 text-warning-600 border-warning-200",error:"bg-error-50 text-error-600 border-error-200",info:"bg-info-50 text-info-600 border-info-200",gray:"bg-gray-50 text-gray-600 border-gray-200"};return s[e]||s.gray},M=e=>{const s={primary:"hover:bg-primary-100 hover:border-primary-300",secondary:"hover:bg-secondary-100 hover:border-secondary-300",success:"hover:bg-success-100 hover:border-success-300",warning:"hover:bg-warning-100 hover:border-warning-300",error:"hover:bg-error-100 hover:border-error-300",info:"hover:bg-info-100 hover:border-info-300",gray:"hover:bg-gray-100 hover:border-gray-300"};return s[e]||s.gray};return(0,p.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,p.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,p.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,p.jsx)("div",{className:"py-6",children:(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Administration"}),(0,p.jsx)("p",{className:"mt-1 text-gray-600",children:"Gestion compl\xe8te du Festival du Film Court de Dinan"})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsxs)("button",{onClick:async()=>{try{A(!0),await k(),j("Donn\xe9es de test g\xe9n\xe9r\xe9es","Les films et s\xe9ances de test ont \xe9t\xe9 cr\xe9\xe9s avec succ\xe8s"),y()}catch(e){f("Erreur",e.message||"Impossible de g\xe9n\xe9rer les donn\xe9es de test")}finally{A(!1)}},disabled:w,className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium bg-green-100 text-green-700 hover:bg-green-200 transition-colors disabled:opacity-50",children:[(0,p.jsx)(h.A,{className:"w-4 h-4 mr-2 "+(w?"animate-spin":"")}),w?"G\xe9n\xe9ration...":"Donn\xe9es de test"]}),(0,p.jsxs)("button",{onClick:y,disabled:t,className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium bg-primary-100 text-primary-700 hover:bg-primary-200 transition-colors disabled:opacity-50",children:[(0,p.jsx)(u.A,{className:"w-4 h-4 mr-2 "+(t?"animate-spin":"")}),t?"Actualisation...":"Actualiser"]}),(0,p.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-success-100 text-success-800",children:"Admin"})]})]})})})}),(0,p.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s?(0,p.jsx)("div",{className:"mb-8",children:(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,s)=>(0,p.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 animate-pulse",children:(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"}),(0,p.jsxs)("div",{className:"ml-4",children:[(0,p.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),(0,p.jsx)("div",{className:"h-8 bg-gray-200 rounded w-12"})]})]})},s))})}):e?(0,p.jsx)("div",{className:"mb-8",children:(0,p.jsx)(g.x,{stats:{totalVotes:e.totalVotes,totalFilms:e.totalFilms,averageRating:e.averageRating,activeSeances:e.activeSeances,topFilm:e.topFilm?{title:e.topFilm.title,rating:e.topFilm.rating,votes:e.topFilm.votes}:void 0,...e.recentActivity&&{recentActivity:e.recentActivity}},loading:!1})}):(0,p.jsx)("div",{className:"mb-8",children:(0,p.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,p.jsx)("div",{className:"text-center text-gray-500",children:(0,p.jsx)("p",{children:"Aucune donn\xe9e disponible"})})})}),e&&(0,p.jsx)(v,{stats:e,className:"mb-8"}),(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,p.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,p.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Fonctionnalit\xe9s d'administration"}),(0,p.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Acc\xe9dez aux diff\xe9rentes sections de gestion"})]}),(0,p.jsx)("div",{className:"p-6",children:(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(e=>{const s=e.icon;return(0,p.jsx)(r.N_,{to:e.href,className:`group block p-6 border-2 rounded-lg transition-all duration-200 ${S(e.color)} ${M(e.color)}`,children:(0,p.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,p.jsx)("div",{className:"flex-shrink-0",children:(0,p.jsx)(s,{className:"w-8 h-8"})}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),(0,p.jsx)("p",{className:"text-sm opacity-75",children:e.description})]})]})},e.id)})})})]}),(0,p.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm",children:[(0,p.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,p.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Actions rapides"})}),(0,p.jsx)("div",{className:"p-6",children:(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,p.jsxs)(r.N_,{to:"/admin/seances",className:"btn-festival text-center",children:[(0,p.jsx)(i.A,{className:"w-5 h-5 mr-2"}),"Cr\xe9er une s\xe9ance"]}),(0,p.jsxs)(r.N_,{to:"/admin/films",className:"btn-festival-outline text-center",children:[(0,p.jsx)(n.A,{className:"w-5 h-5 mr-2"}),"Ajouter un film"]}),(0,p.jsxs)(r.N_,{to:"/admin/results",className:"btn-festival-outline text-center",children:[(0,p.jsx)(l.A,{className:"w-5 h-5 mr-2"}),"Voir les r\xe9sultats"]})]})})]}),(0,p.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm",children:[(0,p.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,p.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Informations syst\xe8me"})}),(0,p.jsx)("div",{className:"p-6",children:(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Statut des services"}),(0,p.jsxs)("div",{className:"space-y-2",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("span",{className:"text-sm text-gray-600",children:"Base de donn\xe9es"}),(0,p.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Connect\xe9"})]}),(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("span",{className:"text-sm text-gray-600",children:"Authentification"}),(0,p.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Actif"})]}),(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("span",{className:"text-sm text-gray-600",children:"Stockage"}),(0,p.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Disponible"})]})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Derni\xe8res activit\xe9s"}),(0,p.jsx)("div",{className:"space-y-2 text-sm text-gray-600",children:(0,p.jsx)("p",{children:"Aucune activit\xe9 r\xe9cente"})})]})]})})]})]})]})}},3005:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},4919:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},7042:(e,s,t)=>{t.d(s,{x:()=>m});t(5043);var a=t(5347),r=t(8646),i=t(7170),n=t(3944),l=t(4919),c=t(7118),o=t(1167),d=t(579);const m=e=>{let{stats:s,loading:t=!1,className:m=""}=e;const x=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),h=e=>{const s=new Date,t=Math.floor((s.getTime()-e.getTime())/6e4);return t<1?"\xc0 l'instant":t<60?`Il y a ${t} min`:t<1440?`Il y a ${Math.floor(t/60)}h`:`Il y a ${Math.floor(t/1440)}j`};return t?(0,d.jsx)("div",{className:`space-y-6 ${m}`,children:(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,s)=>(0,d.jsxs)("div",{className:"stats-card animate-pulse",children:[(0,d.jsx)("div",{className:"skeleton h-6 w-24 mb-4"}),(0,d.jsx)("div",{className:"skeleton h-10 w-16 mb-2"}),(0,d.jsx)("div",{className:"skeleton h-4 w-20"})]},s))})}):(0,d.jsxs)("div",{className:`space-y-6 ${m}`,children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,d.jsx)(o.C,{title:"Total des votes",value:x(s.totalVotes),icon:(0,d.jsx)(c.A,{className:"w-5 h-5"}),color:"primary"}),(0,d.jsx)(o.C,{title:"Films en comp\xe9tition",value:s.totalFilms,icon:(0,d.jsx)(i.A,{className:"w-5 h-5"}),color:"secondary"}),(0,d.jsx)(o.C,{title:"Note moyenne",value:s.averageRating.toFixed(1),icon:(0,d.jsx)(n.A,{className:"w-5 h-5"}),color:"success"}),(0,d.jsx)(o.C,{title:"S\xe9ances actives",value:s.activeSeances,icon:(0,d.jsx)(r.A,{className:"w-5 h-5"}),color:"warning"})]}),s.topFilm&&(0,d.jsxs)("div",{className:"card-hover",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,d.jsx)(a.A,{className:"w-5 h-5 text-yellow-500 mr-2"}),"Film en t\xeate"]}),(0,d.jsx)(l.A,{className:"w-5 h-5 text-green-500"})]}),(0,d.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:s.topFilm.title}),(0,d.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)(n.A,{className:"w-4 h-4 text-yellow-400 mr-1",fill:"currentColor"}),s.topFilm.rating.toFixed(1),"/5"]}),(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)(c.A,{className:"w-4 h-4 mr-1"}),x(s.topFilm.votes)," votes"]})]})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsxs)("div",{className:"text-2xl font-bold text-yellow-600",children:["#",1]}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Classement"})]})]})})]}),s.recentActivity&&s.recentActivity.length>0&&(0,d.jsxs)("div",{className:"card-hover",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activit\xe9 r\xe9cente"}),(0,d.jsx)("div",{className:"space-y-3",children:s.recentActivity.slice(0,5).map(e=>(0,d.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,d.jsx)("span",{className:"font-medium",children:e.action})," ","pour"," ",(0,d.jsx)("span",{className:"font-medium text-primary-600",children:e.film})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:h(e.timestamp)})]})]},e.id))}),s.recentActivity.length>5&&(0,d.jsx)("div",{className:"mt-4 text-center",children:(0,d.jsx)("button",{className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Voir toute l'activit\xe9"})})]}),(0,d.jsxs)("div",{className:"card-hover",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progression des votes"}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Objectif : 1000 votes"}),(0,d.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(s.totalVotes/1e3*100),"%"]})]}),(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill",style:{width:`${Math.min(s.totalVotes/1e3*100,100)}%`}})}),(0,d.jsx)("div",{className:"text-center",children:(0,d.jsxs)("span",{className:"text-sm text-gray-600",children:[s.totalVotes," votes sur 1000"]})})]})]})]})}},7365:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7929:(e,s,t)=>{t.d(s,{L6:()=>m,Si:()=>d,We:()=>h,Xb:()=>x,gc:()=>c,q5:()=>o});var a=t(4455),r=t(5472),i=t(6925);const n="seances",l="films",c=async e=>{try{if(e.films.length<1||e.films.length>5)throw new Error("Une s\xe9ance doit contenir entre 1 et 5 films");const s=e.films.map(e=>(0,r.x7)((0,r.H9)(a.db,l,e))),t=(await Promise.all(s)).map((s,t)=>({snapshot:s,filmId:e.films[t]})).filter(e=>{let{snapshot:s}=e;return!s.exists()});if(t.length>0)throw new Error(`Films non trouv\xe9s: ${t.map(e=>e.filmId).join(", ")}`);const c=(0,i.$C)(),o=u(c),d={nom:e.nom,date:e.date,heure:e.heure,films:e.films,qrCodeUrl:o,isActive:!0,createdAt:new Date,updatedAt:new Date,...e.description&&{description:e.description}};return{id:(await(0,r.gS)((0,r.collection)(a.db,n),d)).id,...d}}catch(s){throw console.error("Erreur lors de la cr\xe9ation de la s\xe9ance:",s),s}},o=async()=>{try{const e=(0,r.P)((0,r.collection)(a.db,n),(0,r.My)("date","desc")),s=await(0,r.getDocs)(e),t=[];return s.forEach(e=>{const s=e.data();t.push({id:e.id,nom:s.nom,description:s.description,date:s.date.toDate(),heure:s.heure,films:s.films,qrCodeUrl:s.qrCodeUrl,isActive:s.isActive,createdAt:s.createdAt.toDate(),updatedAt:s.updatedAt.toDate()})}),t}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des s\xe9ances:",e),e}},d=async e=>{try{const s=(0,r.H9)(a.db,n,e),t=await(0,r.x7)(s);if(t.exists()){const e=t.data();return{id:t.id,nom:e.nom,description:e.description,date:e.date.toDate(),heure:e.heure,films:e.films,qrCodeUrl:e.qrCodeUrl,isActive:e.isActive,createdAt:e.createdAt.toDate(),updatedAt:e.updatedAt.toDate()}}return null}catch(s){throw console.error("Erreur lors de la r\xe9cup\xe9ration de la s\xe9ance:",s),s}},m=async(e,s)=>{try{console.log("Mise \xe0 jour de la s\xe9ance:",e,s);const t=(0,r.H9)(a.db,n,e),i={updatedAt:new Date};if(void 0!==s.nom&&(i.nom=s.nom),void 0!==s.description&&(i.description=s.description),void 0!==s.heure&&(i.heure=s.heure),void 0!==s.films&&(i.films=s.films),void 0!==s.date&&(i.date=s.date),s.films&&(s.films.length<1||s.films.length>5))throw new Error("Une s\xe9ance doit contenir entre 1 et 5 films");console.log("Donn\xe9es de mise \xe0 jour:",i),await(0,r.mZ)(t,i),console.log("S\xe9ance mise \xe0 jour avec succ\xe8s")}catch(t){throw console.error("Erreur lors de la mise \xe0 jour de la s\xe9ance:",t),t}},x=async e=>{try{const s=(0,r.H9)(a.db,n,e);await(0,r.kd)(s)}catch(s){throw console.error("Erreur lors de la suppression de la s\xe9ance:",s),s}},h=async(e,s)=>{try{const t=(0,r.H9)(a.db,n,e);await(0,r.mZ)(t,{isActive:s,updatedAt:new Date})}catch(t){throw console.error("Erreur lors de la modification du statut de la s\xe9ance:",t),t}},u=e=>{const s=window.location.origin;return`https://api.qrserver.com/v1/create-qr-code/?${new URLSearchParams({size:"300x300",data:`${s}/seance/${e}`,format:"png"}).toString()}`}},9742:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(1639).A)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])}}]);
//# sourceMappingURL=859.144d6d33.chunk.js.map