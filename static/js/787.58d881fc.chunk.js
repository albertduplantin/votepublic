/*! For license information please see 787.58d881fc.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkprix_du_public=self.webpackChunkprix_du_public||[]).push([[787],{1787:(e,s,t)=>{t.r(s),t.d(s,{ResultsPage:()=>b});var a=t(5043),r=t(5347),l=t(7929),i=t(5168),n=t(1146),o=(t(3388),t(4230),t(6925)),c=t(579);(0,a.forwardRef)((e,s)=>{let{label:t,error:a,icon:r,helperText:l,className:i,id:n,...d}=e;const m=n||`input-${Math.random().toString(36).substr(2,9)}`;return(0,c.jsxs)("div",{className:"space-y-1",children:[t&&(0,c.jsx)("label",{htmlFor:m,className:"block text-sm font-medium text-gray-700",children:t}),(0,c.jsxs)("div",{className:"relative",children:[r&&(0,c.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,c.jsx)("span",{className:"text-gray-400",children:r})}),(0,c.jsx)("input",{ref:s,id:m,className:(0,o.cn)("block w-full rounded-lg border-gray-300 shadow-sm transition-colors duration-200","focus:border-primary-500 focus:ring-primary-500 focus:ring-2 focus:ring-offset-0","disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed",a?"border-red-300 focus:border-red-500 focus:ring-red-500":"",r?"pl-10":"",i),...d})]}),a&&(0,c.jsx)("p",{className:"text-sm text-red-600",children:a}),l&&!a&&(0,c.jsx)("p",{className:"text-sm text-gray-500",children:l})]})}).displayName="Input";var d=t(1639);const m=(0,d.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),x=(0,d.A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),h=(0,d.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),u=e=>{let{title:s,value:t,change:a,changeLabel:r,icon:l,color:i="primary",loading:n=!1}=e;const o=()=>{switch(i){case"primary":default:return"text-primary-600 bg-primary-50 border-primary-200";case"secondary":return"text-secondary-600 bg-secondary-50 border-secondary-200";case"success":return"text-green-600 bg-green-50 border-green-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"error":return"text-red-600 bg-red-50 border-red-200"}};return n?(0,c.jsxs)("div",{className:"stats-card animate-pulse",children:[(0,c.jsx)("div",{className:"skeleton h-8 w-24 mb-2"}),(0,c.jsx)("div",{className:"skeleton h-12 w-16 mb-2"}),(0,c.jsx)("div",{className:"skeleton h-4 w-20"})]}):(0,c.jsxs)("div",{className:`stats-card border-2 ${o()} transition-all duration-300 hover:shadow-xl hover:-translate-y-1`,children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:s}),l&&(0,c.jsx)("div",{className:`p-2 rounded-lg ${o().split(" ")[0]} bg-opacity-20`,children:l})]}),(0,c.jsx)("div",{className:"mb-2",children:(0,c.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:t})}),void 0!==a&&(0,c.jsxs)("div",{className:"flex items-center space-x-1 text-sm "+(void 0===a?"":a>0?"text-green-600":a<0?"text-red-600":"text-gray-600"),children:[void 0===a?null:a>0?(0,c.jsx)(m,{className:"w-4 h-4 text-green-600"}):a<0?(0,c.jsx)(x,{className:"w-4 h-4 text-red-600"}):(0,c.jsx)(h,{className:"w-4 h-4 text-gray-600"}),(0,c.jsxs)("span",{className:"font-medium",children:[a>0?"+":"",a,"%"]}),r&&(0,c.jsx)("span",{className:"text-gray-500",children:r})]})]})};var p=t(1996),g=t(7118),y=t(7170),v=t(3944),f=t(8646);const j=e=>{let{stats:s,loading:t=!1,className:a=""}=e;const l=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),i=e=>{const s=new Date,t=Math.floor((s.getTime()-e.getTime())/6e4);return t<1?"\xc0 l'instant":t<60?`Il y a ${t} min`:t<1440?`Il y a ${Math.floor(t/60)}h`:`Il y a ${Math.floor(t/1440)}j`};return t?(0,c.jsx)("div",{className:`space-y-6 ${a}`,children:(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,s)=>(0,c.jsxs)("div",{className:"stats-card animate-pulse",children:[(0,c.jsx)("div",{className:"skeleton h-6 w-24 mb-4"}),(0,c.jsx)("div",{className:"skeleton h-10 w-16 mb-2"}),(0,c.jsx)("div",{className:"skeleton h-4 w-20"})]},s))})}):(0,c.jsxs)("div",{className:`space-y-6 ${a}`,children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,c.jsx)(u,{title:"Total des votes",value:l(s.totalVotes),icon:(0,c.jsx)(g.A,{className:"w-5 h-5"}),color:"primary"}),(0,c.jsx)(u,{title:"Films en comp\xe9tition",value:s.totalFilms,icon:(0,c.jsx)(y.A,{className:"w-5 h-5"}),color:"secondary"}),(0,c.jsx)(u,{title:"Note moyenne",value:s.averageRating.toFixed(1),icon:(0,c.jsx)(v.A,{className:"w-5 h-5"}),color:"success"}),(0,c.jsx)(u,{title:"S\xe9ances actives",value:s.activeSeances,icon:(0,c.jsx)(f.A,{className:"w-5 h-5"}),color:"warning"})]}),s.topFilm&&(0,c.jsxs)("div",{className:"card-hover",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,c.jsx)(r.A,{className:"w-5 h-5 text-yellow-500 mr-2"}),"Film en t\xeate"]}),(0,c.jsx)(m,{className:"w-5 h-5 text-green-500"})]}),(0,c.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-200",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:s.topFilm.title}),(0,c.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,c.jsxs)("span",{className:"flex items-center",children:[(0,c.jsx)(v.A,{className:"w-4 h-4 text-yellow-400 mr-1",fill:"currentColor"}),s.topFilm.rating.toFixed(1),"/5"]}),(0,c.jsxs)("span",{className:"flex items-center",children:[(0,c.jsx)(g.A,{className:"w-4 h-4 mr-1"}),l(s.topFilm.votes)," votes"]})]})]}),(0,c.jsxs)("div",{className:"text-right",children:[(0,c.jsxs)("div",{className:"text-2xl font-bold text-yellow-600",children:["#",1]}),(0,c.jsx)("div",{className:"text-xs text-gray-500",children:"Classement"})]})]})})]}),s.recentActivity&&s.recentActivity.length>0&&(0,c.jsxs)("div",{className:"card-hover",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activit\xe9 r\xe9cente"}),(0,c.jsx)("div",{className:"space-y-3",children:s.recentActivity.slice(0,5).map(e=>(0,c.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,c.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full"}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,c.jsx)("span",{className:"font-medium",children:e.action})," ","pour"," ",(0,c.jsx)("span",{className:"font-medium text-primary-600",children:e.film})]}),(0,c.jsx)("p",{className:"text-xs text-gray-500",children:i(e.timestamp)})]})]},e.id))}),s.recentActivity.length>5&&(0,c.jsx)("div",{className:"mt-4 text-center",children:(0,c.jsx)("button",{className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Voir toute l'activit\xe9"})})]}),(0,c.jsxs)("div",{className:"card-hover",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progression des votes"}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Objectif : 1000 votes"}),(0,c.jsxs)("span",{className:"text-sm text-gray-500",children:[Math.round(s.totalVotes/1e3*100),"%"]})]}),(0,c.jsx)("div",{className:"progress-bar",children:(0,c.jsx)("div",{className:"progress-fill",style:{width:`${Math.min(s.totalVotes/1e3*100,100)}%`}})}),(0,c.jsx)("div",{className:"text-center",children:(0,c.jsxs)("span",{className:"text-sm text-gray-600",children:[s.totalVotes," votes sur 1000"]})})]})]})]})};t(2741);var N=t(9618);const b=()=>{var e;const[s,t]=(0,a.useState)([]),[o,d]=(0,a.useState)("all"),[m,x]=(0,a.useState)([]),[h,u]=(0,a.useState)([]),[g,y]=(0,a.useState)(!0),[v,f]=(0,a.useState)(null),[b,w]=(0,a.useState)("rating"),{showError:A,showSuccess:k}=(0,N.M)();(0,a.useEffect)(()=>{C()},[]);const C=async()=>{try{y(!0),f(null);const e=await(0,l.q5)();t(e);const s=[],a=new Map;for(const t of e)try{const e=await(0,i.MS)(t.id),r=e.films.map(e=>e.filmId),l=await(0,n.xJ)(r),o=new Map(l.map(e=>[e.id,e])),c=e.films.map(e=>{const s=o.get(e.filmId),t={titre:(null===s||void 0===s?void 0:s.titre)||`Film ${e.filmId.slice(0,8)}`,realisateur:(null===s||void 0===s?void 0:s.realisateur)||"R\xe9alisateur inconnu",posterUrl:(null===s||void 0===s?void 0:s.posterUrl)||"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=300&h=450&fit=crop"};a.has(e.filmId)||a.set(e.filmId,{votes:0,totalRating:0,count:0});const r=a.get(e.filmId);return r.votes+=e.totalVotes,r.totalRating+=e.moyenneNote*e.totalVotes,r.count+=1,{...e,...t,position:0}}),d=c.sort((e,s)=>s.moyenneNote-e.moyenneNote);d.forEach((e,s)=>{e.position=s+1}),s.push({seance:t,films:d,totalVotes:e.totalVotes,participationRate:Math.round(e.totalVotes/50*100)})}catch(v){console.error(`Erreur pour la s\xe9ance ${t.id}:`,v),A("Erreur de chargement",`Impossible de charger les r\xe9sultats pour la s\xe9ance ${t.nom}`)}x(s);const r=[];for(const[t,l]of a){const e=await(0,n.XP)(t);e&&r.push({filmId:t,titre:e.titre,realisateur:e.realisateur,posterUrl:e.posterUrl||"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=300&h=450&fit=crop",totalVotes:l.votes,moyenneNote:l.totalRating/l.votes,distributionNotes:{},position:0})}const o=r.sort((e,s)=>s.moyenneNote-e.moyenneNote);o.forEach((e,s)=>{e.position=s+1}),u(o),k("R\xe9sultats charg\xe9s","Les r\xe9sultats ont \xe9t\xe9 mis \xe0 jour avec succ\xe8s")}catch(v){console.error("Erreur lors du chargement des r\xe9sultats:",v),f("Erreur lors du chargement des r\xe9sultats"),A("Erreur de chargement","Impossible de charger les r\xe9sultats")}finally{y(!1)}},$=e=>{let s="badge ",t=null;switch(e){case 1:s+="bg-yellow-100 text-yellow-800",t=(0,c.jsx)(r.A,{className:"w-3 h-3"});break;case 2:s+="bg-gray-100 text-gray-800",t=(0,c.jsx)(r.A,{className:"w-3 h-3"});break;case 3:s+="bg-orange-100 text-orange-800",t=(0,c.jsx)(r.A,{className:"w-3 h-3"});break;default:s+="bg-gray-100 text-gray-600"}return(0,c.jsxs)("span",{className:s,children:[t&&(0,c.jsx)("span",{className:"mr-1",children:t}),"#",e]})};if(g)return(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,s)=>(0,c.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg"},s))}),(0,c.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg"})]})})});if(v)return(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"text-red-600 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,c.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Erreur de chargement"}),(0,c.jsx)("p",{className:"text-gray-600 mb-6",children:v}),(0,c.jsx)("button",{onClick:C,className:"btn-primary",children:"R\xe9essayer"})]})})});const S=((e,s)=>{switch(s){case"votes":return[...e].sort((e,s)=>s.totalVotes-e.totalVotes);case"rating":return[...e].sort((e,s)=>s.moyenneNote-e.moyenneNote);case"name":return[...e].sort((e,s)=>e.titre.localeCompare(s.titre));default:return e}})("all"===o?h:(null===(e=m.find(e=>e.seance.id===o))||void 0===e?void 0:e.films)||[],b),V=(()=>{const e=h.reduce((e,s)=>e+s.totalVotes,0),t=h.length>0?h.reduce((e,s)=>e+s.moyenneNote,0)/h.length:0,a=s.filter(e=>new Date(e.date)>new Date).length;return{totalVotes:e,totalFilms:h.length,averageRating:t,activeSeances:a,topFilm:h.length>0?{title:h[0].titre,rating:h[0].moyenneNote,votes:h[0].totalVotes}:void 0}})();return(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"R\xe9sultats du Prix du Public"}),(0,c.jsx)("p",{className:"text-gray-600",children:"D\xe9couvrez les films les plus appr\xe9ci\xe9s par le public"})]}),(0,c.jsx)("div",{className:"mb-8",children:(0,c.jsx)(j,{stats:V})}),(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"S\xe9ance :"}),(0,c.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"input-field max-w-xs",children:[(0,c.jsx)("option",{value:"all",children:"Toutes les s\xe9ances"}),s.map(e=>{return(0,c.jsxs)("option",{value:e.id,children:[e.nom," - ",(s=e.date,new Date(s).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}))]},e.id);var s})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Trier par :"}),(0,c.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"input-field max-w-xs",children:[(0,c.jsx)("option",{value:"rating",children:"Note moyenne"}),(0,c.jsx)("option",{value:"votes",children:"Nombre de votes"}),(0,c.jsx)("option",{value:"name",children:"Nom du film"})]})]})]})}),(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Classement ","all"===o?"global":"de la s\xe9ance"]}),0===S.length?(0,c.jsxs)("div",{className:"text-center py-12",children:[(0,c.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83d\udcca"}),(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun r\xe9sultat disponible"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Les votes n'ont pas encore commenc\xe9 ou aucun vote n'a \xe9t\xe9 enregistr\xe9."})]}):(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(e=>(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(p.b,{id:e.filmId,title:e.titre,director:e.realisateur,duration:0,year:2024,country:"France",synopsis:"Synopsis non disponible",posterUrl:e.posterUrl,rating:e.moyenneNote,voteCount:e.totalVotes,className:"h-full"}),(0,c.jsx)("div",{className:"absolute top-4 left-4 z-10",children:$(e.position)})]},e.filmId))})]})]})})}},1996:(e,s,t)=>{t.d(s,{b:()=>m});var a=t(5043),r=t(3944),l=t(1639);const i=(0,l.A)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),n=(0,l.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var o=t(5088),c=t(7118),d=t(579);const m=e=>{let{title:s,director:t,duration:l,year:m,country:x,synopsis:h,posterUrl:u,rating:p=0,voteCount:g=0,isFavorite:y=!1,userVote:v,hasVoted:f=!1,onVote:j,onFavorite:N,onClick:b,className:w=""}=e;const[A,k]=(0,a.useState)(!1),[C,$]=(0,a.useState)(v||p),S=e=>{const s=Math.floor(e/60),t=e%60;return s>0?`${s}h${t>0?t:""}`:`${t}min`};return(0,d.jsxs)("div",{className:`film-card-enhanced bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer ${w}`,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),onClick:b,children:[(0,d.jsxs)("div",{className:"relative h-48 overflow-hidden",children:[u?(0,d.jsx)("img",{src:u,alt:`Affiche de ${s}`,className:"w-full h-full object-cover transition-transform duration-500",style:{transform:A?"scale(1.1)":"scale(1)"}}):(0,d.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-primary-100 to-secondary-100 flex items-center justify-center",children:(0,d.jsx)(i,{className:"w-12 h-12 text-primary-600"})}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent transition-opacity duration-300 "+(A?"opacity-100":"opacity-0"),children:(0,d.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white transform transition-transform duration-300 ${ hovered ? 'translate-y-0' : 'translate-y-full' }",children:(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:S(l)}),(0,d.jsx)("button",{onClick:e=>{e.stopPropagation(),null===N||void 0===N||N()},className:"p-2 rounded-full transition-colors "+(y?"bg-red-500 text-white":"bg-white/20 text-white hover:bg-red-500"),"aria-label":y?"Retirer des favoris":"Ajouter aux favoris",children:(0,d.jsx)(n,{className:"w-4 h-4",fill:y?"currentColor":"none"})})]})})}),(0,d.jsx)("div",{className:"absolute top-3 left-3",children:(0,d.jsx)("span",{className:"badge badge-primary text-xs font-medium",children:m})}),(0,d.jsx)("div",{className:"absolute top-3 right-3",children:(0,d.jsx)("span",{className:"badge badge-secondary text-xs font-medium",children:x})})]}),(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1 line-clamp-1",children:s}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["R\xe9alis\xe9 par ",t]}),(0,d.jsx)("p",{className:"text-sm text-gray-700 mb-4 line-clamp-2",children:h}),(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4 text-sm text-gray-500",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)(o.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:S(l)})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)(c.A,{className:"w-4 h-4"}),(0,d.jsxs)("span",{children:[g," vote",g>1?"s":""]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Votre note :"}),f&&(0,d.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"\u2713 Vot\xe9"}),C>0&&(0,d.jsxs)("span",{className:"text-sm text-primary-600 font-medium",children:[C,"/5"]})]}),(0,d.jsx)("div",{className:"star-rating",children:Array.from({length:5},(e,s)=>(0,d.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),$(t=s+1),null===j||void 0===j||j(t)},className:`star transition-all duration-200 ${s<C?"star-filled":"star-empty"} hover:scale-110`,"aria-label":`Noter ${s+1} \xe9toile${s>0?"s":""}`,children:(0,d.jsx)(r.A,{className:"w-5 h-5",fill:s<C?"currentColor":"none"})},s))})]}),p>0&&(0,d.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Note moyenne :"}),(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("span",{className:"font-medium text-gray-900",children:p.toFixed(1)}),(0,d.jsx)(r.A,{className:"w-4 h-4 text-yellow-400",fill:"currentColor"})]})]})})]})]})}},3388:(e,s,t)=>{t.d(s,{$:()=>l});t(5043);var a=t(6925),r=t(579);const l=e=>{let{variant:s="primary",size:t="md",loading:l=!1,icon:i,children:n,className:o,disabled:c,...d}=e;return(0,r.jsxs)("button",{className:(0,a.cn)("inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary text-white hover:bg-primary-dark focus:ring-primary border-2 border-primary",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border-2 border-primary bg-white text-primary hover:bg-primary hover:text-white focus:ring-primary",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[s],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t],o),disabled:c||l,...d,children:[l&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!l&&i&&(0,r.jsx)("span",{className:"mr-2",children:i}),n]})}},4230:(e,s,t)=>{t.d(s,{Z:()=>l});t(5043);var a=t(6925),r=t(579);const l=e=>{let{children:s,className:t,padding:l="md",shadow:i="md"}=e;return(0,r.jsx)("div",{className:(0,a.cn)("bg-white rounded-lg border border-gray-200",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[l],{none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"}[i],t),children:s})}},7929:(e,s,t)=>{t.d(s,{L6:()=>m,Si:()=>d,We:()=>h,Xb:()=>x,gc:()=>o,q5:()=>c});var a=t(4455),r=t(5472),l=t(6925);const i="seances",n="films",o=async e=>{try{if(5!==e.films.length)throw new Error("Une s\xe9ance doit contenir exactement 5 films");const s=e.films.map(e=>(0,r.x7)((0,r.H9)(a.db,n,e))),t=(await Promise.all(s)).map((s,t)=>({snapshot:s,filmId:e.films[t]})).filter(e=>{let{snapshot:s}=e;return!s.exists()});if(t.length>0)throw new Error(`Films non trouv\xe9s: ${t.map(e=>e.filmId).join(", ")}`);const o=(0,l.$C)(),c=u(o),d={nom:e.nom,date:e.date,heure:e.heure,films:e.films,qrCodeUrl:c,isActive:!0,createdAt:new Date,updatedAt:new Date,...e.description&&{description:e.description}};return{id:(await(0,r.gS)((0,r.rJ)(a.db,i),d)).id,...d}}catch(s){throw console.error("Erreur lors de la cr\xe9ation de la s\xe9ance:",s),s}},c=async()=>{try{const e=(0,r.P)((0,r.rJ)(a.db,i),(0,r.My)("date","desc")),s=await(0,r.GG)(e),t=[];return s.forEach(e=>{const s=e.data();t.push({id:e.id,nom:s.nom,description:s.description,date:s.date.toDate(),heure:s.heure,films:s.films,qrCodeUrl:s.qrCodeUrl,isActive:s.isActive,createdAt:s.createdAt.toDate(),updatedAt:s.updatedAt.toDate()})}),t}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des s\xe9ances:",e),e}},d=async e=>{try{const s=(0,r.H9)(a.db,i,e),t=await(0,r.x7)(s);if(t.exists()){const e=t.data();return{id:t.id,nom:e.nom,description:e.description,date:e.date.toDate(),heure:e.heure,films:e.films,qrCodeUrl:e.qrCodeUrl,isActive:e.isActive,createdAt:e.createdAt.toDate(),updatedAt:e.updatedAt.toDate()}}return null}catch(s){throw console.error("Erreur lors de la r\xe9cup\xe9ration de la s\xe9ance:",s),s}},m=async(e,s)=>{try{const t=(0,r.H9)(a.db,i,e),l={...s,updatedAt:new Date};if(s.films&&5!==s.films.length)throw new Error("Une s\xe9ance doit contenir exactement 5 films");await(0,r.mZ)(t,l)}catch(t){throw console.error("Erreur lors de la mise \xe0 jour de la s\xe9ance:",t),t}},x=async e=>{try{const s=(0,r.H9)(a.db,i,e);await(0,r.kd)(s)}catch(s){throw console.error("Erreur lors de la suppression de la s\xe9ance:",s),s}},h=async(e,s)=>{try{const t=(0,r.H9)(a.db,i,e);await(0,r.mZ)(t,{isActive:s,updatedAt:new Date})}catch(t){throw console.error("Erreur lors de la modification du statut de la s\xe9ance:",t),t}},u=e=>{const s=window.location.origin;return`https://api.qrserver.com/v1/create-qr-code/?${new URLSearchParams({size:"300x300",data:`${s}/seance/${e}`,format:"png"}).toString()}`}}}]);
//# sourceMappingURL=787.58d881fc.chunk.js.map