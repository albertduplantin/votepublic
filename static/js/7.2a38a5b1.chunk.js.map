{"version":3,"file":"static/js/7.2a38a5b1.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/clock.ts","services/voteService.ts","../node_modules/lucide-react/src/icons/send.ts","components/ui/Button.tsx","components/ui/Card.tsx","pages/SeanceVotePage.tsx","utils/helpers.ts","../node_modules/lucide-react/src/icons/arrow-left.ts","services/seanceService.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('Clock', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polyline', { points: '12 6 12 12 16 14', key: '68esgv' }],\n]);\n\nexport default Clock;\n","import {\r\n  collection,\r\n  doc,\r\n  deleteDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  onSnapshot,\r\n  writeBatch,\r\n  setDoc,\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\nimport { Vote, VoteFormData } from '../types';\r\nimport { COLLECTIONS } from '../utils/constants';\r\nimport { generateId, generateSessionId, getUserAgent, getIpAddress } from '../utils/helpers';\r\n\r\n// Queue pour les votes en batch\r\nlet voteQueue: Vote[] = [];\r\nlet batchTimeout: number | null = null;\r\nlet isProcessingBatch = false;\r\n\r\n/**\r\n * Ajouter un vote directement (pour les séances)\r\n */\r\nexport const addVote = async (data: {\r\n  filmId: string;\r\n  seanceId?: string;\r\n  note: number;\r\n  commentaire?: string;\r\n}): Promise<void> => {\r\n  try {\r\n    const vote: Vote = {\r\n      id: generateId(),\r\n      filmId: data.filmId,\r\n      seanceId: data.seanceId || '',\r\n      note: data.note,\r\n      commentaire: data.commentaire?.trim(),\r\n      ipAddress: await getIpAddress() || undefined,\r\n      userAgent: getUserAgent(),\r\n      sessionId: generateSessionId(),\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    // Ajouter directement à Firestore\r\n    const voteRef = doc(collection(db, COLLECTIONS.VOTES));\r\n    await setDoc(voteRef, {\r\n      ...vote,\r\n      id: voteRef.id,\r\n    } as any);\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de l\\'ajout du vote');\r\n  }\r\n};\r\n\r\n/**\r\n * Ajouter un vote à la queue\r\n */\r\nexport const addVoteToQueue = async (\r\n  filmId: string,\r\n  data: VoteFormData,\r\n  user?: { uid: string; email: string } | null,\r\n  sessionId?: string\r\n): Promise<void> => {\r\n  try {\r\n    const vote: Vote = {\r\n      id: generateId(),\r\n      filmId,\r\n      seanceId: '',\r\n      note: data.note,\r\n      commentaire: data.commentaire?.trim(),\r\n      ipAddress: await getIpAddress() || undefined,\r\n      userAgent: getUserAgent(),\r\n      sessionId: sessionId || generateSessionId(),\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    voteQueue.push(vote);\r\n\r\n    // Démarrer le timer pour l'envoi en batch\r\n    if (!batchTimeout) {\r\n      batchTimeout = window.setTimeout(() => {\r\n        processVoteBatch();\r\n      }, 5000); // 5 secondes de délai\r\n    }\r\n\r\n    // Vérifier si l'utilisateur a déjà voté pour ce film\r\n    const hasVoted = await checkIfUserVoted(filmId, user?.uid, sessionId);\r\n    if (hasVoted) {\r\n      throw new Error('Vous avez déjà voté pour ce film');\r\n    }\r\n  } catch (error: any) {\r\n    throw new Error(error.message || 'Erreur lors de l\\'ajout du vote');\r\n  }\r\n};\r\n\r\n/**\r\n * Traiter la queue de votes en batch\r\n */\r\nconst processVoteBatch = async (): Promise<void> => {\r\n  if (isProcessingBatch || voteQueue.length === 0) {\r\n    return;\r\n  }\r\n\r\n  isProcessingBatch = true;\r\n  const votesToProcess = [...voteQueue];\r\n  voteQueue = [];\r\n  batchTimeout = null;\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n\r\n    // Ajouter tous les votes au batch\r\n    votesToProcess.forEach((vote) => {\r\n      const voteRef = doc(collection(db, COLLECTIONS.VOTES));\r\n      batch.set(voteRef, {\r\n        ...vote,\r\n        id: voteRef.id,\r\n      });\r\n    });\r\n\r\n    // Exécuter le batch\r\n    await batch.commit();\r\n\r\n    console.log(`${votesToProcess.length} votes envoyés avec succès`);\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'envoi du batch:', error);\r\n    \r\n    // Remettre les votes dans la queue pour retry\r\n    voteQueue.unshift(...votesToProcess);\r\n    \r\n    // Retry après 10 secondes\r\n    setTimeout(() => {\r\n      isProcessingBatch = false;\r\n      if (voteQueue.length > 0) {\r\n        processVoteBatch();\r\n      }\r\n    }, 10000);\r\n  } finally {\r\n    isProcessingBatch = false;\r\n  }\r\n};\r\n\r\n/**\r\n * Vérifier si un utilisateur a déjà voté pour un film\r\n */\r\nexport const checkIfUserVoted = async (\r\n  filmId: string,\r\n  userId?: string,\r\n  sessionId?: string\r\n): Promise<boolean> => {\r\n  try {\r\n    let voteQuery;\r\n\r\n    if (userId) {\r\n      // Utilisateur connecté\r\n      voteQuery = query(\r\n        collection(db, COLLECTIONS.VOTES),\r\n        where('filmId', '==', filmId),\r\n        where('userId', '==', userId)\r\n      );\r\n    } else if (sessionId) {\r\n      // Vote anonyme\r\n      voteQuery = query(\r\n        collection(db, COLLECTIONS.VOTES),\r\n        where('filmId', '==', filmId),\r\n        where('sessionId', '==', sessionId)\r\n      );\r\n    } else {\r\n      return false;\r\n    }\r\n\r\n    const querySnapshot = await getDocs(voteQuery);\r\n    return !querySnapshot.empty;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la vérification du vote:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer les votes d'un film\r\n */\r\nexport const getFilmVotes = async (filmId: string): Promise<Vote[]> => {\r\n  try {\r\n    const votesQuery = query(\r\n      collection(db, COLLECTIONS.VOTES),\r\n      where('filmId', '==', filmId),\r\n      orderBy('createdAt', 'desc')\r\n    );\r\n\r\n    const querySnapshot = await getDocs(votesQuery);\r\n    const votes: Vote[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const voteData = doc.data();\r\n      votes.push({\r\n        ...voteData,\r\n        id: doc.id,\r\n        createdAt: voteData.createdAt?.toDate() || new Date(),\r\n      } as Vote);\r\n    });\r\n\r\n    return votes;\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la récupération des votes');\r\n  }\r\n};\r\n\r\n/**\r\n * Supprimer un vote\r\n */\r\nexport const deleteVote = async (voteId: string): Promise<void> => {\r\n  try {\r\n    await deleteDoc(doc(db, COLLECTIONS.VOTES, voteId));\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la suppression du vote');\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer les statistiques d'un film\r\n */\r\nexport const getFilmStats = async (filmId: string): Promise<{\r\n  filmId: string;\r\n  titre: string;\r\n  totalVotes: number;\r\n  moyenneNote: number;\r\n  distributionNotes: Record<number, number>;\r\n  commentaires: string[];\r\n}> => {\r\n  try {\r\n    const votes = await getFilmVotes(filmId);\r\n    const ratings = votes.map(vote => vote.note);\r\n    \r\n    const distribution: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\r\n    ratings.forEach(rating => {\r\n      if (rating >= 1 && rating <= 5) {\r\n        distribution[rating]++;\r\n      }\r\n    });\r\n\r\n    const moyenne = ratings.length > 0 \r\n      ? Math.round((ratings.reduce((sum, r) => sum + r, 0) / ratings.length) * 10) / 10\r\n      : 0;\r\n\r\n    const commentaires = votes\r\n      .filter(vote => vote.commentaire)\r\n      .map(vote => vote.commentaire!)\r\n      .slice(0, 10); // Limiter à 10 commentaires\r\n\r\n    return {\r\n      filmId,\r\n      titre: '', // Sera rempli par l'appelant\r\n      totalVotes: votes.length,\r\n      moyenneNote: moyenne,\r\n      distributionNotes: distribution,\r\n      commentaires,\r\n    };\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors du calcul des statistiques');\r\n  }\r\n};\r\n\r\n/**\r\n * Écouter les changements de votes pour un film\r\n */\r\nexport const onVotesChange = (filmId: string, callback: (votes: Vote[]) => void) => {\r\n  const votesQuery = query(\r\n    collection(db, COLLECTIONS.VOTES),\r\n    where('filmId', '==', filmId),\r\n    orderBy('createdAt', 'desc')\r\n  );\r\n\r\n  return onSnapshot(votesQuery, (querySnapshot) => {\r\n    const votes: Vote[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const voteData = doc.data();\r\n      votes.push({\r\n        ...voteData,\r\n        id: doc.id,\r\n        createdAt: voteData.createdAt?.toDate() || new Date(),\r\n      } as Vote);\r\n    });\r\n\r\n    callback(votes);\r\n  });\r\n};\r\n\r\n/**\r\n * Récupérer le statut de la queue de votes\r\n */\r\nexport const getVoteQueueStatus = () => {\r\n  return {\r\n    pendingVotes: voteQueue.length,\r\n    isProcessing: isProcessingBatch,\r\n    nextBatchIn: batchTimeout ? 5000 : 0,\r\n  };\r\n};\r\n\r\n/**\r\n * Forcer l'envoi immédiat de la queue\r\n */\r\nexport const forceProcessBatch = async (): Promise<void> => {\r\n  if (batchTimeout) {\r\n    clearTimeout(batchTimeout);\r\n    batchTimeout = null;\r\n  }\r\n  await processVoteBatch();\r\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Send\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjIgMi03IDIwLTQtOS05LTRaIiAvPgogIDxwYXRoIGQ9Ik0yMiAyIDExIDEzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/send\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Send = createLucideIcon('Send', [\n  ['path', { d: 'm22 2-7 20-4-9-9-4Z', key: '1q3vgg' }],\n  ['path', { d: 'M22 2 11 13', key: 'nzbqef' }],\n]);\n\nexport default Send;\n","import React from 'react';\r\nimport { cn } from '../../utils/helpers';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  loading?: boolean;\r\n  icon?: React.ReactNode;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Button: React.FC<ButtonProps> = ({\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  icon,\r\n  children,\r\n  className,\r\n  disabled,\r\n  ...props\r\n}) => {\r\n  const baseClasses = 'inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';\r\n  \r\n  const variants = {\r\n    primary: 'bg-primary text-white hover:bg-primary-dark focus:ring-primary border-2 border-primary',\r\n    secondary: 'bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500',\r\n    outline: 'border-2 border-primary bg-white text-primary hover:bg-primary hover:text-white focus:ring-primary',\r\n    ghost: 'text-gray-700 hover:bg-gray-100 focus:ring-gray-500',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\r\n  };\r\n  \r\n  const sizes = {\r\n    sm: 'px-3 py-1.5 text-sm',\r\n    md: 'px-4 py-2 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n  \r\n  return (\r\n    <button\r\n      className={cn(\r\n        baseClasses,\r\n        variants[variant],\r\n        sizes[size],\r\n        className\r\n      )}\r\n      disabled={disabled || loading}\r\n      {...props}\r\n    >\r\n      {loading && (\r\n        <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n        </svg>\r\n      )}\r\n      {!loading && icon && <span className=\"mr-2\">{icon}</span>}\r\n      {children}\r\n    </button>\r\n  );\r\n}; ","import React from 'react';\r\nimport { cn } from '../../utils/helpers';\r\n\r\ninterface CardProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  padding?: 'none' | 'sm' | 'md' | 'lg';\r\n  shadow?: 'none' | 'sm' | 'md' | 'lg';\r\n}\r\n\r\nexport const Card: React.FC<CardProps> = ({\r\n  children,\r\n  className,\r\n  padding = 'md',\r\n  shadow = 'md',\r\n}) => {\r\n  const paddingClasses = {\r\n    none: '',\r\n    sm: 'p-4',\r\n    md: 'p-6',\r\n    lg: 'p-8',\r\n  };\r\n\r\n  const shadowClasses = {\r\n    none: '',\r\n    sm: 'shadow-sm',\r\n    md: 'shadow-md',\r\n    lg: 'shadow-lg',\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'bg-white rounded-lg border border-gray-200',\r\n        paddingClasses[padding],\r\n        shadowClasses[shadow],\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { z } from 'zod';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport toast from 'react-hot-toast';\r\nimport { Star, ArrowLeft, Send, Clock, Users } from 'lucide-react';\r\nimport { getSeanceWithFilms } from '../services/seanceService';\r\nimport { addVote } from '../services/voteService';\r\nimport { Seance, Film, VoteFormData } from '../types';\r\nimport { Button } from '../components/ui/Button';\r\nimport { Card } from '../components/ui/Card';\r\nimport { ROUTES } from '../utils/constants';\r\n\r\n// Schéma de validation pour le vote\r\nconst voteSchema = z.object({\r\n  note: z.number().min(1).max(5),\r\n  commentaire: z.string().max(500).optional(),\r\n});\r\n\r\ninterface VoteData {\r\n  filmId: string;\r\n  note: number;\r\n  commentaire?: string;\r\n}\r\n\r\nexport const SeanceVotePage: React.FC = () => {\r\n  const { seanceId } = useParams<{ seanceId: string }>();\r\n  const navigate = useNavigate();\r\n  const [seance, setSeance] = useState<Seance | null>(null);\r\n  const [films, setFilms] = useState<Film[]>([]);\r\n  const [results, setResults] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [voting, setVoting] = useState(false);\r\n  const [votes, setVotes] = useState<Record<string, VoteData>>({});\r\n\r\n  // Charger les données de la séance\r\n  useEffect(() => {\r\n    const loadSeanceData = async () => {\r\n      if (!seanceId) return;\r\n      \r\n      try {\r\n        setLoading(true);\r\n        const seanceWithFilms = await getSeanceWithFilms(seanceId);\r\n        \r\n        if (!seanceWithFilms) {\r\n          throw new Error('Séance non trouvée');\r\n        }\r\n        \r\n        setSeance(seanceWithFilms.seance);\r\n        setFilms(seanceWithFilms.films);\r\n        // TODO: Implémenter getSeanceResults\r\n        setResults(null);\r\n      } catch (error: any) {\r\n        toast.error('Erreur lors du chargement de la séance');\r\n        navigate(ROUTES.VOTE);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadSeanceData();\r\n  }, [seanceId, navigate]);\r\n\r\n  // Gérer le vote pour un film\r\n  const handleVote = (filmId: string, note: number, commentaire?: string) => {\r\n    setVotes(prev => ({\r\n      ...prev,\r\n      [filmId]: { filmId, note, commentaire },\r\n    }));\r\n  };\r\n\r\n  // Soumettre tous les votes\r\n  const handleSubmitVotes = async () => {\r\n    if (!seance || Object.keys(votes).length === 0) {\r\n      toast.error('Veuillez voter pour au moins un film');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setVoting(true);\r\n      \r\n      // Soumettre chaque vote\r\n      const votePromises = Object.values(votes).map(vote => \r\n        addVote({\r\n          filmId: vote.filmId,\r\n          seanceId: seance.id,\r\n          note: vote.note,\r\n          commentaire: vote.commentaire,\r\n        })\r\n      );\r\n      \r\n      await Promise.all(votePromises);\r\n      \r\n      toast.success('Votes enregistrés avec succès !');\r\n      navigate(ROUTES.RESULTS);\r\n    } catch (error: any) {\r\n      toast.error('Erreur lors de l\\'enregistrement des votes');\r\n    } finally {\r\n      setVoting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Chargement de la séance...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!seance) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Séance non trouvée</h2>\r\n          <Button onClick={() => navigate(ROUTES.VOTE)}>\r\n            Retour au vote\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Filtrer les films de cette séance\r\n  const seanceFilms = films.filter(film => seance.films.includes(film.id));\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* En-tête */}\r\n        <div className=\"mb-8\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            icon={<ArrowLeft className=\"h-4 w-4\" />}\r\n            onClick={() => navigate(ROUTES.VOTE)}\r\n            className=\"mb-4\"\r\n          >\r\n            Retour\r\n          </Button>\r\n          \r\n          <Card className=\"mb-6\">\r\n            <div className=\"text-center\">\r\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n                {seance.nom}\r\n              </h1>\r\n              <div className=\"flex items-center justify-center space-x-6 text-gray-600\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  <span>{seance.date.toLocaleDateString('fr-FR')} à {seance.heure}</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Users className=\"h-4 w-4\" />\r\n                  <span>{seanceFilms.length} film{seanceFilms.length > 1 ? 's' : ''}</span>\r\n                </div>\r\n              </div>\r\n              {seance.description && (\r\n                <p className=\"mt-4 text-gray-600\">{seance.description}</p>\r\n              )}\r\n            </div>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Instructions */}\r\n        <Card className=\"mb-8\">\r\n          <div className=\"text-center\">\r\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\r\n              Votez pour les films de cette séance\r\n            </h2>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              Notez chaque film de 1 à 5 étoiles et ajoutez un commentaire optionnel.\r\n              Vous ne pouvez voter qu'une seule fois par film.\r\n            </p>\r\n            <div className=\"flex items-center justify-center space-x-8 text-sm text-gray-500\">\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <span>1 = Très mauvais</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <span>5 = Excellent</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Films à voter */}\r\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n          {seanceFilms.map((film) => {\r\n            const currentVote = votes[film.id];\r\n            const filmResults = results?.films?.find((f: any) => f.filmId === film.id);\r\n            \r\n            return (\r\n              <Card key={film.id} className=\"overflow-hidden\">\r\n                {/* Poster */}\r\n                <div className=\"aspect-[2/3] bg-gray-200 overflow-hidden\">\r\n                  {film.posterUrl ? (\r\n                    <img\r\n                      src={film.posterUrl}\r\n                      alt={film.titre}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\r\n                      <span>Aucune image</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                {/* Informations */}\r\n                <div className=\"p-4\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\r\n                    {film.titre}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-600 mb-4\">\r\n                    {film.realisateur}\r\n                  </p>\r\n                  \r\n                  {/* Système de notation */}\r\n                  <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Votre note :\r\n                    </label>\r\n                    <div className=\"flex space-x-1\">\r\n                      {[1, 2, 3, 4, 5].map((star) => (\r\n                        <button\r\n                          key={star}\r\n                          type=\"button\"\r\n                          onClick={() => handleVote(film.id, star, currentVote?.commentaire)}\r\n                          className={`p-1 rounded transition-colors ${\r\n                            currentVote?.note >= star\r\n                              ? 'text-yellow-400 hover:text-yellow-500'\r\n                              : 'text-gray-300 hover:text-yellow-400'\r\n                          }`}\r\n                        >\r\n                          <Star className=\"h-6 w-6 fill-current\" />\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                    {currentVote?.note && (\r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        Note : {currentVote.note}/5\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* Commentaire */}\r\n                  <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Commentaire (optionnel) :\r\n                    </label>\r\n                    <textarea\r\n                      value={currentVote?.commentaire || ''}\r\n                      onChange={(e) => handleVote(film.id, currentVote?.note || 0, e.target.value)}\r\n                      placeholder=\"Votre avis sur ce film...\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                      rows={3}\r\n                      maxLength={500}\r\n                    />\r\n                  </div>\r\n                  \r\n                  {/* Statistiques (si disponibles) */}\r\n                  {filmResults && (\r\n                    <div className=\"border-t pt-4\">\r\n                      <div className=\"flex items-center justify-between text-sm text-gray-600\">\r\n                        <span>Moyenne : {filmResults.moyenne}/5</span>\r\n                        <span>{filmResults.totalVotes} vote{filmResults.totalVotes > 1 ? 's' : ''}</span>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Bouton de soumission */}\r\n        <div className=\"mt-8 text-center\">\r\n          <Button\r\n            onClick={handleSubmitVotes}\r\n            loading={voting}\r\n            disabled={Object.keys(votes).length === 0}\r\n            icon={<Send className=\"h-4 w-4\" />}\r\n            size=\"lg\"\r\n          >\r\n            {voting ? 'Envoi en cours...' : `Envoyer ${Object.keys(votes).length} vote${Object.keys(votes).length > 1 ? 's' : ''}`}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}; ","import { VALIDATION_RULES } from './constants';\r\n\r\n/**\r\n * Génère un ID unique\r\n */\r\nexport const generateId = (): string => {\r\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\r\n};\r\n\r\n/**\r\n * Génère un ID de session unique pour les votes anonymes\r\n */\r\nexport const generateSessionId = (): string => {\r\n  const timestamp = Date.now();\r\n  const random = Math.random().toString(36).substring(2);\r\n  return `${timestamp}-${random}`;\r\n};\r\n\r\n/**\r\n * Valide une adresse email\r\n */\r\nexport const isValidEmail = (email: string): boolean => {\r\n  return VALIDATION_RULES.EMAIL.test(email);\r\n};\r\n\r\n/**\r\n * Valide un mot de passe\r\n */\r\nexport const isValidPassword = (password: string): boolean => {\r\n  return password.length >= VALIDATION_RULES.PASSWORD_MIN_LENGTH;\r\n};\r\n\r\n/**\r\n * Valide un fichier image\r\n */\r\nexport const isValidImageFile = (file: File): boolean => {\r\n  return (\r\n    VALIDATION_RULES.ALLOWED_IMAGE_TYPES.indexOf(file.type) !== -1 &&\r\n    file.size <= VALIDATION_RULES.MAX_FILE_SIZE\r\n  );\r\n};\r\n\r\n/**\r\n * Redimensionne une image\r\n */\r\nexport const resizeImage = (\r\n  file: File,\r\n  maxWidth: number = 800,\r\n  maxHeight: number = 600,\r\n  quality: number = 0.8\r\n): Promise<Blob> => {\r\n  return new Promise((resolve, reject) => {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    const img = new Image();\r\n\r\n    img.onload = () => {\r\n      // Calculer les nouvelles dimensions\r\n      let { width, height } = img;\r\n      \r\n      if (width > maxWidth) {\r\n        height = (height * maxWidth) / width;\r\n        width = maxWidth;\r\n      }\r\n      \r\n      if (height > maxHeight) {\r\n        width = (width * maxHeight) / height;\r\n        height = maxHeight;\r\n      }\r\n\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n\r\n      if (ctx) {\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n        canvas.toBlob(\r\n          (blob) => {\r\n            if (blob) {\r\n              resolve(blob);\r\n            } else {\r\n              reject(new Error('Erreur lors du redimensionnement'));\r\n            }\r\n          },\r\n          'image/jpeg',\r\n          quality\r\n        );\r\n      } else {\r\n        reject(new Error('Impossible de créer le contexte canvas'));\r\n      }\r\n    };\r\n\r\n    img.onerror = () => reject(new Error('Erreur lors du chargement de l\\'image'));\r\n    img.src = URL.createObjectURL(file);\r\n  });\r\n};\r\n\r\n/**\r\n * Formate une date\r\n */\r\nexport const formatDate = (date: Date): string => {\r\n  return new Intl.DateTimeFormat('fr-FR', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  }).format(date);\r\n};\r\n\r\n/**\r\n * Formate une note avec étoiles\r\n */\r\nexport const formatRating = (rating: number): string => {\r\n  return `${rating}/5`;\r\n};\r\n\r\n/**\r\n * Calcule la moyenne des notes\r\n */\r\nexport const calculateAverageRating = (ratings: number[]): number => {\r\n  if (ratings.length === 0) return 0;\r\n  const sum = ratings.reduce((acc, rating) => acc + rating, 0);\r\n  return Math.round((sum / ratings.length) * 10) / 10;\r\n};\r\n\r\n/**\r\n * Génère une distribution des notes\r\n */\r\nexport const generateRatingDistribution = (ratings: number[]): Record<number, number> => {\r\n  const distribution: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\r\n  \r\n  ratings.forEach(rating => {\r\n    if (rating >= 1 && rating <= 5) {\r\n      distribution[rating]++;\r\n    }\r\n  });\r\n  \r\n  return distribution;\r\n};\r\n\r\n/**\r\n * Retourne l'User Agent du navigateur\r\n */\r\nexport const getUserAgent = (): string => {\r\n  return navigator.userAgent;\r\n};\r\n\r\n/**\r\n * Retourne l'adresse IP (approximative via service externe)\r\n */\r\nexport const getIpAddress = async (): Promise<string | null> => {\r\n  try {\r\n    const response = await fetch('https://api.ipify.org?format=json');\r\n    const data = await response.json();\r\n    return data.ip;\r\n  } catch (error) {\r\n    console.warn('Impossible de récupérer l\\'IP:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Stocke une valeur dans le localStorage\r\n */\r\nexport const setLocalStorage = (key: string, value: any): void => {\r\n  try {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  } catch (error) {\r\n    console.warn('Erreur lors du stockage local:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Récupère une valeur du localStorage\r\n */\r\nexport const getLocalStorage = <T>(key: string, defaultValue: T): T => {\r\n  try {\r\n    const item = localStorage.getItem(key);\r\n    return item ? JSON.parse(item) : defaultValue;\r\n  } catch (error) {\r\n    console.warn('Erreur lors de la récupération locale:', error);\r\n    return defaultValue;\r\n  }\r\n};\r\n\r\n/**\r\n * Supprime une valeur du localStorage\r\n */\r\nexport const removeLocalStorage = (key: string): void => {\r\n  try {\r\n    localStorage.removeItem(key);\r\n  } catch (error) {\r\n    console.warn('Erreur lors de la suppression locale:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Débounce une fonction\r\n */\r\nexport const debounce = <T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let timeout: number;\r\n  \r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeout);\r\n    timeout = window.setTimeout(() => func(...args), wait);\r\n  };\r\n};\r\n\r\n/**\r\n * Retry une fonction avec délai\r\n */\r\nexport const retry = async <T>(\r\n  fn: () => Promise<T>,\r\n  maxRetries: number = 3,\r\n  delay: number = 1000\r\n): Promise<T> => {\r\n  let lastError: Error = new Error('Une erreur est survenue');\r\n  \r\n  for (let i = 0; i < maxRetries; i++) {\r\n    try {\r\n      return await fn();\r\n    } catch (error) {\r\n      lastError = error as Error;\r\n      if (i < maxRetries - 1) {\r\n        await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\r\n      }\r\n    }\r\n  }\r\n  \r\n  throw new Error(lastError.message || 'Une erreur est survenue');\r\n};\r\n\r\n/**\r\n * Combine les classes CSS\r\n */\r\nexport const cn = (...classes: (string | undefined | null | false)[]): string => {\r\n  return classes.filter(Boolean).join(' ');\r\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","import { db, storage } from './firebase';\r\nimport { \r\n  collection, \r\n  doc, \r\n  addDoc, \r\n  updateDoc, \r\n  deleteDoc, \r\n  getDocs, \r\n  getDoc, \r\n  query, \r\n  where, \r\n  orderBy,\r\n  Timestamp,\r\n  writeBatch\r\n} from 'firebase/firestore';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { Seance, CreateSeanceData, Film } from '../types';\r\nimport { generateId } from '../utils/helpers';\r\n\r\nconst SEANCES_COLLECTION = 'seances';\r\nconst FILMS_COLLECTION = 'films';\r\n\r\n/**\r\n * Créer une nouvelle séance avec génération automatique du QR code\r\n */\r\nexport const createSeance = async (data: CreateSeanceData): Promise<Seance> => {\r\n  try {\r\n    // Vérifier qu'il y a exactement 5 films\r\n    if (data.films.length !== 5) {\r\n      throw new Error('Une séance doit contenir exactement 5 films');\r\n    }\r\n\r\n    // Vérifier que tous les films existent\r\n    const filmsPromises = data.films.map(filmId => \r\n      getDoc(doc(db, FILMS_COLLECTION, filmId))\r\n    );\r\n    const filmsSnapshots = await Promise.all(filmsPromises);\r\n    \r\n    const nonExistentFilms = filmsSnapshots\r\n      .map((snapshot, index) => ({ snapshot, filmId: data.films[index] }))\r\n      .filter(({ snapshot }) => !snapshot.exists());\r\n    \r\n    if (nonExistentFilms.length > 0) {\r\n      throw new Error(`Films non trouvés: ${nonExistentFilms.map(f => f.filmId).join(', ')}`);\r\n    }\r\n\r\n    // Générer l'URL du QR code\r\n    const seanceId = generateId();\r\n    const qrCodeUrl = generateQRCodeUrl(seanceId);\r\n\r\n    const seanceData: Omit<Seance, 'id'> = {\r\n      nom: data.nom,\r\n      description: data.description,\r\n      date: data.date,\r\n      heure: data.heure,\r\n      films: data.films,\r\n      qrCodeUrl,\r\n      isActive: true,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    const docRef = await addDoc(collection(db, SEANCES_COLLECTION), seanceData);\r\n    \r\n    return {\r\n      id: docRef.id,\r\n      ...seanceData,\r\n    };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la création de la séance:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer toutes les séances\r\n */\r\nexport const getAllSeances = async (): Promise<Seance[]> => {\r\n  try {\r\n    const q = query(\r\n      collection(db, SEANCES_COLLECTION),\r\n      orderBy('date', 'desc')\r\n    );\r\n    \r\n    const querySnapshot = await getDocs(q);\r\n    const seances: Seance[] = [];\r\n    \r\n    querySnapshot.forEach((doc) => {\r\n      const data = doc.data();\r\n      seances.push({\r\n        id: doc.id,\r\n        nom: data.nom,\r\n        description: data.description,\r\n        date: data.date.toDate(),\r\n        heure: data.heure,\r\n        films: data.films,\r\n        qrCodeUrl: data.qrCodeUrl,\r\n        isActive: data.isActive,\r\n        createdAt: data.createdAt.toDate(),\r\n        updatedAt: data.updatedAt.toDate(),\r\n      });\r\n    });\r\n    \r\n    return seances;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération des séances:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer une séance par son ID\r\n */\r\nexport const getSeanceById = async (seanceId: string): Promise<Seance | null> => {\r\n  try {\r\n    const docRef = doc(db, SEANCES_COLLECTION, seanceId);\r\n    const docSnap = await getDoc(docRef);\r\n    \r\n    if (docSnap.exists()) {\r\n      const data = docSnap.data();\r\n      return {\r\n        id: docSnap.id,\r\n        nom: data.nom,\r\n        description: data.description,\r\n        date: data.date.toDate(),\r\n        heure: data.heure,\r\n        films: data.films,\r\n        qrCodeUrl: data.qrCodeUrl,\r\n        isActive: data.isActive,\r\n        createdAt: data.createdAt.toDate(),\r\n        updatedAt: data.updatedAt.toDate(),\r\n      };\r\n    }\r\n    \r\n    return null;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération de la séance:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer une séance avec ses films\r\n */\r\nexport const getSeanceWithFilms = async (seanceId: string): Promise<{ seance: Seance; films: Film[] } | null> => {\r\n  try {\r\n    const seance = await getSeanceById(seanceId);\r\n    if (!seance) return null;\r\n\r\n    // Récupérer tous les films de la séance\r\n    const filmsPromises = seance.films.map(filmId => \r\n      getDoc(doc(db, FILMS_COLLECTION, filmId))\r\n    );\r\n    const filmsSnapshots = await Promise.all(filmsPromises);\r\n    \r\n    const films: Film[] = [];\r\n    \r\n    for (const snapshot of filmsSnapshots) {\r\n      if (snapshot.exists()) {\r\n        const data = snapshot.data();\r\n        if (data) {\r\n          films.push({\r\n            id: snapshot.id,\r\n            titre: data.titre,\r\n            realisateur: data.realisateur,\r\n            pays: data.pays,\r\n            duree: data.duree,\r\n            annee: data.annee,\r\n            synopsis: data.synopsis,\r\n            posterUrl: data.posterUrl,\r\n            genre: data.genre,\r\n            createdAt: data.createdAt.toDate(),\r\n            updatedAt: data.updatedAt.toDate(),\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return { seance, films };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération de la séance avec films:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Mettre à jour une séance\r\n */\r\nexport const updateSeance = async (seanceId: string, data: Partial<CreateSeanceData>): Promise<void> => {\r\n  try {\r\n    const docRef = doc(db, SEANCES_COLLECTION, seanceId);\r\n    \r\n    const updateData: any = {\r\n      ...data,\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    // Si les films changent, vérifier qu'il y en a 5\r\n    if (data.films && data.films.length !== 5) {\r\n      throw new Error('Une séance doit contenir exactement 5 films');\r\n    }\r\n\r\n    await updateDoc(docRef, updateData);\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour de la séance:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Supprimer une séance\r\n */\r\nexport const deleteSeance = async (seanceId: string): Promise<void> => {\r\n  try {\r\n    const docRef = doc(db, SEANCES_COLLECTION, seanceId);\r\n    await deleteDoc(docRef);\r\n  } catch (error) {\r\n    console.error('Erreur lors de la suppression de la séance:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Activer/désactiver une séance\r\n */\r\nexport const toggleSeanceActive = async (seanceId: string, isActive: boolean): Promise<void> => {\r\n  try {\r\n    const docRef = doc(db, SEANCES_COLLECTION, seanceId);\r\n    await updateDoc(docRef, {\r\n      isActive,\r\n      updatedAt: new Date(),\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la modification du statut de la séance:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer les séances actives\r\n */\r\nexport const getActiveSeances = async (): Promise<Seance[]> => {\r\n  try {\r\n    const q = query(\r\n      collection(db, SEANCES_COLLECTION),\r\n      where('isActive', '==', true),\r\n      orderBy('date', 'desc')\r\n    );\r\n    \r\n    const querySnapshot = await getDocs(q);\r\n    const seances: Seance[] = [];\r\n    \r\n    querySnapshot.forEach((doc) => {\r\n      const data = doc.data();\r\n      seances.push({\r\n        id: doc.id,\r\n        nom: data.nom,\r\n        description: data.description,\r\n        date: data.date.toDate(),\r\n        heure: data.heure,\r\n        films: data.films,\r\n        qrCodeUrl: data.qrCodeUrl,\r\n        isActive: data.isActive,\r\n        createdAt: data.createdAt.toDate(),\r\n        updatedAt: data.updatedAt.toDate(),\r\n      });\r\n    });\r\n    \r\n    return seances;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération des séances actives:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Générer l'URL du QR code pour une séance\r\n */\r\nexport const generateQRCodeUrl = (seanceId: string): string => {\r\n  const baseUrl = window.location.origin;\r\n  const seanceUrl = `${baseUrl}/seance/${seanceId}`;\r\n  \r\n  // Utiliser un service de génération de QR code\r\n  const qrServiceUrl = 'https://api.qrserver.com/v1/create-qr-code/';\r\n  const params = new URLSearchParams({\r\n    size: '300x300',\r\n    data: seanceUrl,\r\n    format: 'png',\r\n  });\r\n  \r\n  return `${qrServiceUrl}?${params.toString()}`;\r\n};\r\n\r\n/**\r\n * Récupérer les statistiques des séances\r\n */\r\nexport const getSeancesStats = async (): Promise<{\r\n  total: number;\r\n  actives: number;\r\n  inactives: number;\r\n  cetteSemaine: number;\r\n}> => {\r\n  try {\r\n    const seances = await getAllSeances();\r\n    const maintenant = new Date();\r\n    const uneSemaine = new Date(maintenant.getTime() + 7 * 24 * 60 * 60 * 1000);\r\n    \r\n    const stats = {\r\n      total: seances.length,\r\n      actives: seances.filter(s => s.isActive).length,\r\n      inactives: seances.filter(s => !s.isActive).length,\r\n      cetteSemaine: seances.filter(s => s.date >= maintenant && s.date <= uneSemaine).length,\r\n    };\r\n    \r\n    return stats;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération des statistiques:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Rechercher des séances par nom\r\n */\r\nexport const searchSeances = async (searchTerm: string): Promise<Seance[]> => {\r\n  try {\r\n    const seances = await getAllSeances();\r\n    const term = searchTerm.toLowerCase();\r\n    \r\n    return seances.filter(seance => \r\n      seance.nom.toLowerCase().includes(term) ||\r\n      (seance.description && seance.description.toLowerCase().includes(term))\r\n    );\r\n  } catch (error) {\r\n    console.error('Erreur lors de la recherche de séances:', error);\r\n    throw error;\r\n  }\r\n}; "],"names":["Clock","createLucideIcon","cx","cy","r","key","points","voteQueue","batchTimeout","isProcessingBatch","addVote","async","_data$commentaire","vote","id","generateId","filmId","data","seanceId","note","commentaire","trim","ipAddress","getIpAddress","undefined","userAgent","getUserAgent","sessionId","generateSessionId","createdAt","Date","voteRef","doc","collection","db","COLLECTIONS","VOTES","setDoc","error","Error","addVoteToQueue","user","_data$commentaire2","push","window","setTimeout","processVoteBatch","checkIfUserVoted","uid","message","length","votesToProcess","batch","writeBatch","forEach","set","commit","console","log","unshift","userId","voteQuery","query","where","getDocs","empty","getVoteQueueStatus","pendingVotes","isProcessing","nextBatchIn","Send","d","Button","_ref","variant","size","loading","icon","children","className","disabled","props","_jsxs","cn","primary","secondary","outline","ghost","danger","sm","md","lg","fill","viewBox","_jsx","stroke","strokeWidth","Card","padding","shadow","none","z","min","max","optional","SeanceVotePage","useParams","navigate","useNavigate","seance","setSeance","useState","films","setFilms","results","setResults","setLoading","voting","setVoting","votes","setVotes","useEffect","seanceWithFilms","getSeanceWithFilms","toast","ROUTES","VOTE","loadSeanceData","handleVote","prev","onClick","seanceFilms","filter","film","includes","ArrowLeft","nom","date","toLocaleDateString","heure","Users","description","Star","map","_results$films","currentVote","filmResults","find","f","posterUrl","src","alt","titre","realisateur","star","type","value","onChange","e","target","placeholder","rows","maxLength","moyenne","totalVotes","Object","keys","votePromises","values","Promise","all","success","RESULTS","now","toString","Math","random","substring","navigator","response","fetch","json","ip","warn","setLocalStorage","localStorage","setItem","JSON","stringify","getLocalStorage","defaultValue","item","getItem","parse","_len2","arguments","classes","Array","_key2","Boolean","join","SEANCES_COLLECTION","FILMS_COLLECTION","createSeance","filmsPromises","getDoc","nonExistentFilms","snapshot","index","exists","qrCodeUrl","generateQRCodeUrl","seanceData","isActive","updatedAt","addDoc","getAllSeances","q","orderBy","querySnapshot","seances","toDate","docRef","docSnap","getSeanceById","filmsSnapshots","pays","duree","annee","synopsis","genre","updateSeance","updateData","updateDoc","deleteSeance","deleteDoc","toggleSeanceActive","baseUrl","location","origin","URLSearchParams","format"],"sourceRoot":""}