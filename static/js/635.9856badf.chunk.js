/*! For license information please see 635.9856badf.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkprix_du_public=self.webpackChunkprix_du_public||[]).push([[635],{1146:(e,t,r)=>{r.d(t,{Vm:()=>n,XP:()=>i,xJ:()=>c});var s=r(4455),a=r(5472);r(8147),r(6925);const l="films",n=async()=>{try{const e=(0,a.P)((0,a.rJ)(s.db,l),(0,a.My)("titre","asc")),t=await(0,a.GG)(e),r=[];return t.forEach(e=>{const t=e.data();r.push({id:e.id,titre:t.titre,realisateur:t.realisateur,pays:t.pays,duree:t.duree,annee:t.annee,synopsis:t.synopsis,posterUrl:t.posterUrl,genre:t.genre,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate()})}),r}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des films:",e),e}},i=async e=>{try{const t=(0,a.H9)(s.db,l,e),r=await(0,a.x7)(t);if(r.exists()){const e=r.data();return{id:r.id,titre:e.titre,realisateur:e.realisateur,pays:e.pays,duree:e.duree,annee:e.annee,synopsis:e.synopsis,posterUrl:e.posterUrl,genre:e.genre,createdAt:e.createdAt.toDate(),updatedAt:e.updatedAt.toDate()}}return null}catch(t){throw console.error("Erreur lors de la r\xe9cup\xe9ration du film:",t),t}},c=async e=>{try{if(0===e.length)return[];const t=e.map(e=>i(e));return(await Promise.all(t)).filter(e=>null!==e)}catch(t){throw console.error("Erreur lors de la r\xe9cup\xe9ration des films par IDs:",t),t}}},5635:(e,t,r)=>{r.r(t),r.d(t,{FilmsPage:()=>d});var s=r(5043);const a=(0,r(1639).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var l=r(3944),n=r(1146),i=r(4413),c=r(3768),o=r(579);const d=()=>{const[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),[m,u]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{const e=await(0,n.Vm)();t(e)}catch(e){c.Ay.error(i.UU.NETWORK_ERROR)}finally{d(!1)}})()},[]);const x=e.filter(e=>e.titre.toLowerCase().includes(m.toLowerCase())||e.realisateur.toLowerCase().includes(m.toLowerCase()));return r?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,o.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement des films..."})]})}):(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,o.jsx)("header",{className:"bg-white shadow-sm",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,o.jsxs)("div",{className:"py-6",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-primary-600",children:"Films en comp\xe9tition"}),(0,o.jsx)("p",{className:"text-secondary-600 mt-1",children:"D\xe9couvrez tous les films du Festival du Film Court de Dinan"})]})})}),(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,o.jsx)("input",{type:"text",placeholder:"Rechercher un film ou un r\xe9alisateur...",value:m,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),0===e.length?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfac"}),(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Aucun film disponible"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Les films seront ajout\xe9s par l'administrateur."})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsxs)("p",{className:"text-gray-600",children:[x.length," film",x.length>1?"s":""," trouv\xe9",x.length>1?"s":"",m&&` pour "${m}"`]})}),(0,o.jsx)("div",{className:"films-grid",children:x.map(e=>(0,o.jsxs)("div",{className:"card hover:shadow-lg transition-shadow",children:[e.posterUrl&&(0,o.jsx)("img",{src:e.posterUrl,alt:e.titre,className:"w-full h-64 object-cover rounded-lg mb-4"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:e.titre}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["R\xe9alis\xe9 par ",(0,o.jsx)("span",{className:"font-medium",children:e.realisateur})]}),(0,o.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:e.synopsis}),(0,o.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,o.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,o.jsx)(l.A,{className:"w-4 h-4 text-yellow-400 mr-1"}),(0,o.jsx)("span",{children:"En comp\xe9tition"})]}),(0,o.jsxs)("div",{className:"text-xs text-gray-400",children:["Ajout\xe9 le ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]})]})]},e.id))}),m&&0===x.length&&(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd0d"}),(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun film trouv\xe9"}),(0,o.jsxs)("p",{className:"text-gray-600",children:['Aucun film ne correspond \xe0 votre recherche "',m,'"']}),(0,o.jsx)("button",{onClick:()=>u(""),className:"mt-4 text-primary-600 hover:text-primary-500",children:"Voir tous les films"})]})]})]})]})}},6925:(e,t,r)=>{r.d(t,{$C:()=>s,$t:()=>l,Lg:()=>c,SP:()=>n,ZB:()=>i,cn:()=>o,f6:()=>a});r(4413);const s=()=>Date.now().toString(36)+Math.random().toString(36).substring(2),a=()=>`${Date.now()}-${Math.random().toString(36).substring(2)}`,l=()=>navigator.userAgent,n=async()=>{try{const e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch(e){return console.warn("Impossible de r\xe9cup\xe9rer l'IP:",e),null}},i=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn("Erreur lors du stockage local:",r)}},c=(e,t)=>{try{const r=localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.warn("Erreur lors de la r\xe9cup\xe9ration locale:",r),t}},o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}}}]);
//# sourceMappingURL=635.9856badf.chunk.js.map