{"version":3,"file":"static/js/422.91232bc5.chunk.js","mappings":"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","sources":["services/filmService.ts","../node_modules/lucide-react/src/icons/trending-up.ts","pages/ResultsPage.tsx","services/voteService.ts","../node_modules/lucide-react/src/icons/bar-chart-3.ts","utils/helpers.ts","services/seanceService.ts","../node_modules/lucide-react/src/icons/eye.ts"],"sourcesContent":["import { db, storage } from './firebase';\nimport { \n  collection, \n  doc, \n  addDoc, \n  updateDoc, \n  deleteDoc, \n  getDocs, \n  getDoc, \n  query, \n  where, \n  orderBy,\n  limit\n} from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\nimport { Film, CreateFilmData } from '../types';\nimport { generateId } from '../utils/helpers';\n\nconst FILMS_COLLECTION = 'films';\nconst POSTERS_FOLDER = 'posters';\n\n/**\n * Créer un nouveau film avec upload du poster\n */\nexport const createFilm = async (data: CreateFilmData): Promise<Film> => {\n  try {\n    let posterUrl: string | undefined;\n\n    // Upload du poster si fourni\n    if (data.poster) {\n      posterUrl = await uploadPoster(data.poster);\n    }\n\n    const filmData: Omit<Film, 'id'> = {\n      titre: data.titre,\n      realisateur: data.realisateur,\n      pays: data.pays,\n      duree: data.duree,\n      annee: data.annee,\n      synopsis: data.synopsis,\n      posterUrl,\n      genre: data.genre,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    const docRef = await addDoc(collection(db, FILMS_COLLECTION), filmData);\n    \n    return {\n      id: docRef.id,\n      ...filmData,\n    };\n  } catch (error) {\n    console.error('Erreur lors de la création du film:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer tous les films\n */\nexport const getAllFilms = async (): Promise<Film[]> => {\n  try {\n    const q = query(\n      collection(db, FILMS_COLLECTION),\n      orderBy('titre', 'asc')\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const films: Film[] = [];\n    \n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      films.push({\n        id: doc.id,\n        titre: data.titre,\n        realisateur: data.realisateur,\n        pays: data.pays,\n        duree: data.duree,\n        annee: data.annee,\n        synopsis: data.synopsis,\n        posterUrl: data.posterUrl,\n        genre: data.genre,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      });\n    });\n    \n    return films;\n  } catch (error) {\n    console.error('Erreur lors de la récupération des films:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer un film par son ID\n */\nexport const getFilmById = async (filmId: string): Promise<Film | null> => {\n  try {\n    const docRef = doc(db, FILMS_COLLECTION, filmId);\n    const docSnap = await getDoc(docRef);\n    \n    if (docSnap.exists()) {\n      const data = docSnap.data();\n      return {\n        id: docSnap.id,\n        titre: data.titre,\n        realisateur: data.realisateur,\n        pays: data.pays,\n        duree: data.duree,\n        annee: data.annee,\n        synopsis: data.synopsis,\n        posterUrl: data.posterUrl,\n        genre: data.genre,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      };\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Erreur lors de la récupération du film:', error);\n    throw error;\n  }\n};\n\n/**\n * Mettre à jour un film\n */\nexport const updateFilm = async (filmId: string, data: Partial<CreateFilmData>): Promise<void> => {\n  try {\n    const docRef = doc(db, FILMS_COLLECTION, filmId);\n    \n    const updateData: any = {\n      ...data,\n      updatedAt: new Date(),\n    };\n\n    // Upload du nouveau poster si fourni\n    if (data.poster) {\n      updateData.posterUrl = await uploadPoster(data.poster);\n    }\n\n    await updateDoc(docRef, updateData);\n  } catch (error) {\n    console.error('Erreur lors de la mise à jour du film:', error);\n    throw error;\n  }\n};\n\n/**\n * Supprimer un film\n */\nexport const deleteFilm = async (filmId: string): Promise<void> => {\n  try {\n    // Récupérer le film pour supprimer le poster\n    const film = await getFilmById(filmId);\n    if (film?.posterUrl) {\n      await deletePoster(film.posterUrl);\n    }\n\n    const docRef = doc(db, FILMS_COLLECTION, filmId);\n    await deleteDoc(docRef);\n  } catch (error) {\n    console.error('Erreur lors de la suppression du film:', error);\n    throw error;\n  }\n};\n\n/**\n * Upload d'un poster\n */\nexport const uploadPoster = async (file: File): Promise<string> => {\n  try {\n    const fileName = `${generateId()}_${file.name}`;\n    const storageRef = ref(storage, `${POSTERS_FOLDER}/${fileName}`);\n    \n    const snapshot = await uploadBytes(storageRef, file);\n    const downloadURL = await getDownloadURL(snapshot.ref);\n    \n    return downloadURL;\n  } catch (error) {\n    console.error('Erreur lors de l\\'upload du poster:', error);\n    throw error;\n  }\n};\n\n/**\n * Supprimer un poster\n */\nexport const deletePoster = async (posterUrl: string): Promise<void> => {\n  try {\n    const storageRef = ref(storage, posterUrl);\n    await deleteObject(storageRef);\n  } catch (error) {\n    console.error('Erreur lors de la suppression du poster:', error);\n    // Ne pas throw l'erreur car ce n'est pas critique\n  }\n};\n\n/**\n * Rechercher des films\n */\nexport const searchFilms = async (searchTerm: string): Promise<Film[]> => {\n  try {\n    const films = await getAllFilms();\n    const term = searchTerm.toLowerCase();\n    \n    return films.filter(film => \n      film.titre.toLowerCase().includes(term) ||\n      film.realisateur.toLowerCase().includes(term) ||\n      film.pays.toLowerCase().includes(term) ||\n      film.genre.toLowerCase().includes(term)\n    );\n  } catch (error) {\n    console.error('Erreur lors de la recherche de films:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer les films par genre\n */\nexport const getFilmsByGenre = async (genre: string): Promise<Film[]> => {\n  try {\n    const q = query(\n      collection(db, FILMS_COLLECTION),\n      where('genre', '==', genre),\n      orderBy('titre', 'asc')\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const films: Film[] = [];\n    \n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      films.push({\n        id: doc.id,\n        titre: data.titre,\n        realisateur: data.realisateur,\n        pays: data.pays,\n        duree: data.duree,\n        annee: data.annee,\n        synopsis: data.synopsis,\n        posterUrl: data.posterUrl,\n        genre: data.genre,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      });\n    });\n    \n    return films;\n  } catch (error) {\n    console.error('Erreur lors de la récupération des films par genre:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer les films récents\n */\nexport const getRecentFilms = async (limitCount: number = 10): Promise<Film[]> => {\n  try {\n    const q = query(\n      collection(db, FILMS_COLLECTION),\n      orderBy('createdAt', 'desc'),\n      limit(limitCount)\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const films: Film[] = [];\n    \n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      films.push({\n        id: doc.id,\n        titre: data.titre,\n        realisateur: data.realisateur,\n        pays: data.pays,\n        duree: data.duree,\n        annee: data.annee,\n        synopsis: data.synopsis,\n        posterUrl: data.posterUrl,\n        genre: data.genre,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      });\n    });\n    \n    return films;\n  } catch (error) {\n    console.error('Erreur lors de la récupération des films récents:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer les statistiques des films\n */\nexport const getFilmsStats = async (): Promise<{\n  total: number;\n  parGenre: Record<string, number>;\n  parPays: Record<string, number>;\n  parAnnee: Record<number, number>;\n}> => {\n  try {\n    const films = await getAllFilms();\n    \n    const stats = {\n      total: films.length,\n      parGenre: {} as Record<string, number>,\n      parPays: {} as Record<string, number>,\n      parAnnee: {} as Record<number, number>,\n    };\n    \n    films.forEach(film => {\n      // Compter par genre\n      stats.parGenre[film.genre] = (stats.parGenre[film.genre] || 0) + 1;\n      \n      // Compter par pays\n      stats.parPays[film.pays] = (stats.parPays[film.pays] || 0) + 1;\n      \n      // Compter par année\n      stats.parAnnee[film.annee] = (stats.parAnnee[film.annee] || 0) + 1;\n    });\n    \n    return stats;\n  } catch (error) {\n    console.error('Erreur lors de la récupération des statistiques des films:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer les genres disponibles\n */\nexport const getAvailableGenres = async (): Promise<string[]> => {\n  try {\n    const films = await getAllFilms();\n    const genres = Array.from(new Set(films.map(film => film.genre)));\n    return genres.sort();\n  } catch (error) {\n    console.error('Erreur lors de la récupération des genres:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer plusieurs films par leurs IDs\n */\nexport const getFilmsByIds = async (filmIds: string[]): Promise<Film[]> => {\n  try {\n    if (filmIds.length === 0) return [];\n    \n    // Récupérer les films en parallèle\n    const filmPromises = filmIds.map(id => getFilmById(id));\n    const films = await Promise.all(filmPromises);\n    \n    // Filtrer les films null et retourner\n    return films.filter((film): film is Film => film !== null);\n  } catch (error) {\n    console.error('Erreur lors de la récupération des films par IDs:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer les pays disponibles\n */\nexport const getAvailableCountries = async (): Promise<string[]> => {\n  try {\n    const films = await getAllFilms();\n    const countries = Array.from(new Set(films.map(film => film.pays)));\n    return countries.sort();\n  } catch (error) {\n    console.error('Erreur lors de la récupération des pays:', error);\n    throw error;\n  }\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name TrendingUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSIyMiA3IDEzLjUgMTUuNSA4LjUgMTAuNSAyIDE3IiAvPgogIDxwb2x5bGluZSBwb2ludHM9IjE2IDcgMjIgNyAyMiAxMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/trending-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TrendingUp = createLucideIcon('TrendingUp', [\n  ['polyline', { points: '22 7 13.5 15.5 8.5 10.5 2 17', key: '126l90' }],\n  ['polyline', { points: '16 7 22 7 22 13', key: 'kwv8wd' }],\n]);\n\nexport default TrendingUp;\n","import React, { useState, useEffect } from 'react';\r\nimport { BarChart3, Star, Users, Calendar, Clock, TrendingUp, Award, Eye, Filter } from 'lucide-react';\r\nimport { getAllSeances } from '../services/seanceService';\r\nimport { getSeanceResults } from '../services/voteService';\r\nimport { getFilmById, getFilmsByIds } from '../services/filmService';\r\nimport { Seance, Film } from '../types';\r\n\r\ninterface FilmResult {\r\n  filmId: string;\r\n  titre: string;\r\n  realisateur: string;\r\n  posterUrl: string;\r\n  totalVotes: number;\r\n  moyenneNote: number;\r\n  distributionNotes: Record<number, number>;\r\n  position: number;\r\n}\r\n\r\ninterface SeanceResult {\r\n  seance: Seance;\r\n  films: FilmResult[];\r\n  totalVotes: number;\r\n  participationRate: number;\r\n}\r\n\r\nexport const ResultsPage: React.FC = () => {\r\n  const [seances, setSeances] = useState<Seance[]>([]);\r\n  const [selectedSeance, setSelectedSeance] = useState<string>('all');\r\n  const [results, setResults] = useState<SeanceResult[]>([]);\r\n  const [globalResults, setGlobalResults] = useState<FilmResult[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [sortBy, setSortBy] = useState<'votes' | 'rating' | 'name'>('rating');\r\n\r\n  // Charger les séances et résultats\r\n  useEffect(() => {\r\n    loadResults();\r\n  }, []);\r\n\r\n  const loadResults = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // Charger toutes les séances\r\n      const allSeances = await getAllSeances();\r\n      setSeances(allSeances);\r\n\r\n      // Charger les résultats pour chaque séance\r\n      const seanceResults: SeanceResult[] = [];\r\n      const allFilmsMap = new Map<string, { votes: number; totalRating: number; count: number }>();\r\n\r\n      for (const seance of allSeances) {\r\n        try {\r\n          const seanceResult = await getSeanceResults(seance.id);\r\n          \r\n          // Récupérer les détails des films en batch\r\n          const filmIds = seanceResult.films.map(f => f.filmId);\r\n          const films = await getFilmsByIds(filmIds);\r\n          const filmsMap = new Map(films.map(film => [film.id, film]));\r\n          \r\n          const filmsWithDetails: FilmResult[] = seanceResult.films.map((filmResult) => {\r\n            const film = filmsMap.get(filmResult.filmId);\r\n            const filmDetails = {\r\n              titre: film?.titre || `Film ${filmResult.filmId.slice(0, 8)}`,\r\n              realisateur: film?.realisateur || 'Réalisateur inconnu',\r\n              posterUrl: film?.posterUrl || 'https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=300&h=450&fit=crop',\r\n            };\r\n\r\n            // Ajouter aux statistiques globales\r\n            if (!allFilmsMap.has(filmResult.filmId)) {\r\n              allFilmsMap.set(filmResult.filmId, { votes: 0, totalRating: 0, count: 0 });\r\n            }\r\n            const globalStats = allFilmsMap.get(filmResult.filmId)!;\r\n            globalStats.votes += filmResult.totalVotes;\r\n            globalStats.totalRating += filmResult.moyenneNote * filmResult.totalVotes;\r\n            globalStats.count += 1;\r\n\r\n            return {\r\n              ...filmResult,\r\n              ...filmDetails,\r\n              position: 0, // Sera calculé plus tard\r\n            };\r\n          });\r\n\r\n          // Trier et positionner les films\r\n          const sortedFilms = filmsWithDetails.sort((a, b) => b.moyenneNote - a.moyenneNote);\r\n          sortedFilms.forEach((film, index) => {\r\n            film.position = index + 1;\r\n          });\r\n\r\n          seanceResults.push({\r\n            seance,\r\n            films: sortedFilms,\r\n            totalVotes: seanceResult.totalVotes,\r\n            participationRate: Math.round((seanceResult.totalVotes / 50) * 100), // Estimation\r\n          });\r\n        } catch (error) {\r\n          console.error(`Erreur pour la séance ${seance.id}:`, error);\r\n        }\r\n      }\r\n\r\n      setResults(seanceResults);\r\n\r\n      // Calculer les résultats globaux avec les vrais détails des films\r\n      const allFilmIds = Array.from(allFilmsMap.keys());\r\n      const allFilms = await getFilmsByIds(allFilmIds);\r\n      const filmsMap = new Map(allFilms.map(film => [film.id, film]));\r\n      \r\n      const globalFilms: FilmResult[] = Array.from(allFilmsMap.entries()).map(([filmId, stats]) => {\r\n        const film = filmsMap.get(filmId);\r\n        return {\r\n          filmId,\r\n          titre: film?.titre || `Film ${filmId.slice(0, 8)}`,\r\n          realisateur: film?.realisateur || 'Réalisateur inconnu',\r\n          posterUrl: film?.posterUrl || 'https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=300&h=450&fit=crop',\r\n          totalVotes: stats.votes,\r\n          moyenneNote: stats.votes > 0 ? Math.round((stats.totalRating / stats.votes) * 10) / 10 : 0,\r\n          distributionNotes: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 },\r\n          position: 0,\r\n        };\r\n      });\r\n\r\n      // Trier les résultats globaux\r\n      const sortedGlobalFilms = sortFilms(globalFilms, sortBy);\r\n      sortedGlobalFilms.forEach((film, index) => {\r\n        film.position = index + 1;\r\n      });\r\n\r\n      setGlobalResults(sortedGlobalFilms);\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement des résultats:', error);\r\n      setError('Erreur lors du chargement des résultats');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const sortFilms = (films: FilmResult[], sortType: 'votes' | 'rating' | 'name'): FilmResult[] => {\r\n    return [...films].sort((a, b) => {\r\n      switch (sortType) {\r\n        case 'votes':\r\n          return b.totalVotes - a.totalVotes;\r\n        case 'rating':\r\n          return b.moyenneNote - a.moyenneNote;\r\n        case 'name':\r\n          return a.titre.localeCompare(b.titre);\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n  };\r\n\r\n  const formatDate = (date: Date): string => {\r\n    return new Intl.DateTimeFormat('fr-FR', {\r\n      weekday: 'long',\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n    }).format(date);\r\n  };\r\n\r\n  const getRatingColor = (rating: number): string => {\r\n    if (rating >= 4.5) return 'text-green-600';\r\n    if (rating >= 4.0) return 'text-blue-600';\r\n    if (rating >= 3.5) return 'text-yellow-600';\r\n    if (rating >= 3.0) return 'text-orange-600';\r\n    return 'text-red-600';\r\n  };\r\n\r\n  const getPositionBadge = (position: number): JSX.Element => {\r\n    if (position === 1) {\r\n      return <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n        🥇 1er\r\n      </span>;\r\n    }\r\n    if (position === 2) {\r\n      return <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\r\n        🥈 2ème\r\n      </span>;\r\n    }\r\n    if (position === 3) {\r\n      return <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800\">\r\n        🥉 3ème\r\n      </span>;\r\n    }\r\n    return <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600\">\r\n      #{position}\r\n    </span>;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600 dark:text-gray-400\">Chargement des résultats...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-red-500 text-6xl mb-4\">⚠️</div>\r\n          <h2 className=\"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2\">Erreur</h2>\r\n          <p className=\"text-gray-600 dark:text-gray-400 mb-4\">{error}</p>\r\n          <button \r\n            onClick={loadResults}\r\n            className=\"btn-festival bg-primary-600 hover:bg-primary-700\"\r\n          >\r\n            Réessayer\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const selectedResults = selectedSeance === 'all' \r\n    ? globalResults \r\n    : results.find(r => r.seance.id === selectedSeance)?.films || [];\r\n\r\n  const currentSeance = selectedSeance === 'all' \r\n    ? null \r\n    : results.find(r => r.seance.id === selectedSeance);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n      {/* Header */}\r\n      <header className=\"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"py-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-primary-600 dark:text-primary-400\">\r\n                  📊 Résultats du Festival\r\n                </h1>\r\n                <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\r\n                  Découvrez les films les plus appréciés du festival\r\n                </p>\r\n              </div>\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400\">\r\n                  <Users className=\"w-4 h-4\" />\r\n                  <span>{seances.length} séances</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400\">\r\n                  <Star className=\"w-4 h-4\" />\r\n                  <span>{globalResults.length} films</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Filtres et contrôles */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between\">\r\n            {/* Sélecteur de séance */}\r\n            <div className=\"flex items-center space-x-4\">\r\n              <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                Séance :\r\n              </label>\r\n              <select\r\n                value={selectedSeance}\r\n                onChange={(e) => setSelectedSeance(e.target.value)}\r\n                className=\"input-field min-w-[200px]\"\r\n              >\r\n                <option value=\"all\">Toutes les séances</option>\r\n                {seances.map((seance) => (\r\n                  <option key={seance.id} value={seance.id}>\r\n                    {seance.nom} - {formatDate(seance.date)} {seance.heure}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Tri */}\r\n            <div className=\"flex items-center space-x-4\">\r\n              <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                Trier par :\r\n              </label>\r\n              <select\r\n                value={sortBy}\r\n                onChange={(e) => setSortBy(e.target.value as 'votes' | 'rating' | 'name')}\r\n                className=\"input-field\"\r\n              >\r\n                <option value=\"rating\">Note moyenne</option>\r\n                <option value=\"votes\">Nombre de votes</option>\r\n                <option value=\"name\">Nom du film</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Statistiques de la séance sélectionnée */}\r\n          {currentSeance && (\r\n            <div className=\"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n              <div className=\"card text-center\">\r\n                <Calendar className=\"w-8 h-8 text-primary-600 mx-auto mb-2\" />\r\n                <h3 className=\"font-semibold text-gray-900 dark:text-gray-100 mb-1\">\r\n                  {formatDate(currentSeance.seance.date)}\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                  {currentSeance.seance.heure}\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"card text-center\">\r\n                <Users className=\"w-8 h-8 text-primary-600 mx-auto mb-2\" />\r\n                <h3 className=\"font-semibold text-gray-900 dark:text-gray-100 mb-1\">\r\n                  {currentSeance.totalVotes}\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                  Votes totaux\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"card text-center\">\r\n                <TrendingUp className=\"w-8 h-8 text-primary-600 mx-auto mb-2\" />\r\n                <h3 className=\"font-semibold text-gray-900 dark:text-gray-100 mb-1\">\r\n                  {currentSeance.participationRate}%\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                  Taux de participation\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"card text-center\">\r\n                <Award className=\"w-8 h-8 text-primary-600 mx-auto mb-2\" />\r\n                <h3 className=\"font-semibold text-gray-900 dark:text-gray-100 mb-1\">\r\n                  {currentSeance.films[0]?.titre || 'N/A'}\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                  Film gagnant\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Liste des résultats */}\r\n        <div className=\"space-y-6\">\r\n          {selectedResults.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"text-6xl mb-4\">📊</div>\r\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2\">\r\n                Aucun résultat disponible\r\n              </h2>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">\r\n                Les résultats apparaîtront ici une fois que les votes auront été comptabilisés.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            selectedResults.map((film, index) => (\r\n              <div key={film.filmId} className=\"card hover:shadow-lg transition-shadow\">\r\n                <div className=\"flex items-start space-x-4\">\r\n                  {/* Position */}\r\n                  <div className=\"flex-shrink-0 w-16 text-center\">\r\n                    {getPositionBadge(film.position)}\r\n                  </div>\r\n\r\n                  {/* Poster */}\r\n                  <div className=\"flex-shrink-0\">\r\n                    <img\r\n                      src={film.posterUrl}\r\n                      alt={film.titre}\r\n                      className=\"w-20 h-28 object-cover rounded-lg shadow-md\"\r\n                      onError={(e) => {\r\n                        const target = e.target as HTMLImageElement;\r\n                        target.src = 'https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=300&h=450&fit=crop';\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Informations du film */}\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1\">\r\n                          {film.titre}\r\n                        </h3>\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\r\n                          Réalisé par {film.realisateur}\r\n                        </p>\r\n                        \r\n                        {/* Statistiques */}\r\n                        <div className=\"flex items-center space-x-6 text-sm\">\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Star className=\"w-4 h-4 text-yellow-500\" />\r\n                            <span className={`font-semibold ${getRatingColor(film.moyenneNote)}`}>\r\n                              {film.moyenneNote.toFixed(1)}\r\n                            </span>\r\n                            <span className=\"text-gray-500 dark:text-gray-400\">/5</span>\r\n                          </div>\r\n                          \r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Users className=\"w-4 h-4 text-blue-500\" />\r\n                            <span className=\"font-semibold text-gray-900 dark:text-gray-100\">\r\n                              {film.totalVotes}\r\n                            </span>\r\n                            <span className=\"text-gray-500 dark:text-gray-400\">votes</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Graphique de distribution */}\r\n                      <div className=\"flex-shrink-0 ml-4\">\r\n                        <div className=\"flex items-end space-x-1 h-16\">\r\n                          {[1, 2, 3, 4, 5].map((note) => {\r\n                            const count = film.distributionNotes[note] || 0;\r\n                            const maxCount = Math.max(...Object.values(film.distributionNotes));\r\n                            const height = maxCount > 0 ? (count / maxCount) * 100 : 0;\r\n                            \r\n                            return (\r\n                              <div key={note} className=\"flex flex-col items-center\">\r\n                                <div \r\n                                  className=\"w-3 bg-primary-200 dark:bg-primary-700 rounded-t\"\r\n                                  style={{ height: `${height}%` }}\r\n                                />\r\n                                <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                                  {note}\r\n                                </span>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {/* Résumé global */}\r\n        {selectedSeance === 'all' && globalResults.length > 0 && (\r\n          <div className=\"mt-12\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6\">\r\n              📈 Résumé Global du Festival\r\n            </h2>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <div className=\"card text-center\">\r\n                <BarChart3 className=\"w-12 h-12 text-primary-600 mx-auto mb-4\" />\r\n                <h3 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2\">\r\n                  {globalResults.reduce((sum, film) => sum + film.totalVotes, 0)}\r\n                </h3>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">Votes totaux</p>\r\n              </div>\r\n              \r\n              <div className=\"card text-center\">\r\n                <Star className=\"w-12 h-12 text-primary-600 mx-auto mb-4\" />\r\n                <h3 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2\">\r\n                  {(globalResults.reduce((sum, film) => sum + film.moyenneNote, 0) / globalResults.length).toFixed(1)}\r\n                </h3>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">Note moyenne globale</p>\r\n              </div>\r\n              \r\n              <div className=\"card text-center\">\r\n                <Eye className=\"w-12 h-12 text-primary-600 mx-auto mb-4\" />\r\n                <h3 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2\">\r\n                  {globalResults.length}\r\n                </h3>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">Films évalués</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}; ","import {\n  collection,\n  doc,\n  deleteDoc,\n  getDocs,\n  query,\n  where,\n  orderBy,\n  onSnapshot,\n  writeBatch,\n  setDoc,\n} from 'firebase/firestore';\nimport { db } from './firebase';\nimport { Vote, VoteFormData } from '../types';\nimport { COLLECTIONS } from '../utils/constants';\nimport { generateId, generateSessionId, getUserAgent, getIpAddress } from '../utils/helpers';\n\n// Queue pour les votes en batch\nlet voteQueue: Vote[] = [];\nlet batchTimeout: number | null = null;\nlet isProcessingBatch = false;\n\n/**\n * Ajouter un vote directement (pour les séances)\n */\nexport const addVote = async (data: {\n  filmId: string;\n  seanceId?: string;\n  note: number;\n  commentaire?: string;\n}): Promise<void> => {\n  try {\n    const vote: Vote = {\n      id: generateId(),\n      filmId: data.filmId,\n      seanceId: data.seanceId || '',\n      note: data.note,\n      commentaire: data.commentaire?.trim(),\n      ipAddress: await getIpAddress() || undefined,\n      userAgent: getUserAgent(),\n      sessionId: generateSessionId(),\n      createdAt: new Date(),\n    };\n\n    // Ajouter directement à Firestore\n    const voteRef = doc(collection(db, COLLECTIONS.VOTES));\n    await setDoc(voteRef, {\n      ...vote,\n      id: voteRef.id,\n    } as any);\n  } catch (error: any) {\n    throw new Error('Erreur lors de l\\'ajout du vote');\n  }\n};\n\n/**\n * Ajouter un vote à la queue\n */\nexport const addVoteToQueue = async (\n  filmId: string,\n  data: VoteFormData,\n  user?: { uid: string; email: string } | null,\n  sessionId?: string\n): Promise<void> => {\n  try {\n    const vote: Vote = {\n      id: generateId(),\n      filmId,\n      seanceId: '',\n      note: data.note,\n      commentaire: data.commentaire?.trim(),\n      ipAddress: await getIpAddress() || undefined,\n      userAgent: getUserAgent(),\n      sessionId: sessionId || generateSessionId(),\n      createdAt: new Date(),\n    };\n\n    voteQueue.push(vote);\n\n    // Démarrer le timer pour l'envoi en batch\n    if (!batchTimeout) {\n      batchTimeout = window.setTimeout(() => {\n        processVoteBatch();\n      }, 5000); // 5 secondes de délai\n    }\n\n    // Vérifier si l'utilisateur a déjà voté pour ce film\n    const hasVoted = await checkIfUserVoted(filmId, user?.uid, sessionId);\n    if (hasVoted) {\n      throw new Error('Vous avez déjà voté pour ce film');\n    }\n  } catch (error: any) {\n    throw new Error(error.message || 'Erreur lors de l\\'ajout du vote');\n  }\n};\n\n/**\n * Traiter la queue de votes en batch\n */\nconst processVoteBatch = async (): Promise<void> => {\n  if (isProcessingBatch || voteQueue.length === 0) {\n    return;\n  }\n\n  isProcessingBatch = true;\n  const votesToProcess = [...voteQueue];\n  voteQueue = [];\n  batchTimeout = null;\n\n  try {\n    const batch = writeBatch(db);\n\n    // Ajouter tous les votes au batch\n    votesToProcess.forEach((vote) => {\n      const voteRef = doc(collection(db, COLLECTIONS.VOTES));\n      batch.set(voteRef, {\n        ...vote,\n        id: voteRef.id,\n      });\n    });\n\n    // Exécuter le batch\n    await batch.commit();\n\n    console.log(`${votesToProcess.length} votes envoyés avec succès`);\n  } catch (error) {\n    console.error('Erreur lors de l\\'envoi du batch:', error);\n    \n    // Remettre les votes dans la queue pour retry\n    voteQueue.unshift(...votesToProcess);\n    \n    // Retry après 10 secondes\n    setTimeout(() => {\n      isProcessingBatch = false;\n      if (voteQueue.length > 0) {\n        processVoteBatch();\n      }\n    }, 10000);\n  } finally {\n    isProcessingBatch = false;\n  }\n};\n\n/**\n * Vérifier si un utilisateur a déjà voté pour un film\n */\nexport const checkIfUserVoted = async (\n  filmId: string,\n  userId?: string,\n  sessionId?: string\n): Promise<boolean> => {\n  try {\n    let voteQuery;\n\n    if (userId) {\n      // Utilisateur connecté\n      voteQuery = query(\n        collection(db, COLLECTIONS.VOTES),\n        where('filmId', '==', filmId),\n        where('userId', '==', userId)\n      );\n    } else if (sessionId) {\n      // Vote anonyme\n      voteQuery = query(\n        collection(db, COLLECTIONS.VOTES),\n        where('filmId', '==', filmId),\n        where('sessionId', '==', sessionId)\n      );\n    } else {\n      return false;\n    }\n\n    const querySnapshot = await getDocs(voteQuery);\n    return !querySnapshot.empty;\n  } catch (error) {\n    console.error('Erreur lors de la vérification du vote:', error);\n    return false;\n  }\n};\n\n/**\n * Récupérer les votes d'un film\n */\nexport const getFilmVotes = async (filmId: string): Promise<Vote[]> => {\n  try {\n    const votesQuery = query(\n      collection(db, COLLECTIONS.VOTES),\n      where('filmId', '==', filmId),\n      orderBy('createdAt', 'desc')\n    );\n\n    const querySnapshot = await getDocs(votesQuery);\n    const votes: Vote[] = [];\n\n    querySnapshot.forEach((doc) => {\n      const voteData = doc.data();\n      votes.push({\n        ...voteData,\n        id: doc.id,\n        createdAt: voteData.createdAt?.toDate() || new Date(),\n      } as Vote);\n    });\n\n    return votes;\n  } catch (error: any) {\n    throw new Error('Erreur lors de la récupération des votes');\n  }\n};\n\n/**\n * Supprimer un vote\n */\nexport const deleteVote = async (voteId: string): Promise<void> => {\n  try {\n    await deleteDoc(doc(db, COLLECTIONS.VOTES, voteId));\n  } catch (error: any) {\n    throw new Error('Erreur lors de la suppression du vote');\n  }\n};\n\n/**\n * Récupérer les statistiques d'un film\n */\nexport const getFilmStats = async (filmId: string): Promise<{\n  filmId: string;\n  titre: string;\n  totalVotes: number;\n  moyenneNote: number;\n  distributionNotes: Record<number, number>;\n  commentaires: string[];\n}> => {\n  try {\n    const votes = await getFilmVotes(filmId);\n    const ratings = votes.map(vote => vote.note);\n    \n    const distribution: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\n    ratings.forEach(rating => {\n      if (rating >= 1 && rating <= 5) {\n        distribution[rating]++;\n      }\n    });\n\n    const moyenne = ratings.length > 0 \n      ? Math.round((ratings.reduce((sum, r) => sum + r, 0) / ratings.length) * 10) / 10\n      : 0;\n\n    const commentaires = votes\n      .filter(vote => vote.commentaire)\n      .map(vote => vote.commentaire!)\n      .slice(0, 10); // Limiter à 10 commentaires\n\n    return {\n      filmId,\n      titre: '', // Sera rempli par l'appelant\n      totalVotes: votes.length,\n      moyenneNote: moyenne,\n      distributionNotes: distribution,\n      commentaires,\n    };\n  } catch (error: any) {\n    throw new Error('Erreur lors du calcul des statistiques');\n  }\n};\n\n/**\n * Écouter les changements de votes pour un film\n */\nexport const onVotesChange = (filmId: string, callback: (votes: Vote[]) => void) => {\n  const votesQuery = query(\n    collection(db, COLLECTIONS.VOTES),\n    where('filmId', '==', filmId),\n    orderBy('createdAt', 'desc')\n  );\n\n  return onSnapshot(votesQuery, (querySnapshot) => {\n    const votes: Vote[] = [];\n\n    querySnapshot.forEach((doc) => {\n      const voteData = doc.data();\n      votes.push({\n        ...voteData,\n        id: doc.id,\n        createdAt: voteData.createdAt?.toDate() || new Date(),\n      } as Vote);\n    });\n\n    callback(votes);\n  });\n};\n\n/**\n * Récupérer le statut de la queue de votes\n */\nexport const getVoteQueueStatus = () => {\n  return {\n    pendingVotes: voteQueue.length,\n    isProcessing: isProcessingBatch,\n    nextBatchIn: batchTimeout ? 5000 : 0,\n  };\n};\n\n/**\n * Forcer l'envoi immédiat de la queue\n */\nexport const forceProcessBatch = async (): Promise<void> => {\n  if (batchTimeout) {\n    clearTimeout(batchTimeout);\n    batchTimeout = null;\n  }\n  await processVoteBatch();\n};\n\n/**\n * Récupérer les résultats d'une séance\n */\nexport const getSeanceResults = async (seanceId: string): Promise<{\n  seanceId: string;\n  totalVotes: number;\n  films: Array<{\n    filmId: string;\n    titre: string;\n    totalVotes: number;\n    moyenneNote: number;\n    distributionNotes: Record<number, number>;\n  }>;\n}> => {\n  try {\n    // Récupérer tous les votes de la séance\n    const votesQuery = query(\n      collection(db, COLLECTIONS.VOTES),\n      where('seanceId', '==', seanceId),\n      orderBy('createdAt', 'desc')\n    );\n\n    const querySnapshot = await getDocs(votesQuery);\n    const votes: Vote[] = [];\n\n    querySnapshot.forEach((doc) => {\n      const voteData = doc.data();\n      votes.push({\n        ...voteData,\n        id: doc.id,\n        createdAt: voteData.createdAt?.toDate() || new Date(),\n      } as Vote);\n    });\n\n    // Grouper les votes par film\n    const filmVotes: Record<string, Vote[]> = {};\n    votes.forEach(vote => {\n      if (!filmVotes[vote.filmId]) {\n        filmVotes[vote.filmId] = [];\n      }\n      filmVotes[vote.filmId].push(vote);\n    });\n\n    // Calculer les statistiques pour chaque film\n    const films = Object.entries(filmVotes).map(([filmId, filmVotes]) => {\n      const ratings = filmVotes.map(vote => vote.note);\n      const distribution: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\n      \n      ratings.forEach(rating => {\n        if (rating >= 1 && rating <= 5) {\n          distribution[rating]++;\n        }\n      });\n\n      const moyenne = ratings.length > 0 \n        ? Math.round((ratings.reduce((sum, r) => sum + r, 0) / ratings.length) * 10) / 10\n        : 0;\n\n      return {\n        filmId,\n        titre: '', // Sera rempli par l'appelant\n        totalVotes: filmVotes.length,\n        moyenneNote: moyenne,\n        distributionNotes: distribution,\n      };\n    });\n\n    return {\n      seanceId,\n      totalVotes: votes.length,\n      films,\n    };\n  } catch (error: any) {\n    throw new Error('Erreur lors de la récupération des résultats de la séance');\n  }\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name BarChart3\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAzdjE4aDE4IiAvPgogIDxwYXRoIGQ9Ik0xOCAxN1Y5IiAvPgogIDxwYXRoIGQ9Ik0xMyAxN1Y1IiAvPgogIDxwYXRoIGQ9Ik04IDE3di0zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/bar-chart-3\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BarChart3 = createLucideIcon('BarChart3', [\n  ['path', { d: 'M3 3v18h18', key: '1s2lah' }],\n  ['path', { d: 'M18 17V9', key: '2bz60n' }],\n  ['path', { d: 'M13 17V5', key: '1frdt8' }],\n  ['path', { d: 'M8 17v-3', key: '17ska0' }],\n]);\n\nexport default BarChart3;\n","import { VALIDATION_RULES } from './constants';\r\n\r\n/**\r\n * Génère un ID unique\r\n */\r\nexport const generateId = (): string => {\r\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\r\n};\r\n\r\n/**\r\n * Génère un ID de session unique pour les votes anonymes\r\n */\r\nexport const generateSessionId = (): string => {\r\n  const timestamp = Date.now();\r\n  const random = Math.random().toString(36).substring(2);\r\n  return `${timestamp}-${random}`;\r\n};\r\n\r\n/**\r\n * Valide une adresse email\r\n */\r\nexport const isValidEmail = (email: string): boolean => {\r\n  return VALIDATION_RULES.EMAIL.test(email);\r\n};\r\n\r\n/**\r\n * Valide un mot de passe\r\n */\r\nexport const isValidPassword = (password: string): boolean => {\r\n  return password.length >= VALIDATION_RULES.PASSWORD_MIN_LENGTH;\r\n};\r\n\r\n/**\r\n * Valide un fichier image\r\n */\r\nexport const isValidImageFile = (file: File): boolean => {\r\n  return (\r\n    VALIDATION_RULES.ALLOWED_IMAGE_TYPES.indexOf(file.type) !== -1 &&\r\n    file.size <= VALIDATION_RULES.MAX_FILE_SIZE\r\n  );\r\n};\r\n\r\n/**\r\n * Redimensionne une image\r\n */\r\nexport const resizeImage = (\r\n  file: File,\r\n  maxWidth: number = 800,\r\n  maxHeight: number = 600,\r\n  quality: number = 0.8\r\n): Promise<Blob> => {\r\n  return new Promise((resolve, reject) => {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    const img = new Image();\r\n\r\n    img.onload = () => {\r\n      // Calculer les nouvelles dimensions\r\n      let { width, height } = img;\r\n      \r\n      if (width > maxWidth) {\r\n        height = (height * maxWidth) / width;\r\n        width = maxWidth;\r\n      }\r\n      \r\n      if (height > maxHeight) {\r\n        width = (width * maxHeight) / height;\r\n        height = maxHeight;\r\n      }\r\n\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n\r\n      if (ctx) {\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n        canvas.toBlob(\r\n          (blob) => {\r\n            if (blob) {\r\n              resolve(blob);\r\n            } else {\r\n              reject(new Error('Erreur lors du redimensionnement'));\r\n            }\r\n          },\r\n          'image/jpeg',\r\n          quality\r\n        );\r\n      } else {\r\n        reject(new Error('Impossible de créer le contexte canvas'));\r\n      }\r\n    };\r\n\r\n    img.onerror = () => reject(new Error('Erreur lors du chargement de l\\'image'));\r\n    img.src = URL.createObjectURL(file);\r\n  });\r\n};\r\n\r\n/**\r\n * Formate une date\r\n */\r\nexport const formatDate = (date: Date): string => {\r\n  return new Intl.DateTimeFormat('fr-FR', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  }).format(date);\r\n};\r\n\r\n/**\r\n * Formate une note avec étoiles\r\n */\r\nexport const formatRating = (rating: number): string => {\r\n  return `${rating}/5`;\r\n};\r\n\r\n/**\r\n * Calcule la moyenne des notes\r\n */\r\nexport const calculateAverageRating = (ratings: number[]): number => {\r\n  if (ratings.length === 0) return 0;\r\n  const sum = ratings.reduce((acc, rating) => acc + rating, 0);\r\n  return Math.round((sum / ratings.length) * 10) / 10;\r\n};\r\n\r\n/**\r\n * Génère une distribution des notes\r\n */\r\nexport const generateRatingDistribution = (ratings: number[]): Record<number, number> => {\r\n  const distribution: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\r\n  \r\n  ratings.forEach(rating => {\r\n    if (rating >= 1 && rating <= 5) {\r\n      distribution[rating]++;\r\n    }\r\n  });\r\n  \r\n  return distribution;\r\n};\r\n\r\n/**\r\n * Retourne l'User Agent du navigateur\r\n */\r\nexport const getUserAgent = (): string => {\r\n  return navigator.userAgent;\r\n};\r\n\r\n/**\r\n * Retourne l'adresse IP (approximative via service externe)\r\n */\r\nexport const getIpAddress = async (): Promise<string | null> => {\r\n  try {\r\n    const response = await fetch('https://api.ipify.org?format=json');\r\n    const data = await response.json();\r\n    return data.ip;\r\n  } catch (error) {\r\n    console.warn('Impossible de récupérer l\\'IP:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Stocke une valeur dans le localStorage\r\n */\r\nexport const setLocalStorage = (key: string, value: any): void => {\r\n  try {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  } catch (error) {\r\n    console.warn('Erreur lors du stockage local:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Récupère une valeur du localStorage\r\n */\r\nexport const getLocalStorage = <T>(key: string, defaultValue: T): T => {\r\n  try {\r\n    const item = localStorage.getItem(key);\r\n    return item ? JSON.parse(item) : defaultValue;\r\n  } catch (error) {\r\n    console.warn('Erreur lors de la récupération locale:', error);\r\n    return defaultValue;\r\n  }\r\n};\r\n\r\n/**\r\n * Supprime une valeur du localStorage\r\n */\r\nexport const removeLocalStorage = (key: string): void => {\r\n  try {\r\n    localStorage.removeItem(key);\r\n  } catch (error) {\r\n    console.warn('Erreur lors de la suppression locale:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Débounce une fonction\r\n */\r\nexport const debounce = <T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let timeout: number;\r\n  \r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeout);\r\n    timeout = window.setTimeout(() => func(...args), wait);\r\n  };\r\n};\r\n\r\n/**\r\n * Retry une fonction avec délai\r\n */\r\nexport const retry = async <T>(\r\n  fn: () => Promise<T>,\r\n  maxRetries: number = 3,\r\n  delay: number = 1000\r\n): Promise<T> => {\r\n  let lastError: Error = new Error('Une erreur est survenue');\r\n  \r\n  for (let i = 0; i < maxRetries; i++) {\r\n    try {\r\n      return await fn();\r\n    } catch (error) {\r\n      lastError = error as Error;\r\n      if (i < maxRetries - 1) {\r\n        await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\r\n      }\r\n    }\r\n  }\r\n  \r\n  throw new Error(lastError.message || 'Une erreur est survenue');\r\n};\r\n\r\n/**\r\n * Combine les classes CSS\r\n */\r\nexport const cn = (...classes: (string | undefined | null | false)[]): string => {\r\n  return classes.filter(Boolean).join(' ');\r\n}; ","import { db, storage } from './firebase';\nimport { \n  collection, \n  doc, \n  addDoc, \n  updateDoc, \n  deleteDoc, \n  getDocs, \n  getDoc, \n  query, \n  where, \n  orderBy,\n  Timestamp,\n  writeBatch\n} from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { Seance, CreateSeanceData, Film } from '../types';\nimport { generateId } from '../utils/helpers';\n\nconst SEANCES_COLLECTION = 'seances';\nconst FILMS_COLLECTION = 'films';\n\n/**\n * Créer une nouvelle séance avec génération automatique du QR code\n */\nexport const createSeance = async (data: CreateSeanceData): Promise<Seance> => {\n  try {\n    // Vérifier qu'il y a exactement 5 films\n    if (data.films.length !== 5) {\n      throw new Error('Une séance doit contenir exactement 5 films');\n    }\n\n    // Vérifier que tous les films existent\n    const filmsPromises = data.films.map(filmId => \n      getDoc(doc(db, FILMS_COLLECTION, filmId))\n    );\n    const filmsSnapshots = await Promise.all(filmsPromises);\n    \n    const nonExistentFilms = filmsSnapshots\n      .map((snapshot, index) => ({ snapshot, filmId: data.films[index] }))\n      .filter(({ snapshot }) => !snapshot.exists());\n    \n    if (nonExistentFilms.length > 0) {\n      throw new Error(`Films non trouvés: ${nonExistentFilms.map(f => f.filmId).join(', ')}`);\n    }\n\n    // Générer l'URL du QR code\n    const seanceId = generateId();\n    const qrCodeUrl = generateQRCodeUrl(seanceId);\n\n    const seanceData: Omit<Seance, 'id'> = {\n      nom: data.nom,\n      description: data.description,\n      date: data.date,\n      heure: data.heure,\n      films: data.films,\n      qrCodeUrl,\n      isActive: true,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    const docRef = await addDoc(collection(db, SEANCES_COLLECTION), seanceData);\n    \n    return {\n      id: docRef.id,\n      ...seanceData,\n    };\n  } catch (error) {\n    console.error('Erreur lors de la création de la séance:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer toutes les séances\n */\nexport const getAllSeances = async (): Promise<Seance[]> => {\n  try {\n    const q = query(\n      collection(db, SEANCES_COLLECTION),\n      orderBy('date', 'desc')\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const seances: Seance[] = [];\n    \n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      seances.push({\n        id: doc.id,\n        nom: data.nom,\n        description: data.description,\n        date: data.date.toDate(),\n        heure: data.heure,\n        films: data.films,\n        qrCodeUrl: data.qrCodeUrl,\n        isActive: data.isActive,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      });\n    });\n    \n    return seances;\n  } catch (error) {\n    console.error('Erreur lors de la récupération des séances:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer une séance par son ID\n */\nexport const getSeanceById = async (seanceId: string): Promise<Seance | null> => {\n  try {\n    const docRef = doc(db, SEANCES_COLLECTION, seanceId);\n    const docSnap = await getDoc(docRef);\n    \n    if (docSnap.exists()) {\n      const data = docSnap.data();\n      return {\n        id: docSnap.id,\n        nom: data.nom,\n        description: data.description,\n        date: data.date.toDate(),\n        heure: data.heure,\n        films: data.films,\n        qrCodeUrl: data.qrCodeUrl,\n        isActive: data.isActive,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      };\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Erreur lors de la récupération de la séance:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer une séance avec ses films\n */\nexport const getSeanceWithFilms = async (seanceId: string): Promise<{ seance: Seance; films: Film[] } | null> => {\n  try {\n    const seance = await getSeanceById(seanceId);\n    if (!seance) return null;\n\n    // Récupérer tous les films de la séance\n    const filmsPromises = seance.films.map(filmId => \n      getDoc(doc(db, FILMS_COLLECTION, filmId))\n    );\n    const filmsSnapshots = await Promise.all(filmsPromises);\n    \n    const films: Film[] = [];\n    \n    for (const snapshot of filmsSnapshots) {\n      if (snapshot.exists()) {\n        const data = snapshot.data();\n        if (data) {\n          films.push({\n            id: snapshot.id,\n            titre: data.titre,\n            realisateur: data.realisateur,\n            pays: data.pays,\n            duree: data.duree,\n            annee: data.annee,\n            synopsis: data.synopsis,\n            posterUrl: data.posterUrl,\n            genre: data.genre,\n            createdAt: data.createdAt.toDate(),\n            updatedAt: data.updatedAt.toDate(),\n          });\n        }\n      }\n    }\n\n    return { seance, films };\n  } catch (error) {\n    console.error('Erreur lors de la récupération de la séance avec films:', error);\n    throw error;\n  }\n};\n\n/**\n * Mettre à jour une séance\n */\nexport const updateSeance = async (seanceId: string, data: Partial<CreateSeanceData>): Promise<void> => {\n  try {\n    const docRef = doc(db, SEANCES_COLLECTION, seanceId);\n    \n    const updateData: any = {\n      ...data,\n      updatedAt: new Date(),\n    };\n\n    // Si les films changent, vérifier qu'il y en a 5\n    if (data.films && data.films.length !== 5) {\n      throw new Error('Une séance doit contenir exactement 5 films');\n    }\n\n    await updateDoc(docRef, updateData);\n  } catch (error) {\n    console.error('Erreur lors de la mise à jour de la séance:', error);\n    throw error;\n  }\n};\n\n/**\n * Supprimer une séance\n */\nexport const deleteSeance = async (seanceId: string): Promise<void> => {\n  try {\n    const docRef = doc(db, SEANCES_COLLECTION, seanceId);\n    await deleteDoc(docRef);\n  } catch (error) {\n    console.error('Erreur lors de la suppression de la séance:', error);\n    throw error;\n  }\n};\n\n/**\n * Activer/désactiver une séance\n */\nexport const toggleSeanceActive = async (seanceId: string, isActive: boolean): Promise<void> => {\n  try {\n    const docRef = doc(db, SEANCES_COLLECTION, seanceId);\n    await updateDoc(docRef, {\n      isActive,\n      updatedAt: new Date(),\n    });\n  } catch (error) {\n    console.error('Erreur lors de la modification du statut de la séance:', error);\n    throw error;\n  }\n};\n\n/**\n * Récupérer les séances actives\n */\nexport const getActiveSeances = async (): Promise<Seance[]> => {\n  try {\n    const q = query(\n      collection(db, SEANCES_COLLECTION),\n      where('isActive', '==', true),\n      orderBy('date', 'desc')\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const seances: Seance[] = [];\n    \n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      seances.push({\n        id: doc.id,\n        nom: data.nom,\n        description: data.description,\n        date: data.date.toDate(),\n        heure: data.heure,\n        films: data.films,\n        qrCodeUrl: data.qrCodeUrl,\n        isActive: data.isActive,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      });\n    });\n    \n    return seances;\n  } catch (error) {\n    console.error('Erreur lors de la récupération des séances actives:', error);\n    throw error;\n  }\n};\n\n/**\n * Générer l'URL du QR code pour une séance\n */\nexport const generateQRCodeUrl = (seanceId: string): string => {\n  const baseUrl = window.location.origin;\n  const seanceUrl = `${baseUrl}/seance/${seanceId}`;\n  \n  // Utiliser un service de génération de QR code\n  const qrServiceUrl = 'https://api.qrserver.com/v1/create-qr-code/';\n  const params = new URLSearchParams({\n    size: '300x300',\n    data: seanceUrl,\n    format: 'png',\n  });\n  \n  return `${qrServiceUrl}?${params.toString()}`;\n};\n\n/**\n * Récupérer les statistiques des séances\n */\nexport const getSeancesStats = async (): Promise<{\n  total: number;\n  actives: number;\n  inactives: number;\n  cetteSemaine: number;\n}> => {\n  try {\n    const seances = await getAllSeances();\n    const maintenant = new Date();\n    const uneSemaine = new Date(maintenant.getTime() + 7 * 24 * 60 * 60 * 1000);\n    \n    const stats = {\n      total: seances.length,\n      actives: seances.filter(s => s.isActive).length,\n      inactives: seances.filter(s => !s.isActive).length,\n      cetteSemaine: seances.filter(s => s.date >= maintenant && s.date <= uneSemaine).length,\n    };\n    \n    return stats;\n  } catch (error) {\n    console.error('Erreur lors de la récupération des statistiques:', error);\n    throw error;\n  }\n};\n\n/**\n * Rechercher des séances par nom\n */\nexport const searchSeances = async (searchTerm: string): Promise<Seance[]> => {\n  try {\n    const seances = await getAllSeances();\n    const term = searchTerm.toLowerCase();\n    \n    return seances.filter(seance => \n      seance.nom.toLowerCase().includes(term) ||\n      (seance.description && seance.description.toLowerCase().includes(term))\n    );\n  } catch (error) {\n    console.error('Erreur lors de la recherche de séances:', error);\n    throw error;\n  }\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Eye\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMiAxMnMzLTcgMTAtNyAxMCA3IDEwIDctMyA3LTEwIDctMTAtNy0xMC03WiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Eye = createLucideIcon('Eye', [\n  [\n    'path',\n    { d: 'M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z', key: 'rwhkz3' },\n  ],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n]);\n\nexport default Eye;\n"],"names":["FILMS_COLLECTION","getAllFilms","async","q","query","collection","db","orderBy","querySnapshot","getDocs","films","forEach","doc","data","push","id","titre","realisateur","pays","duree","annee","synopsis","posterUrl","genre","createdAt","toDate","updatedAt","error","console","getFilmById","docRef","filmId","docSnap","getDoc","exists","getFilmsByIds","filmIds","length","filmPromises","map","Promise","all","filter","film","TrendingUp","createLucideIcon","points","key","ResultsPage","_results$find","_currentSeance$films$","seances","setSeances","useState","selectedSeance","setSelectedSeance","results","setResults","globalResults","setGlobalResults","loading","setLoading","setError","sortBy","setSortBy","useEffect","loadResults","allSeances","getAllSeances","seanceResults","allFilmsMap","Map","seance","seanceResult","getSeanceResults","f","filmsMap","sortedFilms","filmResult","get","filmDetails","slice","has","set","votes","totalRating","count","globalStats","totalVotes","moyenneNote","position","sort","a","b","index","participationRate","Math","round","allFilmIds","Array","from","keys","allFilms","globalFilms","entries","_ref","stats","distributionNotes","sortedGlobalFilms","sortFilms","sortType","localeCompare","formatDate","date","Intl","DateTimeFormat","weekday","year","month","day","format","_jsx","className","children","_jsxs","onClick","selectedResults","find","r","currentSeance","Users","Star","value","onChange","e","target","nom","heure","Calendar","Award","src","alt","onError","rating","toFixed","note","maxCount","max","Object","values","height","style","BarChart3","reduce","sum","Eye","voteQueue","batchTimeout","isProcessingBatch","addVote","_data$commentaire","vote","generateId","seanceId","commentaire","trim","ipAddress","getIpAddress","undefined","userAgent","getUserAgent","sessionId","generateSessionId","Date","voteRef","COLLECTIONS","VOTES","setDoc","Error","addVoteToQueue","user","_data$commentaire2","window","setTimeout","processVoteBatch","checkIfUserVoted","uid","message","votesToProcess","batch","writeBatch","commit","log","unshift","userId","voteQuery","where","empty","getVoteQueueStatus","pendingVotes","isProcessing","nextBatchIn","votesQuery","_voteData$createdAt3","voteData","filmVotes","ratings","distribution","moyenne","d","now","toString","random","substring","navigator","response","fetch","json","ip","warn","setLocalStorage","localStorage","setItem","JSON","stringify","getLocalStorage","defaultValue","item","getItem","parse","cn","_len2","arguments","classes","_key2","Boolean","join","SEANCES_COLLECTION","createSeance","filmsPromises","nonExistentFilms","snapshot","qrCodeUrl","generateQRCodeUrl","seanceData","description","isActive","addDoc","getSeanceById","updateSeance","updateData","updateDoc","deleteSeance","deleteDoc","toggleSeanceActive","baseUrl","location","origin","URLSearchParams","size","cx","cy"],"sourceRoot":""}