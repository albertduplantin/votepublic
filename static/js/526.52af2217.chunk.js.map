{"version":3,"file":"static/js/526.52af2217.chunk.js","mappings":"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","sources":["services/filmService.ts","../node_modules/lucide-react/src/icons/send.ts","services/seanceService.ts","components/ui/Button.tsx","components/ui/Card.tsx","pages/SeanceVotePage.tsx","../node_modules/lucide-react/src/icons/clock.ts","services/voteService.ts","utils/helpers.ts","../node_modules/lucide-react/src/icons/arrow-left.ts"],"sourcesContent":["import {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  orderBy,\r\n  onSnapshot,\r\n} from 'firebase/firestore';\r\nimport { ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\r\nimport { db, storage } from './firebase';\r\nimport { Film, FilmFormData } from '../types';\r\nimport { COLLECTIONS } from '../utils/constants';\r\nimport { generateId, resizeImage } from '../utils/helpers';\r\n\r\n/**\r\n * Ajouter un nouveau film\r\n */\r\nexport const addFilm = async (data: FilmFormData): Promise<Film> => {\r\n  try {\r\n    let posterUrl = '';\r\n\r\n    // Upload et redimensionner l'affiche si fournie\r\n    if (data.poster) {\r\n      const resizedImage = await resizeImage(data.poster, 800, 600);\r\n      const posterRef = ref(storage, `posters/${generateId()}.jpg`);\r\n      await uploadBytes(posterRef, resizedImage);\r\n      posterUrl = await getDownloadURL(posterRef);\r\n    }\r\n\r\n    const filmData: Omit<Film, 'id'> = {\r\n      titre: data.titre.trim(),\r\n      realisateur: data.realisateur.trim(),\r\n      synopsis: data.synopsis.trim(),\r\n      posterUrl,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    const docRef = await addDoc(collection(db, COLLECTIONS.FILMS), filmData);\r\n\r\n    return {\r\n      id: docRef.id,\r\n      ...filmData,\r\n    };\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de l\\'ajout du film');\r\n  }\r\n};\r\n\r\n/**\r\n * Mettre à jour un film\r\n */\r\nexport const updateFilm = async (\r\n  id: string,\r\n  data: Partial<FilmFormData>\r\n): Promise<void> => {\r\n  try {\r\n    const filmRef = doc(db, COLLECTIONS.FILMS, id);\r\n    const filmDoc = await getDoc(filmRef);\r\n\r\n    if (!filmDoc.exists()) {\r\n      throw new Error('Film non trouvé');\r\n    }\r\n\r\n    const updateData: Partial<Film> = {\r\n      ...data,\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    // Gérer l'upload de la nouvelle affiche\r\n    if (data.poster) {\r\n      const resizedImage = await resizeImage(data.poster, 800, 600);\r\n      const posterRef = ref(storage, `posters/${generateId()}.jpg`);\r\n      await uploadBytes(posterRef, resizedImage);\r\n      updateData.posterUrl = await getDownloadURL(posterRef);\r\n\r\n      // Supprimer l'ancienne affiche\r\n      const currentFilm = filmDoc.data() as Film;\r\n      if (currentFilm.posterUrl) {\r\n        try {\r\n          const oldPosterRef = ref(storage, currentFilm.posterUrl);\r\n          await deleteObject(oldPosterRef);\r\n        } catch (error) {\r\n          console.warn('Impossible de supprimer l\\'ancienne affiche:', error);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Supprimer les champs non-Firestore\r\n    delete (updateData as any).poster;\r\n\r\n    await updateDoc(filmRef, updateData);\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la mise à jour du film');\r\n  }\r\n};\r\n\r\n/**\r\n * Supprimer un film\r\n */\r\nexport const deleteFilm = async (id: string): Promise<void> => {\r\n  try {\r\n    const filmRef = doc(db, COLLECTIONS.FILMS, id);\r\n    const filmDoc = await getDoc(filmRef);\r\n\r\n    if (!filmDoc.exists()) {\r\n      throw new Error('Film non trouvé');\r\n    }\r\n\r\n    // Supprimer l'affiche\r\n    const film = filmDoc.data() as Film;\r\n    if (film.posterUrl) {\r\n      try {\r\n        const posterRef = ref(storage, film.posterUrl);\r\n        await deleteObject(posterRef);\r\n      } catch (error) {\r\n        console.warn('Impossible de supprimer l\\'affiche:', error);\r\n      }\r\n    }\r\n\r\n    await deleteDoc(filmRef);\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la suppression du film');\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer un film par ID\r\n */\r\nexport const getFilm = async (id: string): Promise<Film> => {\r\n  try {\r\n    const filmDoc = await getDoc(doc(db, COLLECTIONS.FILMS, id));\r\n\r\n    if (!filmDoc.exists()) {\r\n      throw new Error('Film non trouvé');\r\n    }\r\n\r\n    const filmData = filmDoc.data();\r\n    return {\r\n      id: filmDoc.id,\r\n      ...filmData,\r\n      createdAt: filmData.createdAt?.toDate() || new Date(),\r\n      updatedAt: filmData.updatedAt?.toDate() || new Date(),\r\n    } as Film;\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la récupération du film');\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer tous les films\r\n */\r\nexport const getAllFilms = async (): Promise<Film[]> => {\r\n  try {\r\n    const filmsQuery = query(\r\n      collection(db, COLLECTIONS.FILMS),\r\n      orderBy('createdAt', 'desc')\r\n    );\r\n\r\n    const querySnapshot = await getDocs(filmsQuery);\r\n    const films: Film[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const filmData = doc.data();\r\n      films.push({\r\n        id: doc.id,\r\n        ...filmData,\r\n        createdAt: filmData.createdAt?.toDate() || new Date(),\r\n        updatedAt: filmData.updatedAt?.toDate() || new Date(),\r\n      } as Film);\r\n    });\r\n\r\n    return films;\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la récupération des films');\r\n  }\r\n};\r\n\r\n/**\r\n * Écouter les changements de la collection films\r\n */\r\nexport const onFilmsChange = (callback: (films: Film[]) => void) => {\r\n  const filmsQuery = query(\r\n    collection(db, COLLECTIONS.FILMS),\r\n    orderBy('createdAt', 'desc')\r\n  );\r\n\r\n  return onSnapshot(filmsQuery, (querySnapshot) => {\r\n    const films: Film[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const filmData = doc.data();\r\n      films.push({\r\n        id: doc.id,\r\n        ...filmData,\r\n        createdAt: filmData.createdAt?.toDate() || new Date(),\r\n        updatedAt: filmData.updatedAt?.toDate() || new Date(),\r\n      } as Film);\r\n    });\r\n\r\n    callback(films);\r\n  });\r\n};\r\n\r\n/**\r\n * Rechercher des films par titre ou réalisateur\r\n */\r\nexport const searchFilms = async (searchTerm: string): Promise<Film[]> => {\r\n  try {\r\n    const searchLower = searchTerm.toLowerCase();\r\n    const allFilms = await getAllFilms();\r\n\r\n    return allFilms.filter(\r\n      (film) =>\r\n        film.titre.toLowerCase().includes(searchLower) ||\r\n        film.realisateur.toLowerCase().includes(searchLower)\r\n    );\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la recherche de films');\r\n  }\r\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Send\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjIgMi03IDIwLTQtOS05LTRaIiAvPgogIDxwYXRoIGQ9Ik0yMiAyIDExIDEzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/send\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Send = createLucideIcon('Send', [\n  ['path', { d: 'm22 2-7 20-4-9-9-4Z', key: '1q3vgg' }],\n  ['path', { d: 'M22 2 11 13', key: 'nzbqef' }],\n]);\n\nexport default Send;\n","import {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  orderBy,\r\n  where,\r\n  onSnapshot,\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\nimport { Seance, SeanceFormData, SeanceResults } from '../types';\r\nimport { COLLECTIONS } from '../utils/constants';\r\nimport { generateId } from '../utils/helpers';\r\n\r\n/**\r\n * Générer un QR code pour une séance\r\n */\r\nexport const generateQRCode = (seanceId: string): string => {\r\n  const baseUrl = window.location.origin + window.location.pathname;\r\n  const seanceUrl = `${baseUrl}seance/${seanceId}`;\r\n  \r\n  // Utiliser l'API QR Server pour générer le QR code\r\n  const qrCodeUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(seanceUrl)}`;\r\n  \r\n  return qrCodeUrl;\r\n};\r\n\r\n/**\r\n * Ajouter une nouvelle séance\r\n */\r\nexport const addSeance = async (data: SeanceFormData): Promise<Seance> => {\r\n  try {\r\n    const seanceData: Omit<Seance, 'id' | 'qrCodeUrl' | 'createdAt' | 'updatedAt'> = {\r\n      nom: data.nom.trim(),\r\n      description: data.description?.trim(),\r\n      date: new Date(data.date),\r\n      heure: data.heure,\r\n      films: data.films,\r\n    };\r\n\r\n    const docRef = await addDoc(collection(db, COLLECTIONS.SEANCES), seanceData);\r\n    const seanceId = docRef.id;\r\n    \r\n    // Générer le QR code\r\n    const qrCodeUrl = generateQRCode(seanceId);\r\n    \r\n    // Mettre à jour avec le QR code\r\n    await updateDoc(docRef, {\r\n      qrCodeUrl,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    });\r\n\r\n    return {\r\n      id: seanceId,\r\n      ...seanceData,\r\n      qrCodeUrl,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    };\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de l\\'ajout de la séance');\r\n  }\r\n};\r\n\r\n/**\r\n * Mettre à jour une séance\r\n */\r\nexport const updateSeance = async (\r\n  id: string,\r\n  data: Partial<SeanceFormData>\r\n): Promise<void> => {\r\n  try {\r\n    const seanceRef = doc(db, COLLECTIONS.SEANCES, id);\r\n    const seanceDoc = await getDoc(seanceRef);\r\n\r\n    if (!seanceDoc.exists()) {\r\n      throw new Error('Séance non trouvée');\r\n    }\r\n\r\n    const updateData: any = {\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    // Ajouter les champs mis à jour\r\n    if (data.nom) updateData.nom = data.nom.trim();\r\n    if (data.description !== undefined) updateData.description = data.description?.trim();\r\n    if (data.date) updateData.date = new Date(data.date);\r\n    if (data.heure) updateData.heure = data.heure;\r\n    if (data.films) {\r\n      updateData.films = data.films;\r\n      updateData.qrCodeUrl = generateQRCode(id);\r\n    }\r\n\r\n    await updateDoc(seanceRef, updateData);\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la mise à jour de la séance');\r\n  }\r\n};\r\n\r\n/**\r\n * Supprimer une séance\r\n */\r\nexport const deleteSeance = async (id: string): Promise<void> => {\r\n  try {\r\n    await deleteDoc(doc(db, COLLECTIONS.SEANCES, id));\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la suppression de la séance');\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer une séance par ID\r\n */\r\nexport const getSeance = async (id: string): Promise<Seance> => {\r\n  try {\r\n    const seanceDoc = await getDoc(doc(db, COLLECTIONS.SEANCES, id));\r\n\r\n    if (!seanceDoc.exists()) {\r\n      throw new Error('Séance non trouvée');\r\n    }\r\n\r\n    const seanceData = seanceDoc.data();\r\n    return {\r\n      id: seanceDoc.id,\r\n      ...seanceData,\r\n      date: seanceData.date?.toDate() || new Date(),\r\n      createdAt: seanceData.createdAt?.toDate() || new Date(),\r\n      updatedAt: seanceData.updatedAt?.toDate() || new Date(),\r\n    } as Seance;\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la récupération de la séance');\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer toutes les séances\r\n */\r\nexport const getAllSeances = async (): Promise<Seance[]> => {\r\n  try {\r\n    const seancesQuery = query(\r\n      collection(db, COLLECTIONS.SEANCES),\r\n      orderBy('date', 'asc')\r\n    );\r\n\r\n    const querySnapshot = await getDocs(seancesQuery);\r\n    const seances: Seance[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const seanceData = doc.data();\r\n      seances.push({\r\n        id: doc.id,\r\n        ...seanceData,\r\n        date: seanceData.date?.toDate() || new Date(),\r\n        createdAt: seanceData.createdAt?.toDate() || new Date(),\r\n        updatedAt: seanceData.updatedAt?.toDate() || new Date(),\r\n      } as Seance);\r\n    });\r\n\r\n    return seances;\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la récupération des séances');\r\n  }\r\n};\r\n\r\n/**\r\n * Écouter les changements de la collection séances\r\n */\r\nexport const onSeancesChange = (callback: (seances: Seance[]) => void) => {\r\n  const seancesQuery = query(\r\n    collection(db, COLLECTIONS.SEANCES),\r\n    orderBy('date', 'asc')\r\n  );\r\n\r\n  return onSnapshot(seancesQuery, (querySnapshot) => {\r\n    const seances: Seance[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const seanceData = doc.data();\r\n      seances.push({\r\n        id: doc.id,\r\n        ...seanceData,\r\n        date: seanceData.date?.toDate() || new Date(),\r\n        createdAt: seanceData.createdAt?.toDate() || new Date(),\r\n        updatedAt: seanceData.updatedAt?.toDate() || new Date(),\r\n      } as Seance);\r\n    });\r\n\r\n    callback(seances);\r\n  });\r\n};\r\n\r\n/**\r\n * Récupérer les résultats d'une séance\r\n */\r\nexport const getSeanceResults = async (seanceId: string): Promise<SeanceResults> => {\r\n  try {\r\n    const seance = await getSeance(seanceId);\r\n    \r\n    // Récupérer les votes pour cette séance\r\n    const votesQuery = query(\r\n      collection(db, COLLECTIONS.VOTES),\r\n      where('seanceId', '==', seanceId)\r\n    );\r\n    \r\n    const votesSnapshot = await getDocs(votesQuery);\r\n    const votes = votesSnapshot.docs.map(doc => doc.data());\r\n    \r\n    // Calculer les statistiques par film\r\n    const filmStats = new Map();\r\n    \r\n    votes.forEach(vote => {\r\n      if (!filmStats.has(vote.filmId)) {\r\n        filmStats.set(vote.filmId, {\r\n          votes: [],\r\n          commentaires: [],\r\n        });\r\n      }\r\n      \r\n      filmStats.get(vote.filmId).votes.push(vote.note);\r\n      if (vote.commentaire) {\r\n        filmStats.get(vote.filmId).commentaires.push(vote.commentaire);\r\n      }\r\n    });\r\n    \r\n    // Formater les résultats\r\n    const films = await Promise.all(\r\n      seance.films.map(async (filmId) => {\r\n        const filmDoc = await getDoc(doc(db, COLLECTIONS.FILMS, filmId));\r\n        const filmData = filmDoc.data();\r\n        \r\n        const stats = filmStats.get(filmId) || { votes: [], commentaires: [] };\r\n        const ratings = stats.votes;\r\n        \r\n        // Calculer la moyenne\r\n        const moyenne = ratings.length > 0 \r\n          ? ratings.reduce((sum: number, rating: number) => sum + rating, 0) / ratings.length \r\n          : 0;\r\n        \r\n        // Calculer la distribution\r\n        const distribution: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\r\n        ratings.forEach((rating: number) => {\r\n          if (rating >= 1 && rating <= 5) {\r\n            distribution[rating]++;\r\n          }\r\n        });\r\n        \r\n        return {\r\n          filmId,\r\n          titre: filmData?.titre || 'Film inconnu',\r\n          realisateur: filmData?.realisateur || 'Réalisateur inconnu',\r\n          posterUrl: filmData?.posterUrl || '',\r\n          moyenne: Math.round(moyenne * 10) / 10,\r\n          totalVotes: ratings.length,\r\n          distribution,\r\n          commentaires: stats.commentaires,\r\n        };\r\n      })\r\n    );\r\n    \r\n    return {\r\n      seanceId,\r\n      seanceNom: seance.nom,\r\n      films,\r\n      totalVotes: votes.length,\r\n      dateSeance: seance.date,\r\n    };\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la récupération des résultats');\r\n  }\r\n}; ","import React from 'react';\r\nimport { cn } from '../../utils/helpers';\r\n\r\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  loading?: boolean;\r\n  icon?: React.ReactNode;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Button: React.FC<ButtonProps> = ({\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  icon,\r\n  children,\r\n  className,\r\n  disabled,\r\n  ...props\r\n}) => {\r\n  const baseClasses = 'inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';\r\n  \r\n  const variants = {\r\n    primary: 'bg-primary text-white hover:bg-primary-dark focus:ring-primary border-2 border-primary',\r\n    secondary: 'bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500',\r\n    outline: 'border-2 border-primary bg-white text-primary hover:bg-primary hover:text-white focus:ring-primary',\r\n    ghost: 'text-gray-700 hover:bg-gray-100 focus:ring-gray-500',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\r\n  };\r\n  \r\n  const sizes = {\r\n    sm: 'px-3 py-1.5 text-sm',\r\n    md: 'px-4 py-2 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n  \r\n  return (\r\n    <button\r\n      className={cn(\r\n        baseClasses,\r\n        variants[variant],\r\n        sizes[size],\r\n        className\r\n      )}\r\n      disabled={disabled || loading}\r\n      {...props}\r\n    >\r\n      {loading && (\r\n        <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n        </svg>\r\n      )}\r\n      {!loading && icon && <span className=\"mr-2\">{icon}</span>}\r\n      {children}\r\n    </button>\r\n  );\r\n}; ","import React from 'react';\r\nimport { cn } from '../../utils/helpers';\r\n\r\ninterface CardProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  padding?: 'none' | 'sm' | 'md' | 'lg';\r\n  shadow?: 'none' | 'sm' | 'md' | 'lg';\r\n}\r\n\r\nexport const Card: React.FC<CardProps> = ({\r\n  children,\r\n  className,\r\n  padding = 'md',\r\n  shadow = 'md',\r\n}) => {\r\n  const paddingClasses = {\r\n    none: '',\r\n    sm: 'p-4',\r\n    md: 'p-6',\r\n    lg: 'p-8',\r\n  };\r\n\r\n  const shadowClasses = {\r\n    none: '',\r\n    sm: 'shadow-sm',\r\n    md: 'shadow-md',\r\n    lg: 'shadow-lg',\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'bg-white rounded-lg border border-gray-200',\r\n        paddingClasses[padding],\r\n        shadowClasses[shadow],\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { z } from 'zod';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport toast from 'react-hot-toast';\r\nimport { Star, ArrowLeft, Send, Clock, Users } from 'lucide-react';\r\nimport { getSeance, getSeanceResults } from '../services/seanceService';\r\nimport { getAllFilms } from '../services/filmService';\r\nimport { addVote } from '../services/voteService';\r\nimport { Seance, Film, VoteFormData } from '../types';\r\nimport { Button } from '../components/ui/Button';\r\nimport { Card } from '../components/ui/Card';\r\nimport { ROUTES } from '../utils/constants';\r\n\r\n// Schéma de validation pour le vote\r\nconst voteSchema = z.object({\r\n  note: z.number().min(1).max(5),\r\n  commentaire: z.string().max(500).optional(),\r\n});\r\n\r\ninterface VoteData {\r\n  filmId: string;\r\n  note: number;\r\n  commentaire?: string;\r\n}\r\n\r\nexport const SeanceVotePage: React.FC = () => {\r\n  const { seanceId } = useParams<{ seanceId: string }>();\r\n  const navigate = useNavigate();\r\n  const [seance, setSeance] = useState<Seance | null>(null);\r\n  const [films, setFilms] = useState<Film[]>([]);\r\n  const [results, setResults] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [voting, setVoting] = useState(false);\r\n  const [votes, setVotes] = useState<Record<string, VoteData>>({});\r\n\r\n  // Charger les données de la séance\r\n  useEffect(() => {\r\n    const loadSeanceData = async () => {\r\n      if (!seanceId) return;\r\n      \r\n      try {\r\n        setLoading(true);\r\n        const [seanceData, filmsData, resultsData] = await Promise.all([\r\n          getSeance(seanceId),\r\n          getAllFilms(),\r\n          getSeanceResults(seanceId),\r\n        ]);\r\n        \r\n        setSeance(seanceData);\r\n        setFilms(filmsData);\r\n        setResults(resultsData);\r\n      } catch (error: any) {\r\n        toast.error('Erreur lors du chargement de la séance');\r\n        navigate(ROUTES.VOTE);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadSeanceData();\r\n  }, [seanceId, navigate]);\r\n\r\n  // Gérer le vote pour un film\r\n  const handleVote = (filmId: string, note: number, commentaire?: string) => {\r\n    setVotes(prev => ({\r\n      ...prev,\r\n      [filmId]: { filmId, note, commentaire },\r\n    }));\r\n  };\r\n\r\n  // Soumettre tous les votes\r\n  const handleSubmitVotes = async () => {\r\n    if (!seance || Object.keys(votes).length === 0) {\r\n      toast.error('Veuillez voter pour au moins un film');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setVoting(true);\r\n      \r\n      // Soumettre chaque vote\r\n      const votePromises = Object.values(votes).map(vote => \r\n        addVote({\r\n          filmId: vote.filmId,\r\n          seanceId: seance.id,\r\n          note: vote.note,\r\n          commentaire: vote.commentaire,\r\n        })\r\n      );\r\n      \r\n      await Promise.all(votePromises);\r\n      \r\n      toast.success('Votes enregistrés avec succès !');\r\n      navigate(ROUTES.RESULTS);\r\n    } catch (error: any) {\r\n      toast.error('Erreur lors de l\\'enregistrement des votes');\r\n    } finally {\r\n      setVoting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Chargement de la séance...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!seance) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Séance non trouvée</h2>\r\n          <Button onClick={() => navigate(ROUTES.VOTE)}>\r\n            Retour au vote\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Filtrer les films de cette séance\r\n  const seanceFilms = films.filter(film => seance.films.includes(film.id));\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* En-tête */}\r\n        <div className=\"mb-8\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            icon={<ArrowLeft className=\"h-4 w-4\" />}\r\n            onClick={() => navigate(ROUTES.VOTE)}\r\n            className=\"mb-4\"\r\n          >\r\n            Retour\r\n          </Button>\r\n          \r\n          <Card className=\"mb-6\">\r\n            <div className=\"text-center\">\r\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n                {seance.nom}\r\n              </h1>\r\n              <div className=\"flex items-center justify-center space-x-6 text-gray-600\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Clock className=\"h-4 w-4\" />\r\n                  <span>{seance.date.toLocaleDateString('fr-FR')} à {seance.heure}</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Users className=\"h-4 w-4\" />\r\n                  <span>{seanceFilms.length} film{seanceFilms.length > 1 ? 's' : ''}</span>\r\n                </div>\r\n              </div>\r\n              {seance.description && (\r\n                <p className=\"mt-4 text-gray-600\">{seance.description}</p>\r\n              )}\r\n            </div>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Instructions */}\r\n        <Card className=\"mb-8\">\r\n          <div className=\"text-center\">\r\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\r\n              Votez pour les films de cette séance\r\n            </h2>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              Notez chaque film de 1 à 5 étoiles et ajoutez un commentaire optionnel.\r\n              Vous ne pouvez voter qu'une seule fois par film.\r\n            </p>\r\n            <div className=\"flex items-center justify-center space-x-8 text-sm text-gray-500\">\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <span>1 = Très mauvais</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\r\n                <span>5 = Excellent</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Films à voter */}\r\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n          {seanceFilms.map((film) => {\r\n            const currentVote = votes[film.id];\r\n            const filmResults = results?.films?.find((f: any) => f.filmId === film.id);\r\n            \r\n            return (\r\n              <Card key={film.id} className=\"overflow-hidden\">\r\n                {/* Poster */}\r\n                <div className=\"aspect-[2/3] bg-gray-200 overflow-hidden\">\r\n                  {film.posterUrl ? (\r\n                    <img\r\n                      src={film.posterUrl}\r\n                      alt={film.titre}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\r\n                      <span>Aucune image</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                {/* Informations */}\r\n                <div className=\"p-4\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\r\n                    {film.titre}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-600 mb-4\">\r\n                    {film.realisateur}\r\n                  </p>\r\n                  \r\n                  {/* Système de notation */}\r\n                  <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Votre note :\r\n                    </label>\r\n                    <div className=\"flex space-x-1\">\r\n                      {[1, 2, 3, 4, 5].map((star) => (\r\n                        <button\r\n                          key={star}\r\n                          type=\"button\"\r\n                          onClick={() => handleVote(film.id, star, currentVote?.commentaire)}\r\n                          className={`p-1 rounded transition-colors ${\r\n                            currentVote?.note >= star\r\n                              ? 'text-yellow-400 hover:text-yellow-500'\r\n                              : 'text-gray-300 hover:text-yellow-400'\r\n                          }`}\r\n                        >\r\n                          <Star className=\"h-6 w-6 fill-current\" />\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                    {currentVote?.note && (\r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        Note : {currentVote.note}/5\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* Commentaire */}\r\n                  <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Commentaire (optionnel) :\r\n                    </label>\r\n                    <textarea\r\n                      value={currentVote?.commentaire || ''}\r\n                      onChange={(e) => handleVote(film.id, currentVote?.note || 0, e.target.value)}\r\n                      placeholder=\"Votre avis sur ce film...\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                      rows={3}\r\n                      maxLength={500}\r\n                    />\r\n                  </div>\r\n                  \r\n                  {/* Statistiques (si disponibles) */}\r\n                  {filmResults && (\r\n                    <div className=\"border-t pt-4\">\r\n                      <div className=\"flex items-center justify-between text-sm text-gray-600\">\r\n                        <span>Moyenne : {filmResults.moyenne}/5</span>\r\n                        <span>{filmResults.totalVotes} vote{filmResults.totalVotes > 1 ? 's' : ''}</span>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Bouton de soumission */}\r\n        <div className=\"mt-8 text-center\">\r\n          <Button\r\n            onClick={handleSubmitVotes}\r\n            loading={voting}\r\n            disabled={Object.keys(votes).length === 0}\r\n            icon={<Send className=\"h-4 w-4\" />}\r\n            size=\"lg\"\r\n          >\r\n            {voting ? 'Envoi en cours...' : `Envoyer ${Object.keys(votes).length} vote${Object.keys(votes).length > 1 ? 's' : ''}`}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('Clock', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polyline', { points: '12 6 12 12 16 14', key: '68esgv' }],\n]);\n\nexport default Clock;\n","import {\r\n  collection,\r\n  doc,\r\n  deleteDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  onSnapshot,\r\n  writeBatch,\r\n  setDoc,\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\nimport { Vote, VoteFormData, FilmStats } from '../types';\r\nimport { COLLECTIONS } from '../utils/constants';\r\nimport { generateId, generateSessionId, getUserAgent, getIpAddress } from '../utils/helpers';\r\n\r\n// Queue pour les votes en batch\r\nlet voteQueue: Vote[] = [];\r\nlet batchTimeout: number | null = null;\r\nlet isProcessingBatch = false;\r\n\r\n/**\r\n * Ajouter un vote directement (pour les séances)\r\n */\r\nexport const addVote = async (data: {\r\n  filmId: string;\r\n  seanceId?: string;\r\n  note: number;\r\n  commentaire?: string;\r\n}): Promise<void> => {\r\n  try {\r\n    const vote: Vote = {\r\n      id: generateId(),\r\n      filmId: data.filmId,\r\n      seanceId: data.seanceId,\r\n      note: data.note,\r\n      commentaire: data.commentaire?.trim(),\r\n      userId: undefined,\r\n      userEmail: undefined,\r\n      userAgent: getUserAgent(),\r\n      ipAddress: await getIpAddress() || undefined,\r\n      sessionId: generateSessionId(),\r\n      createdAt: new Date(),\r\n      isAnonymous: true,\r\n    };\r\n\r\n    // Ajouter directement à Firestore\r\n    const voteRef = doc(collection(db, COLLECTIONS.VOTES));\r\n    await setDoc(voteRef, {\r\n      ...vote,\r\n      id: voteRef.id,\r\n    } as any);\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de l\\'ajout du vote');\r\n  }\r\n};\r\n\r\n/**\r\n * Ajouter un vote à la queue\r\n */\r\nexport const addVoteToQueue = async (\r\n  filmId: string,\r\n  data: VoteFormData,\r\n  user?: { uid: string; email: string } | null,\r\n  sessionId?: string\r\n): Promise<void> => {\r\n  try {\r\n    const vote: Vote = {\r\n      id: generateId(),\r\n      filmId,\r\n      note: data.note,\r\n      commentaire: data.commentaire?.trim(),\r\n      userId: user?.uid,\r\n      userEmail: user?.email,\r\n      userAgent: getUserAgent(),\r\n      ipAddress: await getIpAddress() || undefined,\r\n      sessionId: sessionId || generateSessionId(),\r\n      createdAt: new Date(),\r\n      isAnonymous: !user,\r\n    };\r\n\r\n    voteQueue.push(vote);\r\n\r\n    // Démarrer le timer pour l'envoi en batch\r\n    if (!batchTimeout) {\r\n      batchTimeout = window.setTimeout(() => {\r\n        processVoteBatch();\r\n      }, 5000); // 5 secondes de délai\r\n    }\r\n\r\n    // Vérifier si l'utilisateur a déjà voté pour ce film\r\n    const hasVoted = await checkIfUserVoted(filmId, user?.uid, sessionId);\r\n    if (hasVoted) {\r\n      throw new Error('Vous avez déjà voté pour ce film');\r\n    }\r\n  } catch (error: any) {\r\n    throw new Error(error.message || 'Erreur lors de l\\'ajout du vote');\r\n  }\r\n};\r\n\r\n/**\r\n * Traiter la queue de votes en batch\r\n */\r\nconst processVoteBatch = async (): Promise<void> => {\r\n  if (isProcessingBatch || voteQueue.length === 0) {\r\n    return;\r\n  }\r\n\r\n  isProcessingBatch = true;\r\n  const votesToProcess = [...voteQueue];\r\n  voteQueue = [];\r\n  batchTimeout = null;\r\n\r\n  try {\r\n    const batch = writeBatch(db);\r\n\r\n    // Ajouter tous les votes au batch\r\n    votesToProcess.forEach((vote) => {\r\n      const voteRef = doc(collection(db, COLLECTIONS.VOTES));\r\n      batch.set(voteRef, {\r\n        ...vote,\r\n        id: voteRef.id,\r\n      });\r\n    });\r\n\r\n    // Exécuter le batch\r\n    await batch.commit();\r\n\r\n    console.log(`${votesToProcess.length} votes envoyés avec succès`);\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'envoi du batch:', error);\r\n    \r\n    // Remettre les votes dans la queue pour retry\r\n    voteQueue.unshift(...votesToProcess);\r\n    \r\n    // Retry après 10 secondes\r\n    setTimeout(() => {\r\n      isProcessingBatch = false;\r\n      if (voteQueue.length > 0) {\r\n        processVoteBatch();\r\n      }\r\n    }, 10000);\r\n  } finally {\r\n    isProcessingBatch = false;\r\n  }\r\n};\r\n\r\n/**\r\n * Vérifier si un utilisateur a déjà voté pour un film\r\n */\r\nexport const checkIfUserVoted = async (\r\n  filmId: string,\r\n  userId?: string,\r\n  sessionId?: string\r\n): Promise<boolean> => {\r\n  try {\r\n    let voteQuery;\r\n\r\n    if (userId) {\r\n      // Utilisateur connecté\r\n      voteQuery = query(\r\n        collection(db, COLLECTIONS.VOTES),\r\n        where('filmId', '==', filmId),\r\n        where('userId', '==', userId)\r\n      );\r\n    } else if (sessionId) {\r\n      // Vote anonyme\r\n      voteQuery = query(\r\n        collection(db, COLLECTIONS.VOTES),\r\n        where('filmId', '==', filmId),\r\n        where('sessionId', '==', sessionId)\r\n      );\r\n    } else {\r\n      return false;\r\n    }\r\n\r\n    const querySnapshot = await getDocs(voteQuery);\r\n    return !querySnapshot.empty;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la vérification du vote:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer les votes d'un film\r\n */\r\nexport const getFilmVotes = async (filmId: string): Promise<Vote[]> => {\r\n  try {\r\n    const votesQuery = query(\r\n      collection(db, COLLECTIONS.VOTES),\r\n      where('filmId', '==', filmId),\r\n      orderBy('createdAt', 'desc')\r\n    );\r\n\r\n    const querySnapshot = await getDocs(votesQuery);\r\n    const votes: Vote[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const voteData = doc.data();\r\n      votes.push({\r\n        ...voteData,\r\n        id: doc.id,\r\n        createdAt: voteData.createdAt?.toDate() || new Date(),\r\n      } as Vote);\r\n    });\r\n\r\n    return votes;\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la récupération des votes');\r\n  }\r\n};\r\n\r\n/**\r\n * Supprimer un vote\r\n */\r\nexport const deleteVote = async (voteId: string): Promise<void> => {\r\n  try {\r\n    await deleteDoc(doc(db, COLLECTIONS.VOTES, voteId));\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors de la suppression du vote');\r\n  }\r\n};\r\n\r\n/**\r\n * Récupérer les statistiques d'un film\r\n */\r\nexport const getFilmStats = async (filmId: string): Promise<FilmStats> => {\r\n  try {\r\n    const votes = await getFilmVotes(filmId);\r\n    const ratings = votes.map(vote => vote.note);\r\n    \r\n    const distribution: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\r\n    ratings.forEach(rating => {\r\n      if (rating >= 1 && rating <= 5) {\r\n        distribution[rating]++;\r\n      }\r\n    });\r\n\r\n    const moyenne = ratings.length > 0 \r\n      ? Math.round((ratings.reduce((sum, r) => sum + r, 0) / ratings.length) * 10) / 10\r\n      : 0;\r\n\r\n    const commentaires = votes\r\n      .filter(vote => vote.commentaire)\r\n      .map(vote => vote.commentaire!)\r\n      .slice(0, 10); // Limiter à 10 commentaires\r\n\r\n    return {\r\n      filmId,\r\n      titre: '', // Sera rempli par l'appelant\r\n      totalVotes: votes.length,\r\n      moyenneNote: moyenne,\r\n      distributionNotes: distribution,\r\n      commentaires,\r\n    };\r\n  } catch (error: any) {\r\n    throw new Error('Erreur lors du calcul des statistiques');\r\n  }\r\n};\r\n\r\n/**\r\n * Écouter les changements de votes pour un film\r\n */\r\nexport const onVotesChange = (filmId: string, callback: (votes: Vote[]) => void) => {\r\n  const votesQuery = query(\r\n    collection(db, COLLECTIONS.VOTES),\r\n    where('filmId', '==', filmId),\r\n    orderBy('createdAt', 'desc')\r\n  );\r\n\r\n  return onSnapshot(votesQuery, (querySnapshot) => {\r\n    const votes: Vote[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const voteData = doc.data();\r\n      votes.push({\r\n        ...voteData,\r\n        id: doc.id,\r\n        createdAt: voteData.createdAt?.toDate() || new Date(),\r\n      } as Vote);\r\n    });\r\n\r\n    callback(votes);\r\n  });\r\n};\r\n\r\n/**\r\n * Récupérer le statut de la queue de votes\r\n */\r\nexport const getVoteQueueStatus = () => {\r\n  return {\r\n    pendingVotes: voteQueue.length,\r\n    isProcessing: isProcessingBatch,\r\n    nextBatchIn: batchTimeout ? 5000 : 0,\r\n  };\r\n};\r\n\r\n/**\r\n * Forcer l'envoi immédiat de la queue\r\n */\r\nexport const forceProcessBatch = async (): Promise<void> => {\r\n  if (batchTimeout) {\r\n    clearTimeout(batchTimeout);\r\n    batchTimeout = null;\r\n  }\r\n  await processVoteBatch();\r\n}; ","import { VALIDATION_RULES } from './constants';\r\n\r\n/**\r\n * Génère un ID unique\r\n */\r\nexport const generateId = (): string => {\r\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\r\n};\r\n\r\n/**\r\n * Génère un ID de session unique pour les votes anonymes\r\n */\r\nexport const generateSessionId = (): string => {\r\n  const timestamp = Date.now();\r\n  const random = Math.random().toString(36).substring(2);\r\n  return `${timestamp}-${random}`;\r\n};\r\n\r\n/**\r\n * Valide une adresse email\r\n */\r\nexport const isValidEmail = (email: string): boolean => {\r\n  return VALIDATION_RULES.EMAIL.test(email);\r\n};\r\n\r\n/**\r\n * Valide un mot de passe\r\n */\r\nexport const isValidPassword = (password: string): boolean => {\r\n  return password.length >= VALIDATION_RULES.PASSWORD_MIN_LENGTH;\r\n};\r\n\r\n/**\r\n * Valide un fichier image\r\n */\r\nexport const isValidImageFile = (file: File): boolean => {\r\n  return (\r\n    VALIDATION_RULES.ALLOWED_IMAGE_TYPES.indexOf(file.type) !== -1 &&\r\n    file.size <= VALIDATION_RULES.MAX_FILE_SIZE\r\n  );\r\n};\r\n\r\n/**\r\n * Redimensionne une image\r\n */\r\nexport const resizeImage = (\r\n  file: File,\r\n  maxWidth: number = 800,\r\n  maxHeight: number = 600,\r\n  quality: number = 0.8\r\n): Promise<Blob> => {\r\n  return new Promise((resolve, reject) => {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    const img = new Image();\r\n\r\n    img.onload = () => {\r\n      // Calculer les nouvelles dimensions\r\n      let { width, height } = img;\r\n      \r\n      if (width > maxWidth) {\r\n        height = (height * maxWidth) / width;\r\n        width = maxWidth;\r\n      }\r\n      \r\n      if (height > maxHeight) {\r\n        width = (width * maxHeight) / height;\r\n        height = maxHeight;\r\n      }\r\n\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n\r\n      if (ctx) {\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n        canvas.toBlob(\r\n          (blob) => {\r\n            if (blob) {\r\n              resolve(blob);\r\n            } else {\r\n              reject(new Error('Erreur lors du redimensionnement'));\r\n            }\r\n          },\r\n          'image/jpeg',\r\n          quality\r\n        );\r\n      } else {\r\n        reject(new Error('Impossible de créer le contexte canvas'));\r\n      }\r\n    };\r\n\r\n    img.onerror = () => reject(new Error('Erreur lors du chargement de l\\'image'));\r\n    img.src = URL.createObjectURL(file);\r\n  });\r\n};\r\n\r\n/**\r\n * Formate une date\r\n */\r\nexport const formatDate = (date: Date): string => {\r\n  return new Intl.DateTimeFormat('fr-FR', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  }).format(date);\r\n};\r\n\r\n/**\r\n * Formate une note avec étoiles\r\n */\r\nexport const formatRating = (rating: number): string => {\r\n  return `${rating}/5`;\r\n};\r\n\r\n/**\r\n * Calcule la moyenne des notes\r\n */\r\nexport const calculateAverageRating = (ratings: number[]): number => {\r\n  if (ratings.length === 0) return 0;\r\n  const sum = ratings.reduce((acc, rating) => acc + rating, 0);\r\n  return Math.round((sum / ratings.length) * 10) / 10;\r\n};\r\n\r\n/**\r\n * Génère une distribution des notes\r\n */\r\nexport const generateRatingDistribution = (ratings: number[]): Record<number, number> => {\r\n  const distribution: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\r\n  \r\n  ratings.forEach(rating => {\r\n    if (rating >= 1 && rating <= 5) {\r\n      distribution[rating]++;\r\n    }\r\n  });\r\n  \r\n  return distribution;\r\n};\r\n\r\n/**\r\n * Retourne l'User Agent du navigateur\r\n */\r\nexport const getUserAgent = (): string => {\r\n  return navigator.userAgent;\r\n};\r\n\r\n/**\r\n * Retourne l'adresse IP (approximative via service externe)\r\n */\r\nexport const getIpAddress = async (): Promise<string | null> => {\r\n  try {\r\n    const response = await fetch('https://api.ipify.org?format=json');\r\n    const data = await response.json();\r\n    return data.ip;\r\n  } catch (error) {\r\n    console.warn('Impossible de récupérer l\\'IP:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Stocke une valeur dans le localStorage\r\n */\r\nexport const setLocalStorage = (key: string, value: any): void => {\r\n  try {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  } catch (error) {\r\n    console.warn('Erreur lors du stockage local:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Récupère une valeur du localStorage\r\n */\r\nexport const getLocalStorage = <T>(key: string, defaultValue: T): T => {\r\n  try {\r\n    const item = localStorage.getItem(key);\r\n    return item ? JSON.parse(item) : defaultValue;\r\n  } catch (error) {\r\n    console.warn('Erreur lors de la récupération locale:', error);\r\n    return defaultValue;\r\n  }\r\n};\r\n\r\n/**\r\n * Supprime une valeur du localStorage\r\n */\r\nexport const removeLocalStorage = (key: string): void => {\r\n  try {\r\n    localStorage.removeItem(key);\r\n  } catch (error) {\r\n    console.warn('Erreur lors de la suppression locale:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * Débounce une fonction\r\n */\r\nexport const debounce = <T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let timeout: number;\r\n  \r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeout);\r\n    timeout = window.setTimeout(() => func(...args), wait);\r\n  };\r\n};\r\n\r\n/**\r\n * Retry une fonction avec délai\r\n */\r\nexport const retry = async <T>(\r\n  fn: () => Promise<T>,\r\n  maxRetries: number = 3,\r\n  delay: number = 1000\r\n): Promise<T> => {\r\n  let lastError: Error = new Error('Une erreur est survenue');\r\n  \r\n  for (let i = 0; i < maxRetries; i++) {\r\n    try {\r\n      return await fn();\r\n    } catch (error) {\r\n      lastError = error as Error;\r\n      if (i < maxRetries - 1) {\r\n        await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\r\n      }\r\n    }\r\n  }\r\n  \r\n  throw new Error(lastError.message || 'Une erreur est survenue');\r\n};\r\n\r\n/**\r\n * Combine les classes CSS\r\n */\r\nexport const cn = (...classes: (string | undefined | null | false)[]): string => {\r\n  return classes.filter(Boolean).join(' ');\r\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n"],"names":["getAllFilms","async","filmsQuery","query","collection","db","COLLECTIONS","FILMS","orderBy","querySnapshot","getDocs","films","forEach","doc","_filmData$createdAt2","_filmData$updatedAt2","filmData","data","push","id","createdAt","toDate","Date","updatedAt","error","Error","Send","createLucideIcon","d","key","getSeance","_seanceData$date","_seanceData$createdAt","_seanceData$updatedAt","seanceDoc","getDoc","SEANCES","exists","seanceData","date","getSeanceResults","seance","seanceId","votesQuery","VOTES","where","votes","docs","map","filmStats","Map","vote","has","filmId","set","commentaires","get","note","commentaire","Promise","all","stats","ratings","moyenne","length","reduce","sum","rating","distribution","titre","realisateur","posterUrl","Math","round","totalVotes","seanceNom","nom","dateSeance","Button","_ref","variant","size","loading","icon","children","className","disabled","props","_jsxs","cn","primary","secondary","outline","ghost","danger","sm","md","lg","fill","viewBox","_jsx","cx","cy","r","stroke","strokeWidth","Card","padding","shadow","none","SeanceVotePage","z","min","max","optional","useParams","navigate","useNavigate","setSeance","useState","setFilms","results","setResults","setLoading","voting","setVoting","setVotes","useEffect","filmsData","resultsData","toast","ROUTES","VOTE","loadSeanceData","handleVote","prev","onClick","seanceFilms","filter","film","includes","ArrowLeft","Clock","toLocaleDateString","heure","Users","description","Star","_results$films","currentVote","filmResults","find","f","src","alt","star","type","value","onChange","e","target","placeholder","rows","maxLength","Object","keys","votePromises","values","addVote","success","RESULTS","points","voteQueue","batchTimeout","isProcessingBatch","_data$commentaire","generateId","trim","userId","undefined","userEmail","userAgent","getUserAgent","ipAddress","getIpAddress","sessionId","generateSessionId","isAnonymous","voteRef","setDoc","addVoteToQueue","user","_data$commentaire2","uid","email","window","setTimeout","processVoteBatch","checkIfUserVoted","message","votesToProcess","batch","writeBatch","commit","console","log","unshift","voteQuery","empty","getVoteQueueStatus","pendingVotes","isProcessing","nextBatchIn","now","toString","random","substring","navigator","response","fetch","json","ip","warn","setLocalStorage","localStorage","setItem","JSON","stringify","getLocalStorage","defaultValue","item","getItem","parse","_len2","arguments","classes","Array","_key2","Boolean","join"],"sourceRoot":""}