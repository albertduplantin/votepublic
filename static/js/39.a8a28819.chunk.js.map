{"version":3,"file":"static/js/39.a8a28819.chunk.js","mappings":";mLAkBA,MAAMA,EAAmB,QA2CZC,EAAcC,UACzB,IACE,MAAMC,GAAIC,EAAAA,EAAAA,IACRC,EAAAA,EAAAA,YAAWC,EAAAA,GAAIN,IACfO,EAAAA,EAAAA,IAAQ,QAAS,QAGbC,QAAsBC,EAAAA,EAAAA,SAAQN,GAC9BO,EAAgB,GAmBtB,OAjBAF,EAAcG,QAASC,IACrB,MAAMC,EAAOD,EAAIC,OACjBH,EAAMI,KAAK,CACTC,GAAIH,EAAIG,GACRC,MAAOH,EAAKG,MACZC,YAAaJ,EAAKI,YAClBC,KAAML,EAAKK,KACXC,MAAON,EAAKM,MACZC,MAAOP,EAAKO,MACZC,SAAUR,EAAKQ,SACfC,UAAWT,EAAKS,UAChBC,MAAOV,EAAKU,MACZC,UAAWX,EAAKW,UAAUC,SAC1BC,UAAWb,EAAKa,UAAUD,aAIvBf,CACT,CAAE,MAAOiB,GAEP,MADAC,QAAQD,MAAM,kDAA6CA,GACrDA,CACR,GAMWE,EAAc3B,UACzB,IACE,MAAM4B,GAASlB,EAAAA,EAAAA,IAAIN,EAAAA,GAAIN,EAAkB+B,GACnCC,QAAgBC,EAAAA,EAAAA,IAAOH,GAE7B,GAAIE,EAAQE,SAAU,CACpB,MAAMrB,EAAOmB,EAAQnB,OACrB,MAAO,CACLE,GAAIiB,EAAQjB,GACZC,MAAOH,EAAKG,MACZC,YAAaJ,EAAKI,YAClBC,KAAML,EAAKK,KACXC,MAAON,EAAKM,MACZC,MAAOP,EAAKO,MACZC,SAAUR,EAAKQ,SACfC,UAAWT,EAAKS,UAChBC,MAAOV,EAAKU,MACZC,UAAWX,EAAKW,UAAUC,SAC1BC,UAAWb,EAAKa,UAAUD,SAE9B,CAEA,OAAO,IACT,CAAE,MAAOE,GAEP,MADAC,QAAQD,MAAM,gDAA2CA,GACnDA,CACR,GA8BWQ,EAAajC,UACxB,IAEE,MAAMkC,QAAaP,EAAYE,GACvB,OAAJK,QAAI,IAAJA,GAAAA,EAAMd,iBACFe,EAAaD,EAAKd,WAG1B,MAAMQ,GAASlB,EAAAA,EAAAA,IAAIN,EAAAA,GAAIN,EAAkB+B,SACnCO,EAAAA,EAAAA,IAAUR,EAClB,CAAE,MAAOH,GAEP,MADAC,QAAQD,MAAM,yCAA0CA,GAClDA,CACR,GAyBWU,EAAenC,UAC1B,IACE,MAAM,QAAEqC,SAAkB,uCACpBC,GAAaC,EAAAA,EAAAA,IAAIF,EAASjB,SAC1BoB,EAAAA,EAAAA,IAAaF,EACrB,CAAE,MAAOb,GACPC,QAAQD,MAAM,2CAA4CA,EAE5D,E,0HCjMK,MAAMgB,EAAsBA,KACjC,MAAOjC,EAAOkC,IAAYC,EAAAA,EAAAA,UAAiB,KACpCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAYC,IAAiBJ,EAAAA,EAAAA,UAAS,KAG7CK,EAAAA,EAAAA,WAAU,KACUhD,WAChB,IACE,MAAMiD,QAAkBlD,EAAAA,EAAAA,MACxB2C,EAASO,EACX,CAAE,MAAOxB,GACPyB,EAAAA,GAAMzB,MAAM0B,EAAAA,GAAeC,cAC7B,CAAC,QACCP,GAAW,EACb,GAGFQ,IACC,IAGH,MAAMC,EAAgB9C,EAAM+C,OACzBrB,GACCA,EAAKpB,MAAM0C,cAAcC,SAASX,EAAWU,gBAC7CtB,EAAKnB,YAAYyC,cAAcC,SAASX,EAAWU,gBAGvD,OAAIZ,GAEAc,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2DAA0DC,UACvEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,cAAaC,SAAA,EAC1BF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,+EACfD,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qBAAoBC,SAAC,kCAOxCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,EAEtCF,EAAAA,EAAAA,KAAA,UAAQC,UAAU,qBAAoBC,UACpCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yCAAwCC,UACrDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sCAAqCC,SAAC,6BACpDF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,0BAAyBC,SAAC,2EAO7CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8CAA6CC,SAAA,EAE1DF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMC,UACnBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAACI,EAAAA,EAAM,CAACH,UAAU,8EAClBD,EAAAA,EAAAA,KAAA,SACEK,KAAK,OACLC,YAAY,6CACZC,MAAOnB,EACPoB,SAAWC,GAAMpB,EAAcoB,EAAEC,OAAOH,OACxCN,UAAU,kJAKE,IAAjBnD,EAAM6D,QACLR,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oBAAmBC,SAAA,EAChCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeC,SAAC,kBAC/BF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,wCAAuCC,SAAC,2BACtDF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,gBAAeC,SAAC,0DAG/BC,EAAAA,EAAAA,MAAAS,EAAAA,SAAA,CAAAV,SAAA,EAEEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMC,UACnBC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,gBAAeC,SAAA,CACzBN,EAAce,OAAO,QAAMf,EAAce,OAAS,EAAI,IAAM,GAAG,aAAQf,EAAce,OAAS,EAAI,IAAM,GACxGvB,GAAc,UAAUA,WAK7BY,EAAAA,EAAAA,KAAA,OAAKC,UAAU,aAAYC,SACxBN,EAAciB,IAAKrC,IAClB2B,EAAAA,EAAAA,MAAA,OAAmBF,UAAU,yCAAwCC,SAAA,CAClE1B,EAAKd,YACJsC,EAAAA,EAAAA,KAAA,OACEc,IAAKtC,EAAKd,UACVqD,IAAKvC,EAAKpB,MACV6C,UAAU,8CAIdE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sCAAqCC,SAAE1B,EAAKpB,SAC1D+C,EAAAA,EAAAA,MAAA,KAAGF,UAAU,wBAAuBC,SAAA,CAAC,sBACvBF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,cAAaC,SAAE1B,EAAKnB,kBAElD2C,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wCAAuCC,SACjD1B,EAAKf,YAGR0C,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yCAAwCC,SAAA,EACrDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0CAAyCC,SAAA,EACtDF,EAAAA,EAAAA,KAACgB,EAAAA,EAAI,CAACf,UAAU,kCAChBD,EAAAA,EAAAA,KAAA,QAAAE,SAAM,0BAERC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wBAAuBC,SAAA,CAAC,gBAC1B,IAAIe,KAAKzC,EAAKZ,WAAWsD,mBAAmB,oBAxBrD1C,EAAKrB,OAiClBiC,GAAuC,IAAzBQ,EAAce,SAC3BR,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oBAAmBC,SAAA,EAChCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeC,SAAC,kBAC/BF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,2CAA0CC,SAAC,0BAGzDC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,gBAAeC,SAAA,CAAC,kDACkBd,EAAW,QAE1DY,EAAAA,EAAAA,KAAA,UACEmB,QAASA,IAAM9B,EAAc,IAC7BY,UAAU,+CAA8CC,SACzD,oC,iGCtIV,MAAMkB,EAAaA,IACjBH,KAAKI,MAAMC,SAAS,IAAMC,KAAKC,SAASF,SAAS,IAAIG,UAAU,GAM3DC,EAAoBA,IAGxB,GAFWT,KAAKI,SACRE,KAAKC,SAASF,SAAS,IAAIG,UAAU,KAiIzCE,EAAeA,IACnBC,UAAUC,UAMNC,EAAexF,UAC1B,IACE,MAAMyF,QAAiBC,MAAM,qCAE7B,aADmBD,EAASE,QAChBC,EACd,CAAE,MAAOnE,GAEP,OADAC,QAAQmE,KAAK,sCAAkCpE,GACxC,IACT,GAMWqE,EAAkBA,CAACC,EAAa9B,KAC3C,IACE+B,aAAaC,QAAQF,EAAKG,KAAKC,UAAUlC,GAC3C,CAAE,MAAOxC,GACPC,QAAQmE,KAAK,iCAAkCpE,EACjD,GAMW2E,EAAkBA,CAAIL,EAAaM,KAC9C,IACE,MAAMC,EAAON,aAAaO,QAAQR,GAClC,OAAOO,EAAOJ,KAAKM,MAAMF,GAAQD,CACnC,CAAE,MAAO5E,GAEP,OADAC,QAAQmE,KAAK,+CAA0CpE,GAChD4E,CACT,GAwDWI,EAAK,WAAgE,IAAD,IAAAC,EAAAC,UAAAtC,OAA3DuC,EAAO,IAAAC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAPF,EAAOE,GAAAH,UAAAG,GAC3B,OAAOF,EAAQrD,OAAOwD,SAASC,KAAK,IACtC,C,kCCnOM,MAAAlD,GAASmD,E,QAAAA,GAAiB,SAAU,CACxC,CAAC,SAAU,CAAEC,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKrB,IAAK,WAC9C,CAAC,OAAQ,CAAEsB,EAAG,iBAAkBtB,IAAK,Y","sources":["services/filmService.ts","pages/FilmsPage.tsx","utils/helpers.ts","../node_modules/lucide-react/src/icons/search.ts"],"sourcesContent":["import { db } from './firebase';\nimport { \n  collection, \n  doc, \n  addDoc, \n  updateDoc, \n  deleteDoc, \n  getDocs, \n  getDoc, \n  query, \n  where, \n  orderBy,\n  limit\n} from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\nimport { Film, CreateFilmData } from '../types';\nimport { generateId } from '../utils/helpers';\n\nconst FILMS_COLLECTION = 'films';\nconst POSTERS_FOLDER = 'posters';\n\n/**\n * Cr√©er un nouveau film avec upload du poster\n */\nexport const createFilm = async (data: CreateFilmData): Promise<Film> => {\n  try {\n    let posterUrl: string | undefined;\n\n    // Upload du poster si fourni\n    if (data.poster) {\n      posterUrl = await uploadPoster(data.poster);\n    }\n\n    const filmData: Omit<Film, 'id'> = {\n      titre: data.titre,\n      realisateur: data.realisateur,\n      pays: data.pays,\n      duree: data.duree,\n      annee: data.annee,\n      synopsis: data.synopsis,\n      genre: data.genre,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      ...(posterUrl && { posterUrl }),\n    };\n\n    const docRef = await addDoc(collection(db, FILMS_COLLECTION), filmData);\n    \n    return {\n      id: docRef.id,\n      ...filmData,\n    };\n  } catch (error) {\n    console.error('Erreur lors de la cr√©ation du film:', error);\n    throw error;\n  }\n};\n\n/**\n * R√©cup√©rer tous les films\n */\nexport const getAllFilms = async (): Promise<Film[]> => {\n  try {\n    const q = query(\n      collection(db, FILMS_COLLECTION),\n      orderBy('titre', 'asc')\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const films: Film[] = [];\n    \n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      films.push({\n        id: doc.id,\n        titre: data.titre,\n        realisateur: data.realisateur,\n        pays: data.pays,\n        duree: data.duree,\n        annee: data.annee,\n        synopsis: data.synopsis,\n        posterUrl: data.posterUrl,\n        genre: data.genre,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      });\n    });\n    \n    return films;\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des films:', error);\n    throw error;\n  }\n};\n\n/**\n * R√©cup√©rer un film par son ID\n */\nexport const getFilmById = async (filmId: string): Promise<Film | null> => {\n  try {\n    const docRef = doc(db, FILMS_COLLECTION, filmId);\n    const docSnap = await getDoc(docRef);\n    \n    if (docSnap.exists()) {\n      const data = docSnap.data();\n      return {\n        id: docSnap.id,\n        titre: data.titre,\n        realisateur: data.realisateur,\n        pays: data.pays,\n        duree: data.duree,\n        annee: data.annee,\n        synopsis: data.synopsis,\n        posterUrl: data.posterUrl,\n        genre: data.genre,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      };\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration du film:', error);\n    throw error;\n  }\n};\n\n/**\n * Mettre √† jour un film\n */\nexport const updateFilm = async (filmId: string, data: Partial<CreateFilmData>): Promise<void> => {\n  try {\n    const docRef = doc(db, FILMS_COLLECTION, filmId);\n    \n    const updateData: any = {\n      ...data,\n      updatedAt: new Date(),\n    };\n\n    // Upload du nouveau poster si fourni\n    if (data.poster) {\n      updateData.posterUrl = await uploadPoster(data.poster);\n    }\n\n    await updateDoc(docRef, updateData);\n  } catch (error) {\n    console.error('Erreur lors de la mise √† jour du film:', error);\n    throw error;\n  }\n};\n\n/**\n * Supprimer un film\n */\nexport const deleteFilm = async (filmId: string): Promise<void> => {\n  try {\n    // R√©cup√©rer le film pour supprimer le poster\n    const film = await getFilmById(filmId);\n    if (film?.posterUrl) {\n      await deletePoster(film.posterUrl);\n    }\n\n    const docRef = doc(db, FILMS_COLLECTION, filmId);\n    await deleteDoc(docRef);\n  } catch (error) {\n    console.error('Erreur lors de la suppression du film:', error);\n    throw error;\n  }\n};\n\n/**\n * Upload d'un poster\n */\nexport const uploadPoster = async (file: File): Promise<string> => {\n  try {\n    const { storage } = await import('./firebase');\n    const fileName = `${generateId()}_${file.name}`;\n    const storageRef = ref(storage, `${POSTERS_FOLDER}/${fileName}`);\n    \n    const snapshot = await uploadBytes(storageRef, file);\n    const downloadURL = await getDownloadURL(snapshot.ref);\n    \n    return downloadURL;\n  } catch (error) {\n    console.error('Erreur lors de l\\'upload du poster:', error);\n    throw error;\n  }\n};\n\n/**\n * Supprimer un poster\n */\nexport const deletePoster = async (posterUrl: string): Promise<void> => {\n  try {\n    const { storage } = await import('./firebase');\n    const storageRef = ref(storage, posterUrl);\n    await deleteObject(storageRef);\n  } catch (error) {\n    console.error('Erreur lors de la suppression du poster:', error);\n    // Ne pas throw l'erreur car ce n'est pas critique\n  }\n};\n\n/**\n * Rechercher des films\n */\nexport const searchFilms = async (searchTerm: string): Promise<Film[]> => {\n  try {\n    const films = await getAllFilms();\n    const term = searchTerm.toLowerCase();\n    \n    return films.filter(film => \n      film.titre.toLowerCase().includes(term) ||\n      film.realisateur.toLowerCase().includes(term) ||\n      film.pays.toLowerCase().includes(term) ||\n      film.genre.toLowerCase().includes(term)\n    );\n  } catch (error) {\n    console.error('Erreur lors de la recherche de films:', error);\n    throw error;\n  }\n};\n\n/**\n * R√©cup√©rer les films par genre\n */\nexport const getFilmsByGenre = async (genre: string): Promise<Film[]> => {\n  try {\n    const q = query(\n      collection(db, FILMS_COLLECTION),\n      where('genre', '==', genre),\n      orderBy('titre', 'asc')\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const films: Film[] = [];\n    \n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      films.push({\n        id: doc.id,\n        titre: data.titre,\n        realisateur: data.realisateur,\n        pays: data.pays,\n        duree: data.duree,\n        annee: data.annee,\n        synopsis: data.synopsis,\n        posterUrl: data.posterUrl,\n        genre: data.genre,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      });\n    });\n    \n    return films;\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des films par genre:', error);\n    throw error;\n  }\n};\n\n/**\n * R√©cup√©rer les films r√©cents\n */\nexport const getRecentFilms = async (limitCount: number = 10): Promise<Film[]> => {\n  try {\n    const q = query(\n      collection(db, FILMS_COLLECTION),\n      orderBy('createdAt', 'desc'),\n      limit(limitCount)\n    );\n    \n    const querySnapshot = await getDocs(q);\n    const films: Film[] = [];\n    \n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      films.push({\n        id: doc.id,\n        titre: data.titre,\n        realisateur: data.realisateur,\n        pays: data.pays,\n        duree: data.duree,\n        annee: data.annee,\n        synopsis: data.synopsis,\n        posterUrl: data.posterUrl,\n        genre: data.genre,\n        createdAt: data.createdAt.toDate(),\n        updatedAt: data.updatedAt.toDate(),\n      });\n    });\n    \n    return films;\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des films r√©cents:', error);\n    throw error;\n  }\n};\n\n/**\n * R√©cup√©rer les statistiques des films\n */\nexport const getFilmsStats = async (): Promise<{\n  total: number;\n  parGenre: Record<string, number>;\n  parPays: Record<string, number>;\n  parAnnee: Record<number, number>;\n}> => {\n  try {\n    const films = await getAllFilms();\n    \n    const stats = {\n      total: films.length,\n      parGenre: {} as Record<string, number>,\n      parPays: {} as Record<string, number>,\n      parAnnee: {} as Record<number, number>,\n    };\n    \n    films.forEach(film => {\n      // Compter par genre\n      stats.parGenre[film.genre] = (stats.parGenre[film.genre] || 0) + 1;\n      \n      // Compter par pays\n      stats.parPays[film.pays] = (stats.parPays[film.pays] || 0) + 1;\n      \n      // Compter par ann√©e\n      stats.parAnnee[film.annee] = (stats.parAnnee[film.annee] || 0) + 1;\n    });\n    \n    return stats;\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des statistiques des films:', error);\n    throw error;\n  }\n};\n\n/**\n * R√©cup√©rer les genres disponibles\n */\nexport const getAvailableGenres = async (): Promise<string[]> => {\n  try {\n    const films = await getAllFilms();\n    const genres = Array.from(new Set(films.map(film => film.genre)));\n    return genres.sort();\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des genres:', error);\n    throw error;\n  }\n};\n\n/**\n * R√©cup√©rer plusieurs films par leurs IDs\n */\nexport const getFilmsByIds = async (filmIds: string[]): Promise<Film[]> => {\n  try {\n    if (filmIds.length === 0) return [];\n    \n    // R√©cup√©rer les films en parall√®le\n    const filmPromises = filmIds.map(id => getFilmById(id));\n    const films = await Promise.all(filmPromises);\n    \n    // Filtrer les films null et retourner\n    return films.filter((film): film is Film => film !== null);\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des films par IDs:', error);\n    throw error;\n  }\n};\n\n/**\n * R√©cup√©rer les pays disponibles\n */\nexport const getAvailableCountries = async (): Promise<string[]> => {\n  try {\n    const films = await getAllFilms();\n    const countries = Array.from(new Set(films.map(film => film.pays)));\n    return countries.sort();\n  } catch (error) {\n    console.error('Erreur lors de la r√©cup√©ration des pays:', error);\n    throw error;\n  }\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { Search, Star } from 'lucide-react';\r\nimport { Film } from '../types';\r\nimport { getAllFilms } from '../services/filmService';\r\nimport { ERROR_MESSAGES } from '../utils/constants';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport const FilmsPage: React.FC = () => {\r\n  const [films, setFilms] = useState<Film[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Charger les films\r\n  useEffect(() => {\r\n    const loadFilms = async () => {\r\n      try {\r\n        const filmsData = await getAllFilms();\r\n        setFilms(filmsData);\r\n      } catch (error) {\r\n        toast.error(ERROR_MESSAGES.NETWORK_ERROR);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadFilms();\r\n  }, []);\r\n\r\n  // Filtrer les films selon la recherche\r\n  const filteredFilms = films.filter(\r\n    (film) =>\r\n      film.titre.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      film.realisateur.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Chargement des films...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <header className=\"bg-white shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"py-6\">\r\n            <h1 className=\"text-3xl font-bold text-primary-600\">Films en comp√©tition</h1>\r\n            <p className=\"text-secondary-600 mt-1\">\r\n              D√©couvrez tous les films du Festival du Film Court de Dinan\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Barre de recherche */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Rechercher un film ou un r√©alisateur...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {films.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"text-6xl mb-4\">üé¨</div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Aucun film disponible</h2>\r\n            <p className=\"text-gray-600\">Les films seront ajout√©s par l'administrateur.</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* Statistiques */}\r\n            <div className=\"mb-6\">\r\n              <p className=\"text-gray-600\">\r\n                {filteredFilms.length} film{filteredFilms.length > 1 ? 's' : ''} trouv√©{filteredFilms.length > 1 ? 's' : ''}\r\n                {searchTerm && ` pour \"${searchTerm}\"`}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Grille des films */}\r\n            <div className=\"films-grid\">\r\n              {filteredFilms.map((film) => (\r\n                <div key={film.id} className=\"card hover:shadow-lg transition-shadow\">\r\n                  {film.posterUrl && (\r\n                    <img\r\n                      src={film.posterUrl}\r\n                      alt={film.titre}\r\n                      className=\"w-full h-64 object-cover rounded-lg mb-4\"\r\n                    />\r\n                  )}\r\n                  \r\n                  <div className=\"space-y-3\">\r\n                    <h3 className=\"text-xl font-semibold text-gray-900\">{film.titre}</h3>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      R√©alis√© par <span className=\"font-medium\">{film.realisateur}</span>\r\n                    </p>\r\n                    <p className=\"text-gray-700 text-sm leading-relaxed\">\r\n                      {film.synopsis}\r\n                    </p>\r\n                    \r\n                    <div className=\"flex items-center justify-between pt-2\">\r\n                      <div className=\"flex items-center text-sm text-gray-500\">\r\n                        <Star className=\"w-4 h-4 text-yellow-400 mr-1\" />\r\n                        <span>En comp√©tition</span>\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-400\">\r\n                        Ajout√© le {new Date(film.createdAt).toLocaleDateString('fr-FR')}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Message si aucun r√©sultat de recherche */}\r\n            {searchTerm && filteredFilms.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <div className=\"text-4xl mb-4\">üîç</div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                  Aucun film trouv√©\r\n                </h3>\r\n                <p className=\"text-gray-600\">\r\n                  Aucun film ne correspond √† votre recherche \"{searchTerm}\"\r\n                </p>\r\n                <button\r\n                  onClick={() => setSearchTerm('')}\r\n                  className=\"mt-4 text-primary-600 hover:text-primary-500\"\r\n                >\r\n                  Voir tous les films\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}; ","import { VALIDATION_RULES } from './constants';\r\n\r\n/**\r\n * G√©n√®re un ID unique\r\n */\r\nexport const generateId = (): string => {\r\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\r\n};\r\n\r\n/**\r\n * G√©n√®re un ID de session unique pour les votes anonymes\r\n */\r\nexport const generateSessionId = (): string => {\r\n  const timestamp = Date.now();\r\n  const random = Math.random().toString(36).substring(2);\r\n  return `${timestamp}-${random}`;\r\n};\r\n\r\n/**\r\n * Valide une adresse email\r\n */\r\nexport const isValidEmail = (email: string): boolean => {\r\n  return VALIDATION_RULES.EMAIL.test(email);\r\n};\r\n\r\n/**\r\n * Valide un mot de passe\r\n */\r\nexport const isValidPassword = (password: string): boolean => {\r\n  return password.length >= VALIDATION_RULES.PASSWORD_MIN_LENGTH;\r\n};\r\n\r\n/**\r\n * Valide un fichier image\r\n */\r\nexport const isValidImageFile = (file: File): boolean => {\r\n  return (\r\n    VALIDATION_RULES.ALLOWED_IMAGE_TYPES.indexOf(file.type) !== -1 &&\r\n    file.size <= VALIDATION_RULES.MAX_FILE_SIZE\r\n  );\r\n};\r\n\r\n/**\r\n * Redimensionne une image\r\n */\r\nexport const resizeImage = (\r\n  file: File,\r\n  maxWidth: number = 800,\r\n  maxHeight: number = 600,\r\n  quality: number = 0.8\r\n): Promise<Blob> => {\r\n  return new Promise((resolve, reject) => {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    const img = new Image();\r\n\r\n    img.onload = () => {\r\n      // Calculer les nouvelles dimensions\r\n      let { width, height } = img;\r\n      \r\n      if (width > maxWidth) {\r\n        height = (height * maxWidth) / width;\r\n        width = maxWidth;\r\n      }\r\n      \r\n      if (height > maxHeight) {\r\n        width = (width * maxHeight) / height;\r\n        height = maxHeight;\r\n      }\r\n\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n\r\n      if (ctx) {\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n        canvas.toBlob(\r\n          (blob) => {\r\n            if (blob) {\r\n              resolve(blob);\r\n            } else {\r\n              reject(new Error('Erreur lors du redimensionnement'));\r\n            }\r\n          },\r\n          'image/jpeg',\r\n          quality\r\n        );\r\n      } else {\r\n        reject(new Error('Impossible de cr√©er le contexte canvas'));\r\n      }\r\n    };\r\n\r\n    img.onerror = () => reject(new Error('Erreur lors du chargement de l\\'image'));\r\n    img.src = URL.createObjectURL(file);\r\n  });\r\n};\r\n\r\n/**\r\n * Formate une date\r\n */\r\nexport const formatDate = (date: Date): string => {\r\n  return new Intl.DateTimeFormat('fr-FR', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  }).format(date);\r\n};\r\n\r\n/**\r\n * Formate une note avec √©toiles\r\n */\r\nexport const formatRating = (rating: number): string => {\r\n  return `${rating}/5`;\r\n};\r\n\r\n/**\r\n * Calcule la moyenne des notes\r\n */\r\nexport const calculateAverageRating = (ratings: number[]): number => {\r\n  if (ratings.length === 0) return 0;\r\n  const sum = ratings.reduce((acc, rating) => acc + rating, 0);\r\n  return Math.round((sum / ratings.length) * 10) / 10;\r\n};\r\n\r\n/**\r\n * G√©n√®re une distribution des notes\r\n */\r\nexport const generateRatingDistribution = (ratings: number[]): Record<number, number> => {\r\n  const distribution: Record<number, number> = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };\r\n  \r\n  ratings.forEach(rating => {\r\n    if (rating >= 1 && rating <= 5) {\r\n      distribution[rating]++;\r\n    }\r\n  });\r\n  \r\n  return distribution;\r\n};\r\n\r\n/**\r\n * Retourne l'User Agent du navigateur\r\n */\r\nexport const getUserAgent = (): string => {\r\n  return navigator.userAgent;\r\n};\r\n\r\n/**\r\n * Retourne l'adresse IP (approximative via service externe)\r\n */\r\nexport const getIpAddress = async (): Promise<string | null> => {\r\n  try {\r\n    const response = await fetch('https://api.ipify.org?format=json');\r\n    const data = await response.json();\r\n    return data.ip;\r\n  } catch (error) {\r\n    console.warn('Impossible de r√©cup√©rer l\\'IP:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Stocke une valeur dans le localStorage\r\n */\r\nexport const setLocalStorage = (key: string, value: any): void => {\r\n  try {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  } catch (error) {\r\n    console.warn('Erreur lors du stockage local:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * R√©cup√®re une valeur du localStorage\r\n */\r\nexport const getLocalStorage = <T>(key: string, defaultValue: T): T => {\r\n  try {\r\n    const item = localStorage.getItem(key);\r\n    return item ? JSON.parse(item) : defaultValue;\r\n  } catch (error) {\r\n    console.warn('Erreur lors de la r√©cup√©ration locale:', error);\r\n    return defaultValue;\r\n  }\r\n};\r\n\r\n/**\r\n * Supprime une valeur du localStorage\r\n */\r\nexport const removeLocalStorage = (key: string): void => {\r\n  try {\r\n    localStorage.removeItem(key);\r\n  } catch (error) {\r\n    console.warn('Erreur lors de la suppression locale:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * D√©bounce une fonction\r\n */\r\nexport const debounce = <T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let timeout: number;\r\n  \r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeout);\r\n    timeout = window.setTimeout(() => func(...args), wait);\r\n  };\r\n};\r\n\r\n/**\r\n * Retry une fonction avec d√©lai\r\n */\r\nexport const retry = async <T>(\r\n  fn: () => Promise<T>,\r\n  maxRetries: number = 3,\r\n  delay: number = 1000\r\n): Promise<T> => {\r\n  let lastError: Error = new Error('Une erreur est survenue');\r\n  \r\n  for (let i = 0; i < maxRetries; i++) {\r\n    try {\r\n      return await fn();\r\n    } catch (error) {\r\n      lastError = error as Error;\r\n      if (i < maxRetries - 1) {\r\n        await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));\r\n      }\r\n    }\r\n  }\r\n  \r\n  throw new Error(lastError.message || 'Une erreur est survenue');\r\n};\r\n\r\n/**\r\n * Combine les classes CSS\r\n */\r\nexport const cn = (...classes: (string | undefined | null | false)[]): string => {\r\n  return classes.filter(Boolean).join(' ');\r\n}; ","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('Search', [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['path', { d: 'm21 21-4.3-4.3', key: '1qie3q' }],\n]);\n\nexport default Search;\n"],"names":["FILMS_COLLECTION","getAllFilms","async","q","query","collection","db","orderBy","querySnapshot","getDocs","films","forEach","doc","data","push","id","titre","realisateur","pays","duree","annee","synopsis","posterUrl","genre","createdAt","toDate","updatedAt","error","console","getFilmById","docRef","filmId","docSnap","getDoc","exists","deleteFilm","film","deletePoster","deleteDoc","storage","storageRef","ref","deleteObject","FilmsPage","setFilms","useState","loading","setLoading","searchTerm","setSearchTerm","useEffect","filmsData","toast","ERROR_MESSAGES","NETWORK_ERROR","loadFilms","filteredFilms","filter","toLowerCase","includes","_jsx","className","children","_jsxs","Search","type","placeholder","value","onChange","e","target","length","_Fragment","map","src","alt","Star","Date","toLocaleDateString","onClick","generateId","now","toString","Math","random","substring","generateSessionId","getUserAgent","navigator","userAgent","getIpAddress","response","fetch","json","ip","warn","setLocalStorage","key","localStorage","setItem","JSON","stringify","getLocalStorage","defaultValue","item","getItem","parse","cn","_len2","arguments","classes","Array","_key2","Boolean","join","createLucideIcon","cx","cy","r","d"],"sourceRoot":""}